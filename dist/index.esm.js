function t(t,e,i=0){const{x:r,y:n,width:s,height:a}=t,{x:o,y:h}=e;return o>=r&&o<=r+s-i&&h>=n&&h<=n+a}class e{constructor(t){this.differenceX=0,this.differenceY=0,this.sourceX=0,this.sourceY=0,this.startX=0,this.startY=0,this.targetGroup=null,Object.assign(this,t)}}function i(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+(4*Math.random()|8).toString(16)+t().substr(0,3)+"-"+t()+t()+t()}var r=Object.defineProperty,n=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i),i);class s{toString(){return this.getName()}equals(t){return t&&t.toString()===this.toString()}indexOf(t,e){let i=t%e;return i<0&&(i+=e),i}}class a extends s{}class o extends s{constructor(t,e){super(),n(this,"culture"),n(this,"dayIndex"),this.culture=t,this.dayIndex=e}getDayIndex(){return this.dayIndex}getCulture(){return this.culture}getName(){return this.culture.getName()}toString(){return`${this.culture.toString()}第${this.getDayIndex()+1}天`}}class h extends a{constructor(t,e){super(),n(this,"names"),n(this,"index"),this.names=t,this.index=this.indexOfBy(e)}indexOfBy(t){if("number"==typeof t)return this.indexOf(t,this.getSize());for(let e=0,i=this.getSize();e<i;e++)if(this.names[e]===t)return e;throw new Error(`illegal name ${t}`)}getName(){return this.names[this.index]}getIndex(){return this.index}getSize(){return this.names.length}nextIndex(t){return this.indexOfBy(this.index+t)}}const l=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getTwentyEightStar(){return g.fromIndex(this.index)}};n(l,"NAMES",["蛟","龙","貉","兔","狐","虎","豹","獬","牛","蝠","鼠","燕","猪","獝","狼","狗","彘","鸡","乌","猴","猿","犴","羊","獐","马","鹿","蛇","蚓"]);let d=l;const c=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getSevenStar(){return f.fromIndex(this.index%7+4)}getLand(){return p.fromIndex([4,4,4,2,2,2,7,7,7,0,0,0,0,5,5,5,6,6,6,1,1,1,8,8,8,3,3,3][this.index])}getZone(){return E.fromIndex(~~(this.index/7))}getAnimal(){return d.fromIndex(this.index)}getLuck(){return v.fromIndex([0,1,1,0,1,0,0,0,1,1,1,1,0,0,1,0,0,1,0,1,0,0,1,1,1,0,1,0][this.index])}};n(c,"NAMES",["角","亢","氐","房","心","尾","箕","斗","牛","女","虚","危","室","壁","奎","娄","胃","昴","毕","觜","参","井","鬼","柳","星","张","翼","轸"]);let g=c;const u=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getWeek(){return C.fromIndex(this.index)}};n(u,"NAMES",["日","月","火","水","木","金","土"]);let f=u;const F=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getSevenStar(){return f.fromIndex(this.index)}};n(F,"NAMES",["日","一","二","三","四","五","六"]);let C=F;const m=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getDirection(){return j.fromIndex(this.index)}};n(m,"NAMES",["玄天","朱天","苍天","阳天","钧天","幽天","颢天","变天","炎天"]);let p=m;const A=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getLand(){return p.fromIndex(this.index)}getElement(){return M.fromIndex([4,2,0,0,2,3,3,2,1][this.index])}};n(A,"NAMES",["北","西南","东","东南","中","西北","西","东北","南"]);let j=A;const y=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getDirection(){return j.fromName(this.getName())}getBeast(){return x.fromIndex(this.getIndex())}};n(y,"NAMES",["东","北","西","南"]);let E=y;const D=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getZone(){return E.fromIndex(this.index)}};n(D,"NAMES",["青龙","玄武","白虎","朱雀"]);let x=D;const b=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(b,"NAMES",["吉","凶"]);let v=b;const _=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(_,"NAMES",["白羊","金牛","双子","巨蟹","狮子","处女","天秤","天蝎","射手","摩羯","水瓶","双鱼"]);let S=_;const B=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(B,"NAMES",["建","除","满","平","定","执","破","危","成","收","开","闭"]);let w=B;const k=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getReinforce(){return this.next(1)}getRestrain(){return this.next(2)}getReinforced(){return this.next(-1)}getRestrained(){return this.next(-2)}getDirection(){return j.fromIndex([2,8,4,6,0][this.index])}};n(k,"NAMES",["木","火","土","金","水"]);let M=k;const I=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getLuck(){return v.fromIndex(this.index<60?0:1)}static getDayGods(e,i){const r=[];let n=i.getIndex().toString(16).toUpperCase();n.length<2&&(n="0"+n);const s=new RegExp(`;${n}(.[^;]*)`,"g").exec(t.dayGods[e.getEarthBranch().next(-2).getIndex()]);if(s){const e=s[1];for(let i=0,n=e.length;i<n;i+=2)r.push(t.fromIndex(parseInt(e.substring(i,i+2),16)))}return r}};n(I,"NAMES",["天恩","鸣吠","母仓","不将","四相","鸣吠对","五合","三合","除神","月德","月空","月德合","月恩","时阴","五富","生气","金匮","相日","阴德","六合","益后","青龙","续世","明堂","王日","要安","官日","吉期","福德","六仪","金堂","宝光","民日","临日","天马","敬安","普护","驿马","天后","阳德","天喜","天医","司命","圣心","玉宇","守日","时德","解神","时阳","天仓","天巫","玉堂","福生","天德","天德合","天愿","天赦","天符","阴神","解除","五虚","五离","重日","复日","血支","天贼","土符","游祸","白虎","小耗","致死","河魁","劫煞","月煞","月建","往亡","大时","大败","咸池","厌对","招摇","九坎","九焦","天罡","死神","月害","死气","月破","大耗","天牢","元武","月厌","月虚","归忌","小时","天刑","朱雀","九空","天吏","地火","四击","大煞","勾陈","八专","灾煞","天火","血忌","土府","月刑","触水龙","地囊","八风","四废","四忌","四穷","五墓","阴错","四耗","阳错","孤辰","小会","大会","八龙","七鸟","九虎","六蛇","天狗","行狠","了戾","岁薄","逐阵","三丧","三阴","阴道冲阳","阴位","阴阳交破","阴阳俱错","阴阳击冲","鬼哭","单阴","绝阴","纯阳","阳错阴冲","七符","成日","孤阳","绝阳","纯阴","大退","四离","阳破阴冲"]),n(I,"dayGods",[";000002300F14156869717A3F;01001617495C40413C425D6A;0209000C041831031906054A5E6B4B5F;033500041A1B032C06054C4D4E60;04002D321C1D1E104F50615152;05111F53546C55433C3E;062E200721220D01566E44;070B2333242F45;08360A2526242F080157583D59;091234080162463C3D5A;0A270728292A5B6364653F79;0B0237130E2B4748727A3E66;0C09020C04300F0314150568696D;0D3504031617495C40413C6F425D6A;0E38183119064A5E6B4B5F;0F001A1B032C064C4D4E60;10002D321C1D1E104F50615152;110B00111F53546C55433C3E;12360A002E200721220D015644;13002333456D;142526242F080157583F3D59;15001234080162463C3D5A;16090004270728292A5B636465;17350204130E032B47483E66;1802300F14156869;19031617495C40413C425D6A;1A1831031906054A5E6B4B5F;1B0B1A1B032C06054C4D4E;1C360A2D321C1D1E104F50615152;1D111F53546C55433C3E;1E2E200721220D01563F44;1F23334573;20090C042526242F080157583D;2135041234080162463C3D5A;22270728292A5B636465;2302130E032B47483E66;2402300F0314150568696E;250B031617495C40413C425D6A;26360A18311906054A5E6B4B5F;271A1B2C06054C4D4E60;282D321C1D1E104F506151523F;29111F53546C55433C3E;2A090C042E200721220D015644;2B350423334567;2C2526242F0857583D59;2D001234080162463C3D5A;2E00270728292A5B63646574;2F0B0002130E032B47483E66;30360A0002300F141505686975;31001617495C40413C425D6A676D;3218311906054A5E6B4B3F675F76;331A1B2C06054C4D4E60;34090C042D321C1D1E104F50615152;353504111F53546C55433C6F3E;362E200721220D5644;3723334567;382526242F08015758703D6759;390B123408016246703C3D5A84;3A360A270728292A5B636465;3B02130E2B47483E66;",";00090002272A536C4C4D4E41717A;0100300F3103233C6151523F66;020004180E032406150543405D;03000C041A1D340617054A5E6B4F50;04002D1B555F;050B112526321C2B3C42654B3E60;060A2E2014100547546246;0712070D161F566A;0822192F0148453D44;092C083301575868695B633C3D;0A0937131E495C6459;0B020721282903727A3F3E5A;0C020427032A05536C4C4D4E416D;0D0C04300F03233C6F61515266;0E38180E24061543405D;0F0B001A1D3406174A5E6B4F5078;100A002D1B555F;1100112526321C2B3C42654B3E60;12002E2014100147546246;130012070D161F566A6D;140922192F080148453D44;152C083301575868695B633C3F3D44;160413031E495C6459;17020C0407212829033E5A;1802272A536C4C4D4E41;190B300F3103233C61515266;1A0A180E032406150543405D;1B1A1D340617014A5E6B4F50;1C2D1B555F;1D112526321C2B3C42654B3E60;1E092E2014100147546246;1F12070D161F56736E6A3F;200422192F080148453D44;210C042C083301575868695B633C3D;22131E495C6459;230B0207212829033E5A;240A0227032A05536C4C4D4E41;25300F31233C61515266;26180E2406150543405D;271A1D340617054A5E6B4F50;28092D1B555F;29112526321C2B3C42654B3F3E60;2A042E2014100147546246;2B0C0412070D161F566A67;2C22192F0848453D44;2D0B002C083301575868695B633C3D85;2E0A0013031E495C6459;2F0002072128293E5A;300002272A05536C4C4D4E4175;3100300F31233C6151526E676D66;3209180E2406150543405D;331A1D340617054A5E6B4F503F76;34042D1B555F;350C04112526321C2B3C6F42654B3E60;362E20141047546246;370B12070D161F566A67;380A22192F08014845703D6744;392C083301575868695B63703C3D74;3A131E495C6459;3B02072128293E5A;",";00000207282931032B717A6E5D59;01000314473C5A;020A000427182526300F1D16062A054F506A;03360B00041A1906055562464066;04002D2C154A5E6B6C733F788B;0512111B0E1E17483C3E;060C2E20321C016869655F;0753544960;08350907210D230810015B63564B3D77;091324081F014C4D4E453C423D;0A2203342F57586461515244;0B02032C4341727A3E;0C0A020407282931032B055D6D59;0D360B040314473C6F5A;0E3827182526300F1D16062A4F506A3F;0F001A19065562464066;10000C2D2C154A5E6B6C86;110012111B0E1E17483C3E;123509002E20321C0168696E655F;13005354495C6D60;1407210D230810015B63564B3D7F;1537130324081F014C4D4E453C423D;160A042203342F57586461515244;17360B0204033343413E;1802072829312B5D3F59;190314473C5A;1A0C27182526300F1D16062A054F506A;1B1A1906055562464066;1C35092D2C154A5E6B6C;1D12111B0E1E17483C3E;1E2E20321C016869655F;1F5354495C60;200A0407210D230810015B63564B3D80;21360B04130324081F014C4D4E453C423D;2222342F5758646151523F44;2302033343413E;24020C072829312B055D59;2514473C5A;26120927182526300F1D16062A054F506A;271A1906055562464066;282D2C154A5E6B6C76;2912111B0E1E17483C3E;2A0A042E20321C016869655F;2B360B045354495C6760;2C07210D2308105B63564B3F3D77;2D00130324081F014C4D4E453C423D;2E000C22342F57586461515244;2F00023343413E;3035090002072829312B05755D59;310014473C676D5A;3227182526300F1D16062A054F506A67;331A1906055562464066;340A042D2C154A5E6B6C;35360B0412111B0E1E17483C6F3E;362E20321C6869653F5F;375354495C6760;380C07210D230810015B6356704B3D677774;391324081F014C4D4E45703C423D;3A350922342F57586461515244;3B023343413E;",";000A00220362463C44;010B00072128291D334F50645D;02360002230605534855423F59;03000212300F24060568695A;0400042E27342A495C403C8C;050C04184A5E6B3E66788D76;06091A1B2B15014C4D4E;07352D321C14175B636151526577;0811130E16080147546C433C6A3D5F;0920070D190801563D60;0A0A032C2F104541;0B0B252631031E1F57584B3E;0C362203056246717B3C3F6D44;0D072128291D334F50645D;0E020423065348554259;0F00020C0412300F240668696E5A;1009002E12342A495C403C;113500184A5E6B3E66;12001A1B2B15014C4D4E;13002D321C14175B63615152656D77;140A11130E0316080147546C433C6F6A3D5F;150B20070D03190801563D60;1636032C2F104541733F;17252631031E1F5758727B4B3E;1804220362463C44;190C04072128291D334F50645D;1A09022306055348554259;1B3502120D0F24060568695A;1C2E27342A495C403C;1D184A5E6B3E66;1E0A381A1B2B15014C4D4E;1F0B2D321C14175B63615152657F;20363711130E0316080147546C433C6A3F3D5F;2120070D03190801563D60;2204032C2F104541;230C042526311E1F57584B3E;2409220562463C44;2535072128291D334F50645D;26022306055348554259;270212300F24060568695A;280A2E27342A495C403C6F;290B184A5E6B3E66;2A361A1B2B15014C4D4E3F81;2B2D321C14175B6361515265678074;2C0411130E03160847546C433C6A3D5F;2D000C0420070D190801566E3D60;2E09002C2F104541;2F35002526311E1F57584B3E;300022056246703C44;3100072128291D334F50645D676D;320A02230605534855426759;330B02120D0F2406056869755A;34362E27342A495C403C3F;35184A5E6B3E6676;36041A1B2B154C4D4E81;370C042D321C14175B6361515265677774;380911130E16080147546C433C6A3D675F;393520070D190801563D60;3A2C2F104541;3B2526311E1F5758704B3E87;",";00001D2F10575868694F503C;0100122B1F495C5564;0209000207222829140605655D44;03000216063305474C4D4E51526A4B3F;04000C042E300F193C6159;0504182C43403E5A;06271A1E2A014A5E6B6C5B6342;070B2D1B1366;080A112526321C0815013C3D;0920032308170153546246413D;0A07210D310324565F;0B0E033448453E60;0C091D2F1005575868694F50717B3C6D;0D122B1F495C553F;0E020C04072228291406655D44;0F000204160633474C4D4E51526A4B;10002E300F193C6159;110B00182C43403E5A;120A00271A1E2A014A5E6B6C5B6342;13002D1B13036D66;14112526321C030815013C6F3D;1520032308170153546246413D;160907210D31032456735F;170E344845727B3F3E60;180C041D2F10575868694F503C;1904122B1F495C5564;1A0207222829140605655D44;1B0B0216063305474C4D4E51526A4B;1C0A2E300F193C6159;1D182C43403E5A;1E38271A1E2A014A5E6B6C5B6342;1F2D1B130366;2009112526321C030815013C3D;21202308170153546246413F3D;220C0407210D3103565F;23040E3448453E60;241D2F1005575868694F503C;250B122B1F495C5564;260A0207222829140605655D44;270216063305474C4D4E51526A4B;282E300F193C6F616E59;29182C43403E5A;2A09271A1E2A014A5E6B6C5B63427988;2B372D1B133F6766;2C0C04112526321C0308153C3D;2D0004202308170153546246413D;2E0007210D3124565F;2F0B000E3448453E60;300A001D2F1005575868694F50703C89;3100122B1F495C5564676D;320207222829140605655D6744;330216063305474C4D4E7551526A4B;34092E300F193C6159;35182C43403F3E5A;360904271A1E2A4A5E6B6C5B634278;37042D1B136766;38112526321C0815013C3D67;390B202308170153546246413D;3A0A07210D3124566E5F;3B0E03344845703E60;",";003509001E2F554C4D4E453C51525D5F;010057586C646160;0200020E06100543;0300020721282923061F0565;0400042E2224533C7344;05360B04182526300F34335B633F3E74;060A1A13016246404B59;070C2D2B4A5E6B5A;0827111B0314082A0148413C3D;0920321C310316080148413C3D;0A35090319154754495C42;0B12070D1D2C174F50563E;0C1E2F05554C4D4E45717B3C51525D6D5F;0D57586C646160;0E02040E061043;0F360B0002040721282923061F653F;100A002E2224533C44;11000C182526300F34335B633E;12001A1303016246404B59;13002D032B4A5E6B6D5A;14350927111B0314082A0148413C6F3D;1520321C310316080168696A3D66;1619154754495C426E;1712070D1D2C174F5056727B3E;18041E2F554C4D4E453C51525D5F;19360B0457586C64613F60;1A0A020E06100543;1B020C0721282923061F0565;1C2E2224533C44;1D182526300F34335B633E;1E3509381A1303016246404B59;1F2D032B4A5E6B5A;2027111B14082A0148413C3D;2120321C3116080168696A3D66;22040319154754495C42;23360B0412070D1D2C174F50563F3E;240A1E2F05554C4D4E453C51525D5F;250C57586C646160;26020E06100543;27020721282923061F0565;2835092E2224533C6F44;29182526300F34335B633E;2A1A13016246404B5982;2B2D2B4A5E6B675A76;2C0427111B0314082A48413C3D;2D360B000420321C3116080168696A3F3D66;2E0A0019154754495C42;2F000C12070D1D2C174F50563E;30001E2F05554C4D4E45703C51525D5F;310057586C6461676D608E;323509020E0610054367;33020721282923061F057565;342E2224533C6E44;35182526300F34335B633E7974;3637041A13036246404B5982;37360B042D2B4A5E6B3F675A76;380A27111B14082A0148413C3D67;390C20321C3116080168696A3D66;3A0319154754495C42;3B12070D1D2C174F5056703E;",";0000302007210D341556;01000217455D;020A0025262B2F060557586C5F;030B001406056246603C8F;0436000207282916105B6364656A;0537130E191F47483E;0622300F2C0168693F44;07021E33495C40413C;08090C04184A5E423D59;093504121A1B0308014C4D4E51524B3D5A;0A02272D321C1D232A4F507E61;0B1124535455433E66;0C0A2E2007210D341505566D;0D0B0217455D;0E3625262B2F0657586C;0F00140662463C4260;10000207282916105B6364656A3F79;1100130E191F47483E;1209350C0422300F032C01686944;1335000204031E33495C40413C6D;1418310308014A5E6B3D59;15121A1B0308014C4D4E51524B3D5A;160A02272D321C1D232A4F507E61;170B1124535455433C6F6E3E66;18362E2007210D341556;190217455D;1A25262B060557586C3F5F;1B14060562463C4260;1C09020C0407282916105B6364656A;1D3504130E03191F47483E;1E22300F032C01686944;1F02031E495C40413C;200A183108014A5E6B3D59;210B121A1B08014C4D4E51524B3D5A;223602272D321C1D232A4F507E61;231124535455433C3E66;242E2007210D34150556717C3F;25021745735D;26090C0425262B2F060557586C5F;27350414060562463C4260;280207282916105B6364656A74;29130E03191F47483E;2A0A22300F2C01686944;2B0B021E33495C40413C6F67;2C36381831034A5E6B3D59;2D00121A1B08014C4D4E51524B3D5A;2E0002272D321C1D232A4F507E613F;2F00112453545543727C3C3E66;3009000C042E2007210D34150556;313500020417455D676D;3225262B2F060557586C70675F;331406056246703C426084;340A0207282916105B6364656A;350B130E191F47486E3E;363622300F032C7544;37021E33495C40413C67;38183108014A5E6B3F3D675976;39121A1B08014C4D4E51524B3D5A;3A09020C04272D321C1D232A4F507E61;3B35041124535455433C3E66;",";000A002E27202C2A475462464B;010B0002070D1E5666;02002F06150548456E5D;0300061705575868695B633C;040002130323495C645F;0507212829249060;0609341001534C4D4E415152;070212300F31031F3C61423F;080418220E032B080143403D44;090C041A1D14080833014A5E6B6C4F503D;0A0A022D1B16556A59;0B0B112526321C193C653E5A;0C2E27202C2A05475462464B6D;0D02070D1E5666;0E2F061548455D;0F000617575868695B633C85;10090002371323495C645F;11000721282903243F3E60;12000403341001534C4D4E415152;1300020C0412300F31031F3C61426D;140A18220E032B080143403D44;150B1A1D140833014A5E6B6C4F503D;16022D1B16556A59;17112526321C193C6F653E5A;182E27202C2A475462464B;1902070D1E5666;1A092F06150548455D;1B061705575868695B633C3F79;1C0204130323495C645F;1D0C040721282903243E60;1E0A03341001534C4D4E415152;1F0B0227300F311F3C6142;2018220E2B080143406E3D44;211A1D140833014A5E6B6C4F503D;22022D1B16556A59;23112526321C193C653E5A;24092E27202C2A0547546246717C4B;2502070D1E56733F66;26042F06150548455D;270C04061705575868695B633C;280A02130323495C645F;290B07212829243E60;2A341001534C4D4E415152;2B0212300F311F3C6F614267;2C3818220E032B0843403D44;2D001A1D140833014A5E6B5B4F503D78;2E0900022D1B16556A59;2F00112526321C19727C3C653F3E5A;3000042E27202C2A05475462464B;3100020C04070D1E56676D66;320A2F0615054845705D67;330B061705575868695B63703C74;34021323495C645F;3507212829243E60;36033410534C4D4E41755152;370212300F311F3C614267;380918220E2B080143403D6744;391A1D140833014A5E6B6C4F503F3D76;3A02042D1B16556A59;3B0C04112526321C193C653E5A;",";00002E20391C246869655D59;010002345354495C5A;023509002707210D062A055B6356515277;0300132B06054C4D4E453C66;04000203142F1557586473614B3F;0512161743416A3E;060C072829310319015F;07360B02032C476C3C6E60;080A04182526300F1D1E0810014F503D;09041A081F01556246403D;0A022D224A5E6B4486;0B111B0E2333483C423E;0C35092E20321C24056869655D6D59;0D02345354495C5A;0E2707210D062A5B635651523F77;0F00132B064C4D4E453C66;1000020C03142F15575864614B;11360B001203161743416A3E;120A0004072829310319015F;13000204032C476C3C6D60;14182526300F1D1E0810014F503D;151A081F01556246403D;163509022D224A5E6B44;17111B0E2333483C6F423E;182E20321C246869655D3F59;1902345354495C5A;1A0C2707210D062A055B635651527F;1B360B3713032B06054C4D4E453C66;1C0A020403142F15575864614B;1D041203161743416A3E;1E0728293119015F;1F022C476C3C60;203509182526300F1D1E08104F503D;211A081F01556246403D;22022D224A5E6B3F447891;23111B0E2333483C423E;240C2E20321C24056869717C655D59;25360B021C5354495C6E5A;260A042707210D062A055B6356515280;270413032B06054C4D4E453C66;2802142F15575864614B;2912161743416A3E;2A35090728293119015F;2B022C476C3C6F6760;2C38182526300F1D1E08104F503F3D;2D001A081F01556246403D;2E0002092D224A5E6B4476;2F360B00111B0E233348727C3C423E;300A00042E20321C24056869655D59;31000204345354495C676D5A;322707210D062A055B6356705152677774;33132B06054C4D4E45703C66;34350902142F15575864614B;3512161743416A3E;36072829310319753F5F;37022C476C3C6760;380C182526300F1D1E0810014F503D67;39360B1A081F01556246403D;3A0A02042D224A5E6B44;3B04111B0E2333483C423E;",";00090038041A221B194C4D4E44;0135000C042D321C2C335B6361655D77;02002E11130E1E06054754433C59;03001220070D0605565A;0400272F2A454142;050B252631032357583E66;06360A0324150162463C;07072128291D34174F50644B;080208015348553F3D5F;0902300F2B080168693D60;0A09041410495C403C6F;0B35090418161F4A5E6B6C5152403E;0C1A221B19054C4D4E6D44;0D2D321C2C335B6361655D77;0E2E11130E1E064754433C6E59;0F0B351220070D0306565A;10360A0027032F2A454142;1100252631032357583E66;12000324150162463C3F;1300072128291D34174F50644B6D;1409020408015348553D5F;1535020C04300F2B080168693D60;161410495C403C;1718161F4A5E6B6C51526A3E;181A221B194C4D4E4481;190B0A2E11130E031E06054754433C59;1A360A2E11130E031E06054754433C59;1B1220070D030605565A;1C27032F2A454173423F;1D252631032357583E66;1E090424150162463C;1F350C04072128291D34174F50644B;200208015348553D5F;2102300F2B080168693D60;221410495C403C92;230B18161F4A5E6B6C51526A3E7893;24360A1A221B19054C4D4E44;252D321C2C335B6361655D7F;26372E11130E031E06054754433C3F59;271220070D030605565A;280904272F2A454142;29350C042526312357583E66;2A2415016246703C;2B072128291D34174F50644B67;2C02085348556E3D5F;2D090002300F2B080168693D60;2E360A001410495C403C;2F0018161F4A5E6B6C51526A3E;30001A221B19054C4D4E717D3F4481;31002D321C2C335B6361655D676D8074;3209042E11130E1E06054754433C6F6759;33350C042720070D0605565A;34272F2A454142;35252631235758703E6687;36241562463C;370B072128291D34174F50644B67;38360A023A015348553D675F;3902300F2B08016869753D60;3A1410495C403C3F;3B18161F4A5E6B6C727D51526A3E76;",";0000380C041A23104A5E6B5B63;010004122D1B13241F838A;020A002E11252622321C3406053C5D44;030B00200306330553544641;040007210D312B5659;050E031448453E5A;060E1D162F2A01575868694F503C6A;0719495C556466;0809020728292C081501515242653D;09021E081701474C4D4E3F3D;0A0C04300F3C6F614B5F;0B041843403E60;0C0A1A2310054A5E6B5B636D;0D0B122D1B1303241F838A94;0E2E11252622321C34063C5D44;0F002003063353546C624641;100007210D31032B5659;11000E031448453E5A;120900271D162F2A01575868694F503C6A;130019495C55643F6D66;14020C040728292C081501515242653D;1502041E081701474C4D4E3D;160A300F3C614B5F;170B1843403E60;181A23104A456B5B6378;19122D1B1303241F9583;1A2E11252622321C033406053C5D44;1B200306330553546C6246416E;1C0907210D31032B567359;1D0E1448453F3E5A;1E0C04271D163B2A01575868694F503C6A;1F0419495C556466;200A020728292C081501515242653D;210B021E081701474C4D4E3D;22300F3C614B5F;231843403E60;241A2310054A5E425B63;25122D1B1303241F;26092E11252622321C033406053C5D44;272006330553546C6246413F;280C0407210D312B5659;29040E1448453E5A;2A0A271D162F2A01575868694F50703C6A89;2B0B19495C55646766;2C020728292C0815515242653D;2D00021E081701474C4D4E3D;2E00300F3C614B5F;2F001843403E60;3009001A2310054A5E6B5B63717D7988;310037122D1B13241F3F676D;320C042E11252622321C3406053C6F5D6744;33042006330553546C624641;340A07210D312B5659;350B0E03144845703E5A;36271D162F2A575868694F503C6A;3719495C55646766;38020728292C081501515242653D67;39021E081701474C4D4E756E3D;3A09300F3C614B5F;3B184340727D3F3E60;",";000A003837041A1316624640425D6A5F;01360B00042D194A5E6B4B60;020009111B032C06100548413C;030020321C310310061F056869;0400224754495C7344;05070D1D334F505651523F3E;063509232F01554C4D4E453C59;070C24575864615A;0802270E34082A01433D;09020721282908016E653D66;0A0A042B15536C3C6F;0B360B0412182526300F14175B633E;0C1A13031605624640425D6A6D5F;0D2D03194A5E6B4B60;0E2E111B33061048413C;0F0020321C31031E061F68693F;1035090022034754495C44;11000C070D1D334F505651523E;1200232F01554C4D4E453C59;130024575864616D5A;140A0204270E0F082A01433D;15360B0204072128290801653D66;162B15536C3C;17121825260D0F14175B633E;181A1316624640425D6A5F82;192D03194A5E6B4B3F60;1A35092E111B032C061048413C;1B0C20321C31031E061F056869;1C224754495C44;1D07121D334F505651523E;1E0A04232F01554C4D4E453C59;1F360B0424575864615A;2002270E34082A01433D;2102072128290801653D66;222B15536C3C;2312182526300F14175B633F3E;2435091A13031605624640425D6A5F;250C2D03194A5E6B4B60;262E111B2C06100548413C;2720321C311E061F056869;280A04224746495C44;29360B04070D1D334F505651523E;2A232F01554C4D4E45703C59;2B2457586461675A96;2C02270E34082A433D;2D0002072128290801653F3D66;2E3509002B15536C3C;2F000C12182526300F14175B633E;30001A1316624640717D425D6A5F82;31002D194A5E6B4B676D6076;320A042E111B2C06100548413C6F67;33360B0420321C311E061F0568696E;3422034754495C44;35070D1D334F50567051523E;36232F554C4D4E453C59;3724575864613F675A;38350902270E34082A01433D67;39020C07212829080175653D66;3A2B15536C3C;3B12182526300F14175B63727D3E7974;"]);let T=I;const P=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(P,"NAMES",["朔月","既朔月","蛾眉新月","蛾眉新月","蛾眉月","夕月","上弦月","上弦月","九夜月","宵月","宵月","宵月","渐盈凸月","小望月","望月","既望月","立待月","居待月","寝待月","更待月","渐亏凸月","下弦月","下弦月","有明月","有明月","蛾眉残月","蛾眉残月","残月","晓月","晦月"]);let N=P;const R=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(R,"NAMES",["上元","中元","下元"]);let L=R;const G=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(G,"NAMES",["海中金","炉中火","大林木","路旁土","剑锋金","山头火","涧下水","城头土","白蜡金","杨柳木","泉中水","屋上土","霹雳火","松柏木","长流水","沙中金","山下火","平地木","壁上土","金箔金","覆灯火","天河水","大驿土","钗钏金","桑柘木","大溪水","沙中土","天上火","石榴木","大海水"]);let O=G;const Y=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}static _getTaboos(e,i,r,n){const s=[],a=e[i].split(";",-1)[r].split(",",-1)[n];for(let e=0,i=a.length;e<i;e+=2)s.push(t.fromIndex(parseInt(a.substring(e,e+2),16)));return s}static getDayRecommends(e,i){return t._getTaboos(t.dayTaboo,e.getEarthBranch().getIndex(),i.getIndex(),0)}static getDayAvoids(e,i){return t._getTaboos(t.dayTaboo,e.getEarthBranch().getIndex(),i.getIndex(),1)}static getHourRecommends(e,i){return t._getTaboos(t.hourTaboo,i.getEarthBranch().getIndex(),e.getIndex(),0)}static getHourAvoids(e,i){return t._getTaboos(t.hourTaboo,i.getEarthBranch().getIndex(),e.getIndex(),1)}};n(Y,"NAMES",["祭祀","祈福","求嗣","开光","塑绘","齐醮","斋醮","沐浴","酬神","造庙","祀灶","焚香","谢土","出火","雕刻","嫁娶","订婚","纳采","问名","纳婿","归宁","安床","合帐","冠笄","订盟","进人口","裁衣","挽面","开容","修坟","启钻","破土","安葬","立碑","成服","除服","开生坟","合寿木","入殓","移柩","普渡","入宅","安香","安门","修造","起基","动土","上梁","竖柱","开井开池","作陂放水","拆卸","破屋","坏垣","补垣","伐木做梁","作灶","解除","开柱眼","穿屏扇架","盖屋合脊","开厕","造仓","塞穴","平治道涂","造桥","作厕","筑堤","开池","伐木","开渠","掘井","扫舍","放水","造屋","合脊","造畜稠","修门","定磉","作梁","修饰垣墙","架马","开市","挂匾","纳财","求财","开仓","买车","置产","雇庸","出货财","安机械","造车器","经络","酝酿","作染","鼓铸","造船","割蜜","栽种","取渔","结网","牧养","安碓磑","习艺","入学","理发","探病","见贵","乘船","渡水","针灸","出行","移徙","分居","剃头","整手足甲","纳畜","捕捉","畋猎","教牛马","会亲友","赴任","求医","治病","词讼","起基动土","破屋坏垣","盖屋","造仓库","立券交易","交易","立券","安机","会友","求医疗病","诸事不宜","馀事勿取","行丧","断蚁","归岫"]),n(Y,"dayTaboo",["8319000776262322200C1E1D,06292C2E1F;0F11185C0001092A0D7014692983847B7C2C2E302F802D2B,06454F208A;111852838470795B302F404533802D152B39201E23221D212726,0F2E1F010D29;004023222089,0F29111847;11180001032A0D70795B2C2E302F802D4E152B33714161201F26,52095847;0F17000102061979454F3A15477677,241F8A20;34357C89,7129;1551000403706A454F3A3D771F262322271E1D21,382B415220;0F000102037039297175261F1D21,454F2E156341;00076A54196348767765,7920297115528A0D382B;11180001020439332C2E302F2B5844477515634C1F2721,0F520D19267A29717020;297170192C2E2D2F2B3E363F4C,0F5215632001034720;4C78,297172380D2A2E0F474841;18115C0001702A2C2E2F5283847129795B6375802D154C,1F208A24;1811795B032C2E302F802D4163754C27261E1D2120,010D0F29521F;00401D232289,71290F4720;0F170001020E032A70692C2E302F802D2B0D7129474C201F2322,5211183809615D;0F1811000102062A0D2C2D804B2B672E2F7129,70471F8A20;0007343589,0F71296B7080;175447440D15838477656A49,2B2E1F8A2022;11187129705B79000106032A0D397B6F7C802D2C2B61756627261E0C1D21,0F2E154147;0007385476771548,52061F20;0106111839513A2C2E2D2F8C804B4723221F63,71522920;1118000717161A2C2E3371292B56433D6375363F,0F010347208A;161A7889,292E1F0F3861;11180F00012A0D70795D7B7C39332D2C2E4E4863664C,064F478A20;5452838479195D00012A0D7B7C2C2E3348156366242526201E,0F7129;00262789,292C2E1F2B2F;040318111A17332C15290D200C7A,47450638;0004031A170F11332C2E302F1571292A657677451949,70201D52;007B343589,88;00010670175B71292A152322271E,03637C2B38;04067033392C7161262322271E1D210C,;000715547776,521F;181100012C2E2F1F,0F38;70076A363F,2920;7889,292E1F;0F707B7C00012F75,5220;528403395B2F1E20,0F01;4089,88;02060418110D332C2E415B637566262322271F20,520F;0F181100012C2E7129,5220;7C343589,88;0001020603691817452C2E2D498344,412B6A096338;393589,88;076A48,45752F29384C0F204F612B;000301394F2E154763751F27,0F707A802629710D1920;4F2C2E2B383F443D433663,0F01478A2015;201E27262322,89;0F000102700D335283845329711563,38048A7D4520;6A0339332C20528384531563,29713801000F0C47806B;005089,88;291503000D332E53261F2075,0F5238584F45;003989,88;3435000789,88;150001021745512E443D65262322,2B63387C;394889,88;00036A7415384878,45751F20240F522E834F;00010203332C2E2F1558631F,0F1920707A29712646;0717363F1A2C4F3A67433D8B,71290F010347;","0007010618111A332D302F15262322271E530270164C,560F7129;003989,88;073918111A17332C2E71292322271F1E20481D45548384,38002F70;700F181126151E20001A7919,;5040262789,0F712903;7911192C2E302F00030401060F1571292A75,707C2052;0079701811072C2E01060F33152627200C7A1A302F4576631F2B,80523829;39343589,88;040370181123220F1326271E2021,2915;262322271E202189,1F45;0001060403232226380F767754,56802015;0070071A010618110F5B52846775,632620;00010607155B5C26271E2021165D83,38470F29;3948007889,;528384530339454F0D297115332E2F637520,0F007058;5283845444360F11756415,2C2F29016B472E2B2038;0039504089,;0F0001022E792D3E75663D19,472063703852292B;0F000102032971152C2E19,4720637038522B;343589,88;0F52838403700D332C29712E1F27201E2322,15450175;00261F23221E201D2189,;003989,88;52838454754C2971150301022E,0F63206A0938268A41;151A83842627202322,580F7003632E1F297C;00394C786F89,0F2E4420;0704031118528384542D2E4E49201F1E1D2127,292B000C;0F706A151E201D528384544466,47010C2E292F2C38;394089,71294709636F7C44;0F0003450D3329712C2E2F1575,528A63705A20587D7C;0F111829711500010370390D332E750C201F,4552832F382B80;0034353989,522E1F;0F1118032A0D545283841A802D2C2E2B71296366774744201F26232221,010900150C;0006261F1E201D212322,0F29381118;0006547677,0F5229151F20;111800010206071979697C67474475664C,0F16298A20;000102071283542627201D210C4C78,29580F2E6352032E1F;00784C793989,0F29702E1F208A;0F03390D332C1929711563261D2E2322,382000521118750C706B;702D155483840F63262720,53292F017D4F38442B2E1F47;4089,030F565A61206B;0F181179005B712980152D4E2A0D533358,5270208A;0776776A742623221F200C211D1E,11180F2F5206802B;00343589,060F52;07565A5283845463756677261F20,010F152961;0007363F8B3989,09292C208A0F;0F11181200171A7919547638,5215201D;181179000607040D03302F5283844F3A45512B1533664C47,090F702E208A;838454151A4C200C1E23221D212726,030F522E1F;0039787989,1F2E20;111871545283842979397B7C69152B2A0D33485324251F1D1E26,6B00702F800C20;0F18110001027939706954528384685D15565A75201E1D26,29032E;00170F79191A6540,712909387C20;00676589,0F20;0F00071A706A717677492923221E202726,80522E1F;343589,0F5220;111800020D041A796933483E5347446563751F1D212026,010F09150C;262322271E201D21,52450F4F;0038262389,5215;040307177938494C,0F262070;","0F00030102705283842E544779,2920454F754C38;00010275261E0C2322,6303706F0F292E1F;033945302F838475262720,297071000F2E1F38;000102030F7039453319152E2D2F63751F0C1E20,71290D3847;7917155B0001025D,0F522E3820;38394089,0001202B;0F00175058,5D6B80382E;110F0001702C2E7129201F,5206;0007396A48343589,0F20;111800012A0D2C705271292E201F,15386179;3F656477,0F2B712920;11000170792C2E7129,0F52201F;110F00017052792E1F1E,71290D2B20;0001020626232227201E,0F2E03801F;1179302F842627201E,0071292E1F;0001067052842E71291F20,030F384775;79026A17657603,522E201F;004089,0F014720;010206110F452C2E7129095B5226232227201F0C,58804B036B2B38;69687011180F791966762627201E,0352292E80;00077B7C4834353989,295220;00170F332C2E2D2F802952443F26232227201F,15637C38;006526232227201F,89;0403010218111A17332C2E2D2B15713E6575,4538206429;0007030401021811171A0F2E2322271F1E706749528483,202F2938;000102081A158483262322270C1E,700F292E;1A162623227954,0001710F29;00061A161718110F292A0C26271F21797001022F49,47;1516291211020056,063820;3840,0001202B89;0403080618111A16332E2F152A09537919702C5445490D75072B,80632038;0001081811171A160F1571292A26271E20396476452B0D,632E5238;7B34,88;010206040318110F2E292A27200C70072C302F541F392B49,3815;64262322271F2021,0F2F2938;0002070818111A16175B153E445D5452848365647576,2038454F;000701020618111A1752848354230C7027,26203829;000102261E2027,03476F700F2971382E;15391A302F83845475662627201E,0F702E46290047;0F150370002E0D3979528384532971331F1E20,477D;0F0302791566046F,29710D722A38528384202E45;383940,6370018A75202B454F66;3907,88;0F000170390D332E2971152F63751F1E20,52846A38;00397C343548,89;000102030D70332C2E29712F534426201F1E,0F3815;6526232227201F,88;7100030170391959152E2D2F2B,0F201F4F75668A38;0F030102392E15634447001F1E,293845200D7075;00161A5D454F153826201E27,7D0D29;1A454F548384,88;0F00010203700D332E2F1929711552838453261F201E2322,;0F171170792F5B1566770001032C2B802D,29387C2071;50400089,88;5C11180001027170520D2984832B15200C,03802E3863;2E260F27201F,523815292F1A;7B7C343589,520F;00060724232227261F2025,520F157929382F;003F651F0C2027232289,0F29;00076A386563,0F7D8A2066454F52754C;","00077663,0F29713820;000304080618110F1A2E2D0D3371292A2C302F7566010239454E802B,6320;181117332C2E1526232227201F1E3E,38030F5229;0103040818111A155284262322271E20217A79708330,38472E63;00483F,6338200F;03041A174533302F56795B3E808339528454,700F2920;17262322274050,80387C6B;000F01111A1615292A2627200C2C670279538384543E49,6345;00010618111A16332C2E2F2D27200C07483A450D,15528438;34357B7C,88;002E2F18110F5B3315292A26271F20210C7A70710102393E19,035A;000304111A33152D2E302F71292A5284530770022B,0F634520;1A16170F13152654,3852204F;0018112C2E01040607332D292A09270C2322696870302F47023945,38205280;18111A16175B3315262322271F1E201D215D838454433E363F754551,00030F29;00700F1715262720,472E3863;3F88,2B38200F;030402111A16175B4F3A2B153E0079015D54528483696A51,7006200F;000F1320,63803829;0079181A165B332F2B262322271E2021030469702D4E49712930845D,454F;00030401061A16170F332E71292627200C02696A45514F0D2C2D4E497A,2B;007C343589,88;0F00701784831952712C2E1526271F,03380620;52848353000103297115332E2F19,0F8A514F6A66207545;6A170F19,5845754C201F4F3824;0F000301020D297115332E1F0C,16522026;1545332C2E2F84836375662620,0F0003700D71292B;000102060F17705283797823221E2027,2E7129;3F74397677658988,0F384720;5452848303152F802C2D,2E1F208A7A700F29710C7D;00010F17505840,565A803852838463;0F00030102700D19297115332C2B535448,2E45208A;0F03000102700D29713963451F0C20,528338542F158061;34357B7C89,030F;118384155B20272E1F21,0F0338;0001020607036A5D397C2163664744,0F4E25208A;5483846376656419786A,29803020;0F18110001702C2E71291F0D2B152F2127,52831620;1784832C2E5B26201F,0F010D29;00797084831754,0F2E472D4E1F;000739483F66,0F208A2B;54528384036F796A153E65,712963;0F17795B54838458,52807C38;0F5C111800015B712952841F20,756A25;01067071292C2E1F20,1103150F52;343589,0F715229;0F170070792C2E261F,0403412322;03027011170D332D2C2E2F716152838454,010F201F;6A170F1963766F,5452201F;030102703945802D2C512B7129092322270C7566,112E5283;1A5D453A332C2E2F4B25262322271F201E1D21,000F7047;007984831A160F1719,632E20471D6B;483F89,88;040318111A16175B795452848315302F6563395D,38702920;000F1323222627,2E38290315;010203040618110F3315292A271D200C6339171A712C2E30491E21,7A;0039262322271E201D210C0748766465776A,150F3829;3435,88;007018111A1617192E15382627201F656477,4F09;00030418111617332E2D2F292A52845407020D302B,090F4520;","528384530003010215392C20,1112180F29560D2E1F7545;004D64547589,0F29;2A0D11180F52848353037039156358332C2E,38200026;00702C2E164C157126271F1E202425363F,29386A032B;005089,032C2E1F;0F00010206030D7129302F79802D7C2B5C4744,11701D20528438;000403110F527079156523221E2027,0129802E1F6B;00384089,15296763;000102060775261F20,71290F7015;1100010206702D804E2B2620,0F52540D;0007397B7C343589,01065220;0776776564,000F293820;00010206111803302F565A802D4E2B881F261E0C,0D0F52;00763989,0F20;110F70528475660D7129,012E1F2026;0001020617385483,030F47202B6B;0039787089,2E1F8A034F206B;0706397B7C794C636A48,520F71294720;02703918110F7919155283756626232227201E,012C2E1F0C;00384089,0F202E157C;5C0001020652835B0E03804B2D4E2B752024210C,292E565A;000103020611187B7C2D4E616439201E0C26,522E4744;000734357B7C3989,0F52832920;88,;0004031811171A5B332C2E155D52,0D292045;0089,090F15;18110F197983842E230C271F1E7A70525463,26202915;00011A1615262322271F1E200C214C,472B0F11;00190F153917701A48,472E1F2003;11037B7C2E2F7129,0F5220;007952151E20,0F2E1F;00384740,0F20;0006522E261F20,0F7129;0F11000170717B,522E1F;007B7C3989,88;076564,0F2920;,88;393589,88;0F03700D33195284835329711563,01260038206B;0F70161715232238838426271F20,7D0352;70504C7889,88;0001030239450D297115332C2E4C,0F54207052843863;110F03706A795215636626271E,0C012F38062C292B;0040395089,88;000103392E54837548,19700F58157A2038;00010203390D3329152C2B751E20,2E1F544753524583;0039343589,88;3F4889,88;000102033911170D3319152E2F0947442627201F,;393489,88;0F0102037039330D5284832971152E1F0C,0026206B;001A1715838444363F261F1E200C2322,0F476B520363;0070784889,0345201F;000102031118396375664819,1D413870208029;0370833F0F6A5215,010D582E1F202C2F5829;00387765504089,0F157C;070039201F0C2789,06030F292F;003926271E20747677642322480C06,2E1F;00073934357B7C89,0F52;073F7765644889,0120;","0F110001702E2F71291F20,06;110001527B7C2E75,0F20;0F11707129,2E1F20;1811002E1F8384,0F20;0F1A0070153871291F20,7A76;3F6589,88;0F1811700001062E2F1F20,7129;18117915384C,5220;07404826271F1E2089,88;0F00010203700D332E2F192971152B52838453631F20,;00037039041A26271F1E202322,0F2F2C335129452E0D3A;0039343589,88;0F0001020370332E2F0D19297115637566302B2C3979,;528384000103451915332C2E631F2720,29716A0D0F70;653989,88;0F00010203528384157033,752971206B452F2B262E;0F000102700D332C2E297115383F631F20,034756;394889,88;528384530370331929272E2B2F631F1D20,0F156B38;1979,3F2F2E45207D;074048261F202322,0F71454F15000180;0F000102030D70332E3919528384532971152B2F201F0C,;0001020339161745514F2C190F1A152E2D2F304979,;3435073989,88;11180F5C000102030D332C2E195329711563261F202322,5284;5283840001032E1570637566302F391F,0F47297120;39701117302F713819297566,004551152C2E201D1F;0001020370528384631575712D2E4E3E581F1E1D,292C2B45262080;0F83843D363F776424,15462F2C5203297115;3F8B657789,0F2029702E7D;11180F0001020339700D29716375662E1F2620,38155680;03111A171538193E3F,0F632C2E70454F200C;110F1A6A702C2E1952838453712F6375,4520150001;5283845300010670802D2C2E4E155B201F1E232221,380F71296A;0F1118000102030D70332E2C192971153953631F0C262720,52846125;000739343589,0320;18110F3900010203700D3329711563752E1F0C201D,38525D;000102031811392E2D19528384543E4463751F20,152F1A290F;00657689,6B0F52;0001020311180F702E1F7952838468332D6749443E46630C1E1D21,292B20;0F1700707129385C363F3D1F1E232226,80412B202F;00398B7989,0F20;0F111800017C5C2C2E7129,5270153820;0F1118795B65170002195D,52382E8A20;0007711F204840,010F291538;000106025B75712904032D302F382B2A0D801E20,2E1F0F0F;0F1118060300017B7C792E39767566261F20,71298051;000739343589,8A20;074889,06520F38;5283845B79037B7C802D2C2E4E302F2B38493D4463664C1F2021,0F0D7129;63767789,522E0006206B;0F00010206181139702E1F686F6A792D2C304E153375664923221D21,52296B0D80;89,;3F8B6589,1F20;0370110F45510D3371290941614C522623222720,;1966583F6589,88;03700F,79192C2E2D715275262322271F201D2179;0F11700001522E71291F20,2B;0F117B7C2C2E71291F20,5203;00343589,88;","00343589,7129565A;00060403702C2E4C154947443D651F,0D29;528384530339332E152C2F58631F20,380D000F29;006589,29704720;0F1118175C000301027039450D29332C2E2F15631F,8A5820;0F161A17452F0D33712C2E2B5443633F,150170208A03;70786289,06802E1F;0F0001020370390D332C1929712E157563548384534C,20248A;5B000102073911522C302F3A678C363F33490D482425200C1E2322,0F15382E1F61;00076A74504089,5229702C7D;0F110001708471292E1F20,0338805156;111817000106702C2E71292A0D33802D302F4E2B44,0F522520;0007343589,290F71;0F5B8370000102060403161A494447,386A418A20;11177B7C52842C2E5B1F20,060071292F0F;003889,52201F1D47;000102062A397129797B7C2E1F2425,162F5D2026;0F172C2E387129363F7566512D4E4461,0103475220;008354,06462F2E1F;0F181117795B5C007054292A0D690403332D2C2E66632B3D,8A454F38;030270170F45513A2C71295283842A0D532D24252623222720,155A382E1F;00076A0F3874485040,06707C25;5B71297000010611182A0D39792C2E332D4E80151F202621,52454F38;00077665776489,52830F208A;34357B7C7789,0F29;0F705B0004037C5D15653F1F26,522B4738;181179190E332C2E2D52637566262322271F20,;0076645089,88;0F1100017B7C702E7129,522B;1A38712975,0F20;0026271E20,2F2E1F;18117001061579,712920;0F11707B7C5271291E20,2E1F;0F00074850,8A20;0F1811705200012E71291F20,38;18117000012C2E7129,5220;88,;0F18110001261F20,0352;037B7C2E2F261F20,0F;006389,88;0F030001027039452971150D332C2F6327,20528384;020F11161A17454F2C2E2D302F2B38434C,20700163;003989,88;0F00010D0302703352838453297115632E,208A454F;03027039450D332C2F2D2971528384636626202322,5815;006A5040077448,702B2C0F2F29;0F00030102700D332E2C192971155383846375261F1E20,;0001020370450D332C2E2D152971,0F52838A201D;343589,88;52838454443D65002C2E15495D1F,0F417D712B3863;528384546315332C2E2F26201F2322,0F0D45002971756B;003889,88;393589,88;2C2E2D2B156343364C,0F4729710D708A20036A19;00788B89,0671292E;11180F000152548471702C2E2D4E303348492A156144474C63,8A201F384506;0F0300017039712952542D2C302F80380D2A363F3349483E616320,1118150C1F2E;0F006A385040740717,1F7063;0F1118000102030D70332C2E192971158384535426201E2322,471F;77766564000789,0F52201E8A;","110001392E1F20,0F7129;00343589,88;0F1152702E2F71291F20,0001;0F1152702E2F71291F20,7A;00385476,521F;0F528400012E7129,0920;363F6526232227201E89,88;0F11700001397129,2E20;0F0001067C1F20,5229;0F705215261E20,012E1F;0F001A651707,565A58202E1F4763;297115030102195283840D332C2E,0F1F5863201D8A;0039077426271F1E20,0F29713852832B63;343589,88;0F03706A4F0D332C528384532E29711563,45007500;0F0370010239332E2C19528384532971156375262720,;003854637519,205D1D1F52151E21;0001020352666A,0F7020262938172F;00261F2322271E200C89,;007083624C,0F38202E7D4F45471F71;0F000102030D332C2E195283845329716375261E2322,;0F033915666A52261E272048,382E2F6329712C01;003989,88;00010203450D3329152C2E2F5375,0F638A6A1D8A38;39006A26201F,0F520D38580629712B;343589,88;528384542E03700F111869565A7566631F1E2021,297138000C;0F1118000102030D70332C2E195283845329711563261F0C20,47457525;00173883546365756619,466115201F701D475224;0F18000102111A1703154F2C2E382D2F807566,7163708A1F207D;5D0007363F232227261E21,037C0F471F20;0F00701A17830E544C5C78,7129632E1F38208A452F;2C2E5B000739337C38802D44484C2425201F1E272621,52297015;0F11185C0370332D152322528384636626271E,2F292C2E1F000106;000F7765,2E1F7C46;111879690001020370396A2E2D528384543E637566,0F380D580F2920;00013974150726271F1E200C,0F06520D297170382B45;34353989,0F20;0F528471295B795D2B155333565A446375661F201E272621,00016B0C41;0F181100010603797B7C802D302F2B6743441F202322,2952477D25;11180F71297000010604032A0D793969302F33802D636675,201F52565A1E;11180F000704030D7C684580302F153867534775,702041;00262322271F1E203F8B65,52290F0380;002C7080305C784C62,2E1F4720;000704036939487C4466,0F70112938;54528384700001020339482D301571565A363F637566,06292B201F8A;005040,522E1F0F2C20;18110001032A0D845B7129302F791533536678,0F208A1F1D;076A7626271F1E20,0D0F29382F2E;7B7C343589,0F70;11180F71297052838454792A0D33802D153853201F1E212627,012F564766;0001067011185B0D332C2E2D712909262322271F200C,0F526325;00195475667689,5229152E20;0004037B7C0F79494766754667,80293869208A;003F657789,7152290F032B;525400045B17791A565D754C7866,2E1F207C;71297C790001062A0F802D,5215705D;0470170F191A134C8384662426232227201E,;00170F7665776489,;074889,88;","0F0001020D700339332C192A83842971152E1F0C20262322,0652563861;1F2027260076232289,0F295283;34357C89,0111180F2920;0F030001022A0D3945297115528384637020,476A382E1F44;5B11180001020328700D332C2E195283847115632F751F2720,290F4766;0F0001021A175D2C19152E302F7183846379,8A20704F754541;0F11180300706A2E1549466319,292F26806B382B207545;00704F0D332C2E2D15363F261F20274C,0F2906036F47;0F11180001027039302971542F7526201E,63472E151F58;390001022C2E302F1575804B2D261F20,0D0F0319707D5229717A;076A79040363660F5D363F,52292E1F20382F155601;006A38075040,0F630141202B454F;0F1118000106287129705B032C2E302F802D4E2B201F,5284583841;002876396577261F20,5283290F;07343589,0652;181100012A0D52842953411E20,2E1F0F4715;0F0001062871292E7C528384032C5C2A15767765,11185D8A206B;0F181138171A7975665B52845415,47701F8A20;0F181100062839707952542C2E302F03565A7566441F1E,0D29802B20;0F280001363F8B4326232220,2E1F47032F7D;0F17000728705448757A,522E1F15562F;00076A74173926271F1E20,0F7029522B;04170F79195D1A637566363F76,01522E8A20;700718111A302F717566,0F2B2E20;11180F000128032A0D7129302C2E2F2D802B09411F1E20,52845438;0076777566262322271F201E,0F11185229;34357C89,8A20;010670170F0E3A294152838454262322271F201E,2E181544;01023918112E2D493E52756624262322271F20,;04033918110F0D2C2E7129332D2B72528384547566,;017018110F1A2E15495247838463462322271F,;0F000106387129,2E1F;0F707500261E20,382E1F;181100012C2E2F1F20,0F52;181170792C2F7129,5220;07504089,0F01;0F0001062E7129,5220;7665261F20,0F29;077C343589,88;0F18117052000171291E20,2E1F;0F181100017B7C2E71291F20,036F;181100015B3875,2E20;0F000102702E15471F1E,294F2B452C2F2680;0F000102700D332C712E15261F201E,80036A614738;0001020370392F80712B546675201E26,1F58472E15;0039076A7426271F2048,0F79197029717A38;04031975363F6366,0F5401202C5283842E2F;3807504089,88;00020370454F0D3933192C2E2D156375261F202322,0F71;003F261F202789,88;343589,88;002627651E20232289,88;0F0D33000103452E528384297115752620,63386F70;0003391983845475,2E1F0F6A702971722A0D;0F00010203703915632719792322,8026204529715875;002E4344793F26271F20,03702C2F292B381A;001A2B5448701938754C,152E202425;0039332C2E2D2F152B4644261F1E,0F7019382971637A;11180370392A0D3329712C2F156375795B5D,450C8A00382E1F2001;5040000738,0F7D7C584F012063452B;","000150402627,0F292F2B;0079110F0304062A528423222627207A19701A2C2E2F5D83,2945;001779332D2322271E2007760304,38290F;0007343589,71297063;0004037039180F332D152952262322271F0C533A83,41178047;0079192E2F030417332D1552847A5D,4E20;001A170F1379232227761926,712938;88,26205283;001A170F5B332E2D7129261E203E5D,15035283;007022230726,2E17712952302F;00077A7089,88;88,;07262723221F40,0F712952;0F000102070D70332C2E19528384297115637526201E2322,;03392D2E332F211D201F1E27,0F7015380029710D1958;343589,88;0F0102700D332C2E2F0319528384531529716345261F2322,;5283845300031929150D332C2E63,0F217045208A7175;006A79190F6F2627,6B4620453829;00211D1E232289,;0F7045332C2E71201F1D21,47011552295303;00704889,88;0F00040370396A742E15444948,458A384F20;5283845303702971150D2F,388A6A6D0F20;0007504089,88;0F00010203700D332C2E1929711552838453637526202322,;393589,88;007C343589,88;0F11180003706A4F0D332C2E192971155363751F20262322,5247464161;528384545363000103332E15,0F1F197029710D757D20;0F006A1938271779,565A4575522F801F1E63;001D23221E2789,52290F2E1F20;0F175B3975660745514F2B4825201E211D,010352292E;007007482089,2E1F5847;0F110039702C2E522F1574487B7C2D4E804B,098A20453861;111852838453546319297115030D332B2C,060F8A2E38201F;0007504089,0F291570;030102062C2E543E3D636679,380D1946297100;0339332C2E302B66201D1F27,0D2971010015520F6B;34357B7C89,7129;0F111800010203700D332C2E192971152F4B49471F270C2322,52562B20;0F111800010203391929710D1552838453,2075708A45630941;00177689,0F52804F25;00396577647969271E2322,52012E1F262061;1707702C2E71291F20,0F52000106111D;0070,0F292C2E791F;0F18110001702C2E7129,6F454F098A20;705283845B0D2F71,0F202E41;0007504089,060F71702F29;0F5C5B0001032A0D7052842C2E71291F20,1118517D46;07762623221F1E20,000F1552296B2F;89,6B;181100012A0D2C2E2F2B2D304E447129841F,0F0941613820;03020E0F18110D332C2E2D2F4971293E615244756653,8A2025;000F76,032E1F522C292B;0028397976771E232227,0F522E474420;7039170F45513A2C2E7129242526271F201D,0001035215;0001027007834878,2E388A201D;703911170E2C2E2D2F4B15712952633D,092B8A20;03047039171A533852443D363F,;","111879076A1A171523221E272024,5229700F1D012E292B0C2F;390050404C89,0F5283296920;261F1E20232289,52290058363F;0F0001020370332C2E2F1575261F,2971476A45835238;0007343589,0F292F7020;00021719792B155D5466774962,010611180F2920;0F1118528384530001035C702971152B332C2E63201F1E23222621,6B75452D4F80;00177179546A76,0F52443D1F;0001020603700F7B7C2E1F692D48302F565A586366240C21,2B151A2920;0F1A1716007015713F261F2720,5263587D2B4703;005C702C2F802B154C78,5A562E1F208A454663;00037039454F0D332971152C4C48,090F476341382E;11185283847975661271393D692D15565A201E262322,292F060D0C;004089,0F52;767789,5283002920;0F111800010206032A0D097170292D302F1575761320,521F4725;000739343589,520F;181179838454637566,0F52290120;5C0F1811790070528471291F20,2F03805125;003854767789,2E1F5220;0F18110001707B7C0D7129,52565A152B20;170007386A7448363F261F1E,030F79636F20;11180F000102587B7C5283847971302F804B2B497675,09612E1F20;705C4C39171A4F0E7971295B5248,0F2E1F1D;076A171552847983546578,712970010F;004C504089,0F521547;7665262322271F201E21,0F00298071;00010206090D5B7952838454685D7B7C443D77656366201F1E,030F47454F;343589,88;790F181113332C2E2D302F1554,70012038;00040301067018111A0F332C15292A261E200C7A7919712F5D52838454,5617454F;003826232277,632E2052;000106073018110F3329271E0C7A0D75,38262015;0F005B261F20,2E2F;384C,8A20;076A696819,0F29;036F791E20,522E1F;00654C89,;262322271F1E20,7129;0F18117000012E71291F20,527A;0039343589,;1811795B5466,0120;0F1811705200012E71291F20,062B;003F89,88;000102035270392E2D5863,0F381D2B29212015;00391A6A15384C4943363F7448,0F0379472B63;00701A17794C0F302F715475,2E454F8A2024;000102037039714515750D33,201D381F092E0F11;5283845479036A2627201E,0F380D70297115012F;4C4089,88;261F201E232289,;002627241F1E20232289,;0039343589,88;0F0211195465756679,2F384570202B6A;0F0052037029710D332C15,7545584F8A201D21;0F003854,20521D21;0F0001020370390D1952838453542971631F0C,1520;0F0001022E154826271F1E203874362322,0363;0001020370392F2971152B54754C,458A1F0F2046;000370396A450D332F4B154C,0F208A7D41381F2E;","00790F072C2E0103047018111A262322271E7A302F5448637545,29381556;6A79363F65,0F292B71;000118111A332C2E2D1571292A23222627200C7A791970302F5D5283845456,387C454F;000118111A332C2E2D1571292A2627200C7A1979,387C;00040318110F1519262322271E2021,52831F38;0039343589,88;00390103040618111A17332C2E262322271E157A7071302F45631F2075,807C;000118111A16175B154C26271E200C232279302F5D528384547543,0F297C7A;074889,88;88,;010670181126271F202165,2938;000770171989,0F2E2038;000106040318111A170F33292A26276A201D0C7A71077C1F1E74694F,52;88,;5283845354037029711575262720,631F58000F2E3801;0F0001020370390D3319297115632E2C752620212322,;0339332C2E1575201E26,0F520D631F29712A724738;343589,88;0F00030D70332C2E3952838453542971156375,6B20;00010203396A79637566201D211E,29387D71707A;00076527262322,1552835A201D0F38;3989,;1500443626271F1E,29710F47380D195203;000789,;0F0370390D332C192E2971637547202322,5815;031A2B7915656A,0F177001204529710D632E2F;0F03700D332C2E2971152F52838463,01004547380C;0F000102030D7033528384534529711520,634758;006A6F391974,0F2E614447702C292F71201F3852;34357B7C89,0F20;11180F00010E715229702E79692C2D2B15093954444C66,2F565A8061;000102033945332C6375201D21,0F1929710D70;07487677393F89,0F2952151F1D;0F17000102060370392E52838453331F,452F2C266A79292B2038;161A0F1526271F4C,5861034738;3950177089,522E1F0F20;11180F0001020370391952845329712B632E7B7C792D2C8020,385D15;00046A7966444C7765,010C202F38520F70292E;70545283842E71291A7933192A5D5A5040,090C384F45208A1D6B;0F11180006032A0D70332E011954838471152C202322,58477D63;0F111800037039450D2971332C632026,1F2E2B385283;003934357B7C89,0F20;00481F2023221E27262189,0F292C2E;18117900012C2E5B1F20,0F710D5229;000776776548,0F1118152E1F20;5254700001020612692D4E584647336375662E1F1E,71290D2620;006A583F232227261F20,0F29154703;00077089,522E1F8A20;0F5C707971292C2E0E032A0D6A804B2D8C2B3348634C,521109154620;04795B3F651A5D,0F52010620;117154528384292C2E302D4E092A0D50407970443D,56804100;18115452840001712970802D2C2E302F2B2A0D78791F,0F20475861;0F1811000104037115454F7677657B7C392023222726210C,52092E1F;34350089,0F20;0F111800171A454F514E3A3871157765443D23221E262720,80612E1F;111800010206037939695483845D2D2E4E446375661F262120,0F52290D71;767779392623222789,152B1F1D20;000102060717706A33392D2E4E674447482322271E210C,71292B4F20;0F171511793F76584C,0347200C1D;000789,88;"]),n(Y,"hourTaboo",["0F520120,6D61;0F7083520115000255,80262F;707A000855,0102;0100380806,707A2E2C;0F8352150255,70717A7D01002C0306;0F707A0120002C0855,88;,88;0F71832952202C,7A7D0102;0F70835201150255,2E2C;0F295220380255,707A01000306;0F83295201200255,70717A7D2C;0F707A0120002C0855,80262F;707A000855,0102;0F708352150255,2E01002C0806;0F522055,707A01000306;0F700120002C380855,;0F835201150255,70717A7D802C262F;0F70718329527A202C55,0102;,88;0F702952200255,7A7D01000306;0F7083527A01150255,;0F70012000380255,80262F;000855,70717A7D012C02;0F7071527A2055,2E2C;0F522055,707A01000306;0F7001200255,;0F7071297A0115202C55,80262F;0F71832952002C380806,707A0102;0F70835201150255,7A2E2C;0F200255,707A01000306;,88;0F700120002C0855,7A7D80262F;0F7083527A1555,0102;0100380806,2E2C;0F20190255,70717A7D01002C0306;0F707A0120002C0855,88;0F520120,707A6D80262F61;0F7083521555,0102;0F7071297A0115200255,2E2C;0F2952200255,707A01000306;0F835201150255,70717A7D2C;0F7001200255,80262F;,88;,7A2E7D2C;0F712915202C55,707A01000306;0F7029018020002C38,;0F835201150255,70717A7D802C262F;0F70718329527A202C55,0102;0F71832952012002,2E6D2C61;0F7029527A200255,01000806;0F71290115202C,707A55;01002C380806,707A80262F;0F8352150055,70717A7D012C02;0F715220,707A2E2C55;,88;0F7001200255,7A7D;0F835201150255,707A80262F;0F7183295220002C380806,707A010255;0F718329522002,707A2E2C55;0F2952200255,707A01000306","0F700120000255,;0F70290120000855,6D61;0F707129527A15802C381955,01000806;0F7101200019020655,707A2C;0F200855,707A2E01002C0306;0F7183520115802C0255,707A;0F700120000255,;,88;0F70297A01202C380955,;0F8352150255,707A01002C0306;0F0120000855,707A2E2C;0F7071297A01158020002C0855,;0F7083520115000255,;0F70717A01201955,6D61;0F7071295215802C3855,01000806;0F0120000206,707A2C;0F290120000855,707A2E2C;0F7083527A0115202C0255,;0100380806,2E2C;,88;0F707129527A011580202C380255,;0F7083520115000255,;0F71202C1955,707A;0F707129527A1556802C1955,;0F202C4B,707A01000306;0F71201955,707A6D61;0F70202C55,01000806;0F0120000206,707A2C;0F7101201955,707A2E2C;0F7129521556802C0255,707A01000306;01002C380806,;,88;0F7129527A0115802C380255,;0F83520115000255,707A2C;0F202C0855,707A01000306;0F7129521556802C1955,707A;0F700120002C0855,;202C,6D61;0F71295215802C3802,01000806;0F2002,707A01002C0306;0F29012002,707A2E2C;0F708329527A0115202C0255,;01002C380806,;,88;0F71295215802C380855,707A01000306;0F83520115000255,707A;0F0120000855,707A2E2C;0F707129527A1556802C1955,;0F7083520115000255,;,707A01000306;0F707129527A15802C3855,01000806;0F290120000855,707A2C;0F71201955,707A2E2C;0F7183520115802C02,707A55;0F202C0855,707A01000306;,88;0F0120002C086C,707A55;0F83520115000255,707A2C;0F2901202C3809,707A55;0F7129521556802C196C,707A0100030655","0F70297A0120000855,80262F;0F832952202C,0102;0F71832952012002,7A2E7D2C;0F712915202C55,707A01000306;0F718329520120002C380802066C,707A;707A01000855,80262F;0F7083527A1555,0102;0F7001200255,2E2C;,88;0F7071297A15202C55,01000806;0F7083527A0115000255,80262F;0F83521555,70717A7D012C02;0F70718329527A200255,2E01002C0806;0F52,0120002C080306;0F7183295201202C02,7A7D;0F708352150255,01800026082F06;0F7071297A20002C38080655,0102;0F0120000855,707A2E2C;0F708352150255,0120002C080306;0F832952202C02,01000806;,88;0F7071297A15202C55,0102;0F708352011500380255,2E2C;0F202C4B,01000806;0F71832952202C0255,707A;0F7083527A01150255,80262F;0F71832952202C,7A7D016D02;0F712915202C,01800026082F06;0F71292055,707A01000306;,707A01000806;0F7083527A0115000255,80262F;0F71832952202C,0102;,88;0F712915202C,707A01000306;0F835201150255,707A;0F70835201150255,80262F;0F70717A201955,0102;0F7001200255,2E2C;,707A01000306;0F7071297A15202C55,01000806;0F70297A012000380855,80262F;0F2920,70717A7D016D2C02;0F708352150255,2E01002C0806;,707A01000306;,88;0F7083527A01150255,2E2C;0F8352150038,707A010255;0F83520115000255,70717A7D2C;,707A01000306;0F5220,01000806;0F70297A0120000855,80262F;0F712915202C,016D000806;0F70718329527A01200038080206,2E2C;0F832952202C02,707A01000306;0F835201150255,707A;0F7083527A01150255,80262F;,88;0F7071297A011520002C55,;0F708352150255,01000806;0F8352150255,70717A7D01002C0806","0F71832952202C02,707A;0F7029527A0120000255,;0F7071527A202C55,88;0F71295215802C3802,707A01000306;55,707A01000806;0F292055,707A2E2C;0F708329527A202C0255,01000806;0F708352150255,01000806;0F202C0855,707A01000306;,88;0F8329520115200255,707A2C;0F7083527A01150255,;0F7129521556802C1955,707A;2C3808,707A01000306;70297A0120002C0855,88;29202C,6D61;0F708329527A202C0255,01000806;0F71522055,707A2E01002C0806;0F7129521556802C0855,707A01000306;0F7083520115000255,;0F71290120002C080206,88;,88;0F0120004B,707A2C;0F8352150255,707A2E01002C0306;71295201155680002C0855,707A;0F70290120002C06,;0F832952202C0255,01000806;71295215802C38,01000806;0F7071832952202C0255,01000806;0F70718329520120002C080255,;0F70718329527A202C0255,;0F7083527A01150255,;0F70717A01200008190655,88;,88;0F8329520115200255,707A2C;0F708329527A0115202C0255,;0F707129527A011556802C026C,;2C38,01000806;0F202C0855,707A01000306;0F70712952011580202C380255,;0F718329522002,707A01002C0806;0F295201200255,707A2E2C;0F707129527A011556802C026C,;0F8352150255,707A01000306;0F70297A01202C0255,88;,88;0F8352150255,707A01002C0806;0F8352150255,707A2E01002C0806;0F712952155680202C0255,707A01000306;0F7029012000080255,;0F70718329527A202C0255,88;0F707129527A0180202C0255,;,707A01000806;0F832952202C02,707A01000306;707129527A01155680002C0855,;0F70832952011520002C0255,;0F832952202C02,01000806;,88;0F8352150255,707A01002C0306;0F83520115000255,707A2E2C","0F83521555,70717A7D016D2C02;,2E2C;0F5220,707A01000306;0F0120000206,707A;0F835201150255,707A80262F;0F70717A202C381955,01000806;0F0120000206,70717A7D2C;0F7129202C1955,707A01000306;0F7083527A0115000255,;0F7083520115000255,80262F;,88;0F70717A0120003808190655,2E2C;0F8352150255,707A01000306;,2E2C;0F7083527A01150255,80262F;0F70200006,7A7D016D02;0F7071297A01152055,2E6D2C41;2C38,01000806;0F290120000855,70717A7D2C;0F70835201150255,80262F;0F702920002C,0102;0F0120004B,2E2C;,88;0F70717A0120002C3808190655,;0F7083520115000255,80262F;,0102;0F7071527A01200655,2E2C;0F702002,7A7D01000306;0F7129011520002C,6D41;0F70835215380255,01800026082F06;0F200006,70717A7D016D2C02;,2E2C;0F83521502,707A0100030655;0F7083520115000255,7A7D;,88;0F70717A20002C3808190655,016D02;0F835201150255,70717A7D2C;0F7129202C1955,707A01000306;0F520120006C,707A55;0F7083520115000255,7A7D80262F;0F712915202C,707A016D02;0F70717A20381955,2E01002C0806;0F29202C02,707A01000306;0F83295201202C02,707A;0F70835201150255,80262F;0F7083521555,7A7D016D02;,88;0F71202C38081955,707A01000306;0F83520115000255,70717A7D2C;0F70835201150255,80262F;0F70527A2055,016D02;0F0120000206,707A2E2C;0F712915202C,707A016D00034106;2C38,707A01000806;0F83520115000255,70717A7D802C262F;0F832952202C,0102;0F7083527A01150255,2E2C;0F708352150255,7A7D01000306;,88;01002C380806,80262F","0F8329520102,707A202C03;0F7183520115802C0255,707A;0F29522055,707A01000306;0F70718329527A01202C0255,88;0F707129527A15803855,202C03;0F71832952200255,707A2C03;0F71832952012002,707A2E2C;0F7129521556802C0855,707A01000306;0F700120000255,;0F70010255,202C03;0F707129520115800038,202C03;,88;0F29522055,707A2E01002C0306;0F707183527A0115802C0255,;0F70297A55,202C03;0F7071297A0255,202C03;0F718329520120002C080206,;0F29200855,707A01000306;55,707A2E01002C0806;0F7071295201155680000855,202C03;0F01004B,202C03;0F835201150255,707A;0F7129521580202C3855,707A01000306;,88;0F70297A55,202C03;0F707183520115800255,202C03;0F7183295201002C38080206,;0F29200855,707A01000306;0F70297A202C02,01000806;0F70297A01000855,202C03;0F712920,707A2E01002C080306;0F7129521556802C55,707A;0F8352150255,707A01000306;0F8352011502,707A55;0F29526C,707A202C0355;,88;0F718329522002,707A2E2C;0F71835215802C0255,707A01000306;0F70202C55,01000806;0F707A01000855,202C03;0F707129520115800038,202C03;0F290180202C380955,707A6D61;0F7029527A2055,01000806;0F707129527A1556802C0255,;0F71520106,707A202C03;0F70835201150255,202C03;0F718329520120002C080206,;,88;0F200255,707A2E01002C0806;0F70718352011580000255,202C03;0F715201066C,707A202C03;0F290180202C380955,707A;0F71295215802C3855,707A01000306;0F70717A20190255,016D00086106;0F712952,0120002C080306;0F70718329527A0255,202C03;0F7183295201002C38080206,707A;0F8352150255,707A01000306;0F70202C55,01000806;,88",",88;0F832952200255,70717A7D01002C0306;0F70835201150255,88;0F7083527A01150255,2E2C;0F70202C55,7A7D0102;0F7029527A012055,2E2C;0F2920380855,707A01000306;0F83520115000255,70717A7D2C;0F7083527A01150255,80262F;0F52202C,016D02;0F70835201150255,7A2E7D2C;0F71832952202C0255,707A01000306;,88;0F835201150255,70717A7D802C262F;0F712952202C,0102;0F70527A012055,2E2C;700855,7A7D01000306;0F7071297A011520002C55,;0F8352011500380255,707A80262F;0F7083521555,010002;0F71290120,707A2E2C;0F71832952202C02,707A0100030655;0F7083527A01150255,;0F7001200255,2E2C;,88;0F707A01200255,2E2C;0F83521502,707A0100030655;0F0120002C086C,707A55;0F7083527A01150255,80262F;0F712915202C,016D02;0F2901203809,707A2E2C;0F708352150255,01000806;0F7183295201202C02,88;0F7083527A01150255,80262F;0F7083527A1555,0102;0F7071297A01152055,2E2C;,88;0F707A01200255,;0F70835201150255,80262F;0F52202C,016D02;0F71522055,707A2E2C;0F712915202C02,707A01000306;0F718329520120002C3802,6D41;0F7083527A150255,01800026082F06;0F71832952202C,0102;0F70527A012055,2E2C;0855,707A01000306;707A01000855,;,88;0F522055,70717A7D012C02;0F835201150255,707A2E2C;0F71832952202C02,707A01000306;0F707183295201202C0255,7A7D;0F7083527A01150255,80262F;0F71832952002C380806,016D0241;0F70200255,2E01002C0806;0855,707A01000306;0F700120002C0855,;0F70835201150255,7A7D80262F;0F712915202C,016D02","0F290120002C0855,707A;,88;0F7071295201155680002C0206,;0F70832952011520002C0255,;0F70297A01202C0255,88;0F70712901158020002C380855,;0F8352150255,707A01000306;0F71201955,707A2E6D2C61;0F70297A0120002C0206,;0F710120002C3808190655,707A;0F290120002C0855,707A;0F71835215802C380255,707A01000306;,707A2E2C;,88;0F7071295201155680002C0855,;0F7083520115000255,;0F7120081955,707A01000306;0F7071295201158020002C380206,;0F0120004B,707A2C;0F71201955,707A;0F707129521556802C55,01000806;2C3808,707A0100030655;0F71201955,707A;0F70832952011520002C0255,;0F01200255,707A2C;,88;0F7129521556802C0855,707A01000306;0F70290120002C,;0F2901202C,88;0F71295201158020002C380206,707A;0F01200255,707A2C;0F71201955,707A2E016D002C036106;0F7129521556802C02,01000806;0F8329520120002C02,;0F70297A01202C0255,88;0F7083520115000255,;0F202C0855,707A01000306;,88;0F7071297A0120002C19020655,;0F83520115000255,707A;0F70297A01202C0255,88;0F71295215802C3802,707A01000306;0F835201150255,707A2C;0F71201955,707A2E2C;0F70712952155680202C0255,01000806;0F70290120000855,;0F202C0855,707A01000306;0F70718352011580002C380255,;0F7129202C1955,707A;,88;0F707129520115568020002C0255,;0F8352150255,707A01000306;0F70717A201955,2E2C;0F70290120002C0206,;0F01200255,707A2C;0F290120000855,707A2E6D2C61;0F707129521556802C55,01000806;01002C380806,;0F71201955,707A;0F718352011580002C380255,707A","0F708352150255,01000806;0F707A010255,202C03;,88;2920002C0806,0102;0F7083527A01150255,2E2C;0F200255,707A01000306;0F7029527A0155,202C03;0F7083527A011500380255,80262F;0F83295220,70717A7D016D2C02;0F70717A201955,2E01002C0806;0F70527A2055,01000806;707A55,0120002C080306;0F70835201150255,80262F;002C380806,707A010255;,88;0F2002,707A0100030655;0F7029527A010255,202C03;0F0120002C4B02,80262F;0F7071297A15202C55,0102;0F70717A0120003808190655,2E2C;0F8329522002,70717A7D01002C0806;707A55,0120002C080306;0F7083527A01150255,80262F;29202C,7A7D016D02;0F7083520115000255,2E2C;0F71202C38081955,707A01000306;,88;0F70835201150255,80262F;0F7083521555,0102;0F7083527A01150255,2E2C;0F7071297A15202C55,01000806;0F700255,0120002C080306;0F835201150255,70717A7D6D802C262F61;,016D0002;0F70297A0120000855,2E2C;0F70200255,7A7D01000306;0F708329527A01150255,202C03;0F7083527A011500380255,80262F;,88;0F70717A201955,2E2C;0F708352150255,01000806;0F708352150255,0120002C080306;0F7083527A01150255,80262F;0F70717A2000381955,0102;0F290120000855,70717A7D2C;0F70202C55,01000806;0F70527A0155,202C03;0F70835201150255,7A7D80262F;0F7083521555,0102;0F70717A0120003808190655,2E2C;,88;0F7055,0120002C080306;0F70835201150255,80262F;0F7083521555,7A7D016D02;0F70297A0120000855,2E2C;0F71202C38081955,707A01000306;0F29522055,70717A7D2C03;0F708352150255,01800026082F06;0F522055,707A0102;0F71201955,707A2E2C","71295215802C380855,707A01000306;0F835201150255,707A2C;0F832952011520000255,707A2E2C;,88;0F708352150255,01000806;0F8352150255,707A01000306;0F70718329527A202C0255,;0F292055,707A2C;0F83295201200255,707A2E2C;0F707129527A011556802C55,6D41;707A55,01000806;,707A55;0F70297A0120002C0855,;0F7083520115000255,;,707A2E01002C0806;,88;0F718329520120002C080206,;0F835201150255,707A;0F83295201202C02,707A55;,707A55;0855,707A2E01002C0306;0F707129527A1556802C55,6D41;0F7029202C55,01000806;0F700120002C0855,88;0F707129527A15802C3855,01000806;0F708352150255,01000806;0F71832952012002,707A2E2C;,88;0F7083520115000255,;0F835201150255,707A;71295215802C380855,707A01000306;,707A2C;0F0120000855,707A2E2C;0F7029012000080255,6D41;0F707152202C,01000806;0F71832952202C02,01000806;0F70718329527A01202C0255,;0F708329527A0115202C0255,;0F8329520120000255,707A2E2C;,88;0F8352150255,707A01000306;0F70835201150255,88;0F707A0120002C0855,;0F700120002C080255,;,707A2E01002C0806;0F71832952202C02,01000806;0F718329522C3802,01000806;0F2952202C55,707A;0F707129527A0115802C380255,;0F2901802000,707A2C;0855,707A2E01002C0306;,88;0F70832952011520002C0255,;0F7083520115000255,;0F707129527A15802C380255,01000806;0F718329522002,707A01002C0806;0F7183295201200002,707A2E2C;0F702901202C0255,6D41;2C38,01000806;0F7071297A2055,88","0F7071201955,7A7D;0F71290115202C,707A80262F;0F70835215003855,016D02;0F835201150255,70717A7D2C;,88;0F520120,707A55;0F835201150255,707A80262F;0F71291520002C,016D02;0100380806,707A2E2C55;0F71201955,707A01000306;0F71295201202C,6D61;0F5220,01800026082F06;0F7071201955,7A7D016D02;0F7129011520,707A2E2C;2C3808,707A01000306;0F0120004B,70717A7D2C;,88;0F5220,016D02;0F70835201150255,7A2E7D2C;0F712915202C,707A01000306;0F70717A0120002C3808190655,;0F7083527A01150255,80262F;0F70200006,016D0261;0F5220,2E01002C0806;0F71201955,707A01000306;0F7129011520002C,707A;0F708352011500380255,80262F;0F83521555,70717A7D016D2C02;,88;0F5220,707A01000306;0F70835201150255,7A7D;0F835201150255,707A80262F;002C380806,016D02;0F201955,70717A7D2C;0F2002,707A016D00036106;0F5220,01000806;0F835201150255,707A80262F;0F71291520002C,016D02;0F708352011500380255,2E2C;0F8352150255,70717A7D01002C0306;,88;0F7083527A01150255,80262F;0F7083527A1555,016D02;0F7129011520,707A2E2C;2C3808,707A01000306;0F71201955,707A;0F7083520115000255,80262F;0F5220,016D0002;0F7071201955,7A2E7D2C;0F712915202C,707A01000306;0F7083527A011500380255,;0F835201150255,70717A7D802C262F;,88;0F7071520120002C06,;0F29202C55,707A01000306;0F7129011520002C,707A;0F8352011500380255,707A80262F;0F71201955,707A0102;0F700120000206,6D61;0F5220,01000806","0F7183295201202C02,707A55;0F7029527A0120002C0255,;0F83520115000255,707A2C03;0F83520115000255,707A2E2C;0F7129521556802C1955,707A01000306;,88;0F7129202C196C,707A55;0F7183520115803802,707A202C0355;0F29522055,707A2C;0F71832952200255,707A2E01002C0306;0F718329520120002C080206,;0F290120000855,707A;0F700255,0120002C080306;707129527A011580002C380855,;0F204B,707A01002C0306;0F835201150255,707A;0F7071297A202C1955,;,88;0F707A01200255,88;0F71835215802C380255,707A01000306;0F7183295201202C02,;0F290120000855,707A2E2C;0F7071295201155680000855,202C03;01000855,707A;0F70717A201955,01000806;0F7129520115802C3855,707A;0F8329520115200255,707A2C;0F835201150255,707A2E2C03;0F707129527A1580202C55,;,88;0F70718329527A202C0255,88;0F70718352011580002C380255,;0F01200255,707A2C03;01000855,707A2E2C;0F7129521556802C1955,707A01000306;01002C380806,707A6D41;0F7071297A202C1955,01000806;0F707129527A15803855,202C03;0F01200255,707A2C;0F8352150255,707A01000306;0F71832952202C02,;,88;0F707A010255,202C03;707129527A011580002C380855,;0F29202C3809,707A01000306;0F71201955,707A;0F7071297A202C1955,;0100380806,6D202C0341;0F7029527A2055,01000806;0F71295215802C3855,707A01000306;0F835201150255,707A2C;0F832952011520000255,707A2E2C;0F7071295201155680000855,202C03;,88;0F29202C380955,707A01000306;0F7183520115802C380255,707A;29202C,707A;0F71292055,707A2E2C03;0F707129527A1556802C55,;0F71832952202C02,707A016D00034106"]);let V=Y;const H=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(H,"NAMES",["甲子","甲戌","甲申","甲午","甲辰","甲寅"]);let U=H;const W=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(W,"NAMES",["长生","沐浴","冠带","临官","帝旺","衰","病","死","墓","绝","胎","养"]);let q=W;const z=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getSixty(){return L.fromIndex(~~(this.index/3))}};n(z,"NAMES",["一运","二运","三运","四运","五运","六运","七运","八运","九运"]);let K=z;const X=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getEarthBranch(){return Q.fromIndex(this.index)}};n(X,"NAMES",["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"]);let $=X;const J=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getElement(){return M.fromIndex([4,2,0,0,2,1,1,2,3,3,2,4][this.index])}getYinYang(){return this.index%2==0?1:0}getHideHeavenStemMain(){return tt.fromIndex([9,5,0,1,4,2,3,5,6,7,4,8][this.index])}getHideHeavenStemMiddle(){const t=[-1,9,2,-1,1,6,5,3,8,-1,7,0][this.index];return-1===t?null:tt.fromIndex(t)}getHideHeavenStemResidual(){const t=[-1,7,4,-1,9,4,-1,1,4,-1,3,-1][this.index];return-1===t?null:tt.fromIndex(t)}getZodiac(){return $.fromIndex(this.index)}getDirection(){return j.fromIndex([0,4,2,2,4,8,8,4,6,6,4,0][this.index])}getOpposite(){return this.next(6)}getOminous(){return j.fromIndex([8,2,0,6][this.index%4])}getPengZuEarthBranch(){return nt.fromIndex(this.index)}getCombine(){return t.fromIndex(1-this.index)}getHarm(){return t.fromIndex(19-this.index)}combine(t){return this.getCombine().equals(t)?M.fromIndex([2,2,0,1,3,4,2,2,4,3,1,0][this.index]):null}};n(J,"NAMES",["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"]);let Q=J;const Z=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getElement(){return M.fromIndex(~~(this.index/2))}getYinYang(){return this.index%2==0?1:0}getTenStar(t){const e=t.getIndex();let i=e-this.index;return this.index%2!=0&&e%2==0&&(i+=2),ot.fromIndex(i)}getDirection(){return this.getElement().getDirection()}getJoyDirection(){return j.fromIndex([7,5,1,8,3][this.index%5])}getYangDirection(){return j.fromIndex([1,1,6,5,7,0,8,7,2,3][this.index])}getYinDirection(){return j.fromIndex([7,0,5,6,1,1,7,8,3,2][this.index])}getWealthDirection(){return j.fromIndex([7,1,0,2,8][~~(this.index/2)])}getMascotDirection(){return j.fromIndex([3,3,2,2,0,8,1,1,5,6][this.index])}getPengZuHeavenStem(){return it.fromIndex(this.index)}getTerrain(t){const e=t.getIndex();return q.fromIndex([1,6,10,9,10,9,7,0,4,3][this.index]+(1==this.getYinYang()?e:-e))}getCombine(){return this.next(5)}combine(t){return this.getCombine().equals(t)?M.fromIndex(this.index+2):null}};n(Z,"NAMES",["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"]);let tt=Z;const et=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(et,"NAMES",["甲不开仓财物耗散","乙不栽植千株不长","丙不修灶必见灾殃","丁不剃头头必生疮","戊不受田田主不祥","己不破券二比并亡","庚不经络织机虚张","辛不合酱主人不尝","壬不泱水更难提防","癸不词讼理弱敌强"]);let it=et;const rt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(rt,"NAMES",["子不问卜自惹祸殃","丑不冠带主不还乡","寅不祭祀神鬼不尝","卯不穿井水泉不香","辰不哭泣必主重丧","巳不远行财物伏藏","午不苫盖屋主更张","未不服药毒气入肠","申不安床鬼祟入房","酉不会客醉坐颠狂","戌不吃犬作怪上床","亥不嫁娶不利新郎"]);let nt=rt;class st extends s{constructor(t){super(),n(this,"pengZuHeavenStem"),n(this,"pengZuEarthBranch"),this.pengZuHeavenStem=it.fromIndex(t.getHeavenStem().getIndex()),this.pengZuEarthBranch=nt.fromIndex(t.getEarthBranch().getIndex())}static fromSixtyCycle(t){return new st(t)}getName(){return`${this.pengZuHeavenStem.getName()} ${this.pengZuEarthBranch.getName()}`}getPengZuHeavenStem(){return this.pengZuHeavenStem}getPengZuEarthBranch(){return this.pengZuEarthBranch}}const at=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(at,"NAMES",["比肩","劫财","食神","伤官","偏财","正财","七杀","正官","偏印","正印"]);let ot=at;const ht=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(ht,"NAMES",["先胜","友引","先负","佛灭","大安","赤口"]);let lt=ht;const dt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getLuck(){return v.fromIndex(this.index%2)}getElement(){return M.fromIndex([0,4,1,3,0,2][this.index])}};n(dt,"NAMES",["大安","留连","速喜","赤口","小吉","空亡"]);let ct=dt;const gt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getHeavenStem(){return tt.fromIndex(this.index%tt.NAMES.length)}getEarthBranch(){return Q.fromIndex(this.index%Q.NAMES.length)}getSound(){return O.fromIndex(~~(this.index/2))}getPengZu(){return st.fromSixtyCycle(this)}getTen(){return U.fromIndex(~~((this.getHeavenStem().getIndex()-this.getEarthBranch().getIndex())/2))}getExtraEarthBranches(){const t=[];return t[0]=Q.fromIndex(10+this.getEarthBranch().getIndex()-this.getHeavenStem().getIndex()),t[1]=t[0].next(1),t}};n(gt,"NAMES",["甲子","乙丑","丙寅","丁卯","戊辰","己巳","庚午","辛未","壬申","癸酉","甲戌","乙亥","丙子","丁丑","戊寅","己卯","庚辰","辛巳","壬午","癸未","甲申","乙酉","丙戌","丁亥","戊子","己丑","庚寅","辛卯","壬辰","癸巳","甲午","乙未","丙申","丁酉","戊戌","己亥","庚子","辛丑","壬寅","癸卯","甲辰","乙巳","丙午","丁未","戊申","己酉","庚戌","辛亥","壬子","癸丑","甲寅","乙卯","丙辰","丁巳","戊午","己未","庚申","辛酉","壬戌","癸亥"]);let ut=gt;const ft=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(ft,"NAMES",["初伏","中伏","末伏"]);let Ft=ft;class Ct extends o{constructor(t,e){super(t,e)}getDog(){return this.culture}}const mt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(mt,"NAMES",["入梅","出梅"]);let pt=mt;class At extends o{constructor(t,e){super(t,e)}getPlumRain(){return this.culture}toString(){return 0==this.getPlumRain().getIndex()?super.toString():this.culture.getName()}}const jt=class t extends h{constructor(e){super(t.NAMES,e)}next(e){return new t(this.nextIndex(e))}};n(jt,"NAMES",["门","碓磨","厨灶","仓库","房床"]);let yt=jt;const Et=class t extends h{constructor(e){super(t.NAMES,e)}next(e){return new t(this.nextIndex(e))}};n(Et,"NAMES",["碓","厕","炉","门","栖","床"]);let Dt=Et;class xt extends s{constructor(t){super(),n(this,"fetusHeavenStem"),n(this,"fetusEarthBranch"),n(this,"side"),n(this,"direction");const e=t.getSixtyCycle();this.fetusHeavenStem=new yt(e.getHeavenStem().getIndex()%5),this.fetusEarthBranch=new Dt(e.getEarthBranch().getIndex()%6);const i=[3,3,8,8,8,8,8,1,1,1,1,1,1,6,6,6,6,6,5,5,5,5,5,5,0,0,0,0,0,-9,-9,-9,-9,-9,-5,-5,-1,-1,-1,-3,-7,-7,-7,-7,-5,7,7,7,7,7,7,2,2,2,2,2,3,3,3,3][e.getIndex()];this.side=i<0?0:1,this.direction=j.fromIndex(i)}static fromLunarDay(t){return new xt(t)}getName(){let t=this.fetusHeavenStem.getName()+this.fetusEarthBranch.getName();"门门"===t?t="占大门":"碓磨碓"===t?t="占碓磨":"房床床"===t?t="占房床":0===t.indexOf("门")&&(t="占"+t),t+=" ";const e=this.direction.getName();return 0==this.side?t+="房内":t+="外",1==this.side&&"北南西东".indexOf(e)>-1&&(t+="正"),t+=e,t}getSide(){return this.side}getDirection(){return this.direction}getFetusHeavenStem(){return this.fetusHeavenStem}getFetusEarthBranch(){return this.fetusEarthBranch}}const bt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(bt,"NAMES",["一九","二九","三九","四九","五九","六九","七九","八九","九九"]);let vt=bt;class _t extends o{constructor(t,e){super(t,e)}getNine(){return this.culture}}const St=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getThreePhenology(){return kt.fromIndex(this.index%3)}};n(St,"NAMES",["蚯蚓结","麋角解","水泉动","雁北乡","鹊始巢","雉始雊","鸡始乳","征鸟厉疾","水泽腹坚","东风解冻","蛰虫始振","鱼陟负冰","獭祭鱼","候雁北","草木萌动","桃始华","仓庚鸣","鹰化为鸠","玄鸟至","雷乃发声","始电","桐始华","田鼠化为鴽","虹始见","萍始生","鸣鸠拂奇羽","戴胜降于桑","蝼蝈鸣","蚯蚓出","王瓜生","苦菜秀","靡草死","麦秋至","螳螂生","鵙始鸣","反舌无声","鹿角解","蜩始鸣","半夏生","温风至","蟋蟀居壁","鹰始挚","腐草为萤","土润溽暑","大雨行时","凉风至","白露降","寒蝉鸣","鹰乃祭鸟","天地始肃","禾乃登","鸿雁来","玄鸟归","群鸟养羞","雷始收声","蛰虫坯户","水始涸","鸿雁来宾","雀入大水为蛤","菊有黄花","豺乃祭兽","草木黄落","蛰虫咸俯","水始冰","地始冻","雉入大水为蜃","虹藏不见","天气上升地气下降","闭塞而成冬","鹖鴠不鸣","虎始交","荔挺出"]);let Bt=St;const wt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getThreePhenology(){return t.fromIndex(this.index%3)}};n(wt,"NAMES",["初候","二候","三候"]);let kt=wt;const Mt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(Mt,"NAMES",["天枢","天璇","天玑","天权","玉衡","开阳","摇光","洞明","隐元"]);let It=Mt;class Tt extends o{constructor(t,e){super(t,e)}getPhenology(){return this.culture}}const Pt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getColor(){return["白","黒","碧","绿","黄","白","赤","白","紫"][this.index]}getElement(){return M.fromIndex([4,2,0,0,2,3,3,2,1][this.index])}getDipper(){return It.fromIndex(this.index)}getDirection(){return j.fromIndex(this.index)}toString(){return this.getName()+this.getColor()+this.getElement()}};n(Pt,"NAMES",["一","二","三","四","五","六","七","八","九"]);let Nt=Pt;const Rt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getEcliptic(){return Ot.fromIndex([0,0,1,1,0,0,1,0,1,1,0,1][this.index])}};n(Rt,"NAMES",["青龙","明堂","天刑","朱雀","金匮","天德","白虎","玉堂","天牢","玄武","司命","勾陈"]);let Lt=Rt;const Gt=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}getLuck(){return v.fromIndex(this.index)}};n(Gt,"NAMES",["黄道","黑道"]);let Ot=Gt;const Yt=class t extends a{constructor(e){if(super(),n(this,"year"),t.init(),e<-1||e>9999)throw new Error(`illegal lunar year: ${e}`);this.year=e}static init(){if(t.isInit)return;const e="080b0r0j0j0j0C0j0j0C0j0j0j0C0j0C0j0C0F0j0V0V0V0u0j0j0C0j0j0j0j0V0C0j1v0u0C0V1v0C0b080u110u0C0j0C1v9K1v2z0j1vmZbl1veN3s1v0V0C2S1v0V0C2S2o0C0j1Z1c2S1v0j1c0j2z1v0j1c0j392H0b2_2S0C0V0j1c0j2z0C0C0j0j1c0j0N250j0C0j0b081n080b0C0C0C1c0j0N,0r1v1c1v0V0V0F0V0j0C0j0C0j0V0j0u1O0j0C0V0j0j0j0V0b080u0r0u080b0j0j0C0V0C0V0j0b080V0u080b0j0j0u0j1v0u080b1c0j080b0j0V0j0j0V0C0N1v0j1c0j0j1v2g1v420j1c0j2z1v0j1v5Q9z1v4l0j1vfn1v420j9z4l1v1v2S1c0j1v2S3s1v0V0C2S1v1v2S1c0j1v2S2_0b0j2_2z0j1c0j,0z0j0j0j0C0j0j0C0j0j0j0C0j0C0j0j0j0j0m0j0C0j0j0C0j0j0j0j0b0V0j0j0C0j0j0j0j0V0j0j0j0V0b0V0V0C0V0C0j0j0b080u110u0V0C0j0N0j0b080b080b0j0r0b0r0b0j0j0j0j0C0j0b0r0C0j0b0j0C0C0j0j0j0j0j0j0j0j0j0b110j0b0j0j0j0C0j0C0j0j0j0j0b080b080b0V080b080b0j0j0j0j0j0j0V0j0j0u1v0j0j0j0C0j0j0j0V0C0N1c0j0C0C0j0j0j1n080b0j0V0C0j0C0C2g0j1c0j0j1v2g1v0j0j1v7N0j1c0j3L0j0j1v5Q1Z5Q1v4lfn1v420j1v5Q1Z5Q1v4l1v2z1v,0H140r0N0r140r0u0r0V171c11140C0j0u110j0u0j1v0j0C0j0j0j0b080V0u080b0C1v0j0j0j0C0j0b080V0j0j0b080b0j0j0j0j0b080b0C080j0b080b0j0j0j0j0j0j0b080j0b080C0b080b080b080b0j0j0j0j080b0j0C0j0j0j0b0j0j080C0b0j0j0j0j0j0j0b08080b0j0C0j0j0j0b0j0j0K0b0j0C0j0j0j0b080b080j0C0b0j080b080b0j0j0j0j080b0j0b0r0j0j0j0b0j0C0r0b0j0j0j0j0j0j0j0b080j0b0r0C0j0b0j0j0j0r0b0j0C0j0j0j0u0r0b0C0j080b0j0j0j0j0j0j0j1c0j0b0j0j0j0C0j0j0j0j0j0j0j0b080j1c0u0j0j0j0C0j1c0j0u0j1c0j0j0j0j0j0j0j0j1c0j0u1v0j0j0V0j0j2g0j0j0j0C1v0C1G0j0j0V0C1Z1O0j0V0j0j2g1v0j0j0V0C2g5x1v4l1v421O7N0V0C4l1v2S1c0j1v2S2_,050b080C0j0j0j0C0j0j0C0j0j0j0C0j0C0j0C030j0j0j0j0j0j0j0j0j0C0j0b080u0V080b0j0j0V0j0j0j0j0j0j0j0j0j0V0N0j0C0C0j0j0j0j0j0j0j0j1c0j0u0j1v0j0j0j0j0j0b080b080j0j0j0b080b080b080b080b0j0j0j080b0j0b080j0j0j0j0b080b0j0j0r0b080b0b080j0j0j0j0b080b080j0b080j0b080b080b080b080b0j0j0r0b0j0b080j0j0j0j0b080b0j0j0C080b0b080j0j0j0j0j0j0j0b080u080j0j0b0j0j0j0C0j0b080j0j0j0j0b080b080b080b0C080b080b080b0j0j0j0j0j0j0b0C080j0j0b0j0j0j0C0j0b080j0j0C0b080b080j0b0j0j0C080b0j0j0j0j0j0j0b0j0j080C0b0j080b0j0j0j0j0j0j0j0C0j0j0j0b0j0j0C080b0j0j0j0j0j0j0b080b080b0K0b080b080b0j0j0j0j0j0j0j0C0j0j0u0j0j0V0j080b0j0C0j0j0j0b0j0r0C0b0j0j0j0j0j0j0j0j0j0C0j0b080b080b0j0C0C0j0C0j0j0j0u110u0j0j0j0j0j0j0j0j0C0j0j0u0j1c0j0j0j0j0j0j0j0j0V0C0u0j0C0C0V0C1Z0j0j0j0C0j0j0j1v0u0j1c0j0j0j0C0j0j2g0j1c1v0C1Z0V0j4l0j0V0j0j2g0j1v0j1v2S1c7N1v,0w0j1c0j0V0j0j0V0V0V0j0m0V0j0C1c140j0j0j0C0V0C0j1v0j0N0j0C0j0j0j0V0j0j1v0N0j0j0V0j0j0j0j0j0j080b0j0j0j0j0j0j0j080b0j0C0j0j0j0b0j0j080u080b0j0j0j0j0j0j0b080b080b080C0b0j080b080b0j0j0j0j080b0j0C0j0j0j0b0j0j080u080b0j0j0j0j0j0j0b080b080b080b0r0b0j080b080b0j0j0j0j080b0j0b0r0j0j0b080b0j0j080b0j080b0j080b080b0j0j0j0j0j0b080b0r0C0b080b0j0j0j0j080b0b080b080j0j0j0b080b080b080b0j0j0j0j080b0j0b080j0j0j0j0b080b0j0j0r0b080b0j0j0j0j0j0b080b080j0b0r0b080j0b080b0j0j0j0j080b0j0b080j0j0j0j0b080b0j080b0r0b0j080b080b0j0j0j0j0j0b080b0r0C0b080b0j0j0j0j0j0j0b080j0j0j0b080b080b080b0j0j0j0r0b0j0b080j0j0j0j0b080b0r0b0r0b0j080b080b0j0j0j0j0j0j0b0r0j0j0j0b0j0j0j0j080b0j0b080j0j0j0j0b080b080b0j0r0b0j080b0j0j0j0j0j0j0j0b0r0C0b0j0j0j0j0j0j0j080b0j0C0j0j0j0b0j0C0r0b0j0j0j0j0j0j0b080b080u0r0b0j080b0j0j0j0j0j0j0j0b0r0C0u0j0j0j0C0j080b0j0C0j0j0j0u110b0j0j0j0j0j0j0j0j0j0C0j0b080b0j0j0C0C0j0C0j0j0j0b0j1c0j080b0j0j0j0j0j0j0V0j0j0u0j1c0j0j0j0C0j0j2g0j0j0j0C0j0j0V0j0b080b1c0C0V0j0j2g0j0j0V0j0j1c0j1Z0j0j0C0C0j1v,160j0j0V0j1c0j0C0j0C0j1f0j0V0C0j0j0C0j0j0j1G080b080u0V080b0j0j0V0j1v0j0u0j1c0j0j0j0C0j0j0j0C0C0j1D0b0j080b0j0j0j0j0C0j0b0r0C0j0b0j0C0C0j0j0j0j0j0j0j0j0j0b0r0b0r0j0b0j0j0j0C0j0b0r0j0j0j0b080b080j0b0C0j080b080b0j0j0j0j0j0j0b0C080j0j0b0j0j0j0C0j0b080j0j0j0j0b080b080j0b0C0r0j0b0j0j0j0j0j0j0b0C080j0j0b0j0j0j0C0j0j0j0j0C0j0j0b080b0j0j0C080b0j0j0j0j0j0j0b080b080b080C0b080b080b080b0j0j0j0j0j0b080C0j0j0b080b0j0j0C080b0j0j0j0j0j0j0b080j0b0C080j0j0b0j0j0j0j0j0j0b080j0b080C0b080b080b080b0j0j0j0j080b0j0C0j0j0b080b0j0j0C080b0j0j0j0j0j0j0b080j0b080u080j0j0b0j0j0j0j0j0j0b080C0j0j0b080b0j0j0C0j0j080b0j0j0j0j0j0b080b0C0r0b080b0j0j0j0j0j0j0b080j0b080u080b080b080b0j0j0j0C0j0b080j0j0j0j0b0j0j0j0C0j0j080b0j0j0j0j0j0b080b0C0r0b080b0j0j0j0j0j0j0b080j0b0r0b080b080b080b0j0j0j0r0b0j0b0r0j0j0j0b0j0j0j0r0b0j080b0j0j0j0j0j0j0j0b0r0C0b0j0j0j0j0j0j0j0b080j0C0u080b080b0j0j0j0r0b0j0C0C0j0b0j110b0j080b0j0j0j0j0j0j0u0r0C0b0j0j0j0j0j0j0j0j0j0C0j0j0j0b0j1c0j0C0j0j0j0b0j0814080b080b0j0j0j0j0j0j1c0j0u0j0j0V0j0j0j0j0j0j0j0u110u0j0j0j,020b0r0C0j0j0j0C0j0j0V0j0j0j0j0j0C0j1f0j0C0j0V1G0j0j0j0j0V0C0j0C1v0u0j0j0j0V0j0j0C0j0j0j1v0N0C0V0j0j0j0K0C250b0C0V0j0j0V0j0j2g0C0V0j0j0C0j0j0b081v0N0j0j0V0V0j0j0u0j1c0j080b0j0j0j0j0j0j0V0j0j0u0j0j0V0j0j0j0C0j0b080b080V0b0j080b0j0j0j0j0j0j0j0b0r0C0j0b0j0j0j0C0j080b0j0j0j0j0j0j0u0r0C0u0j0j0j0j0j0j0b080j0C0j0b080b080b0j0C0j080b0j0j0j0j0j0j0b080b110b0j0j0j0j0j0j0j0j0j0b0r0j0j0j0b0j0j0j0r0b0j0b080j0j0j0j0b080b080b080b0r0b0j080b080b0j0j0j0j0j0j0b0r0C0b080b0j0j0j0j080b0j0b080j0j0j0j0b080b080b0j0j0j0r0b0j0j0j0j0j0j0b080b0j080C0b0j080b080b0j0j0j0j080b0j0b0r0C0b080b0j0j0j0j080b0j0j0j0j0j0b080b080b080b0j0j080b0r0b0j0j0j0j0j0j0b0j0j080C0b0j080b080b0j0j0j0j0j0b080C0j0j0b080b0j0j0C0j0b080j0j0j0j0b080b080b080b0C0C080b0j0j0j0j0j0j0b0C0C080b080b080b0j0j0j0j0j0j0b0C080j0j0b0j0j0j0C0j0b080j0b080j0j0b080b080b080b0C0r0b0j0j0j0j0j0j0b080b0r0b0r0b0j080b080b0j0j0j0j0j0j0b0r0C0j0b0j0j0j0j0j0j0b080j0C0j0b080j0b0j0j0K0b0j0C0j0j0j0b080b0j0K0b0j080b0j0j0j0j0j0j0V0j0j0b0j0j0j0C0j0j0j0j,0l0C0K0N0r0N0j0r1G0V0m0j0V1c0C0j0j0j0j1O0N110u0j0j0j0C0j0j0V0C0j0u110u0j0j0j0C0j0j0j0C0C0j250j1c2S1v1v0j5x2g0j1c0j0j1c2z0j1c0j0j1c0j0N1v0V0C1v0C0b0C0V0j0j0C0j0C1v0u0j0C0C0j0j0j0C0j0j0j0u110u0j0j0j0C0j0C0C0C0b080b0j0C0j080b0j0C0j0j0j0u110u0j0j0j0C0j0j0j0C0j0j0j0u0C0r0u0j0j0j0j0j0j0b0r0b0V080b080b0j0C0j0j0j0V0j0j0b0j0j0j0C0j0j0j0j0j0j0j0b080j0b0C0r0j0b0j0j0j0C0j0b0r0b0r0j0b080b080b0j0C0j0j0j0j0j0j0j0j0b0j0C0r0b0j0j0j0j0j0j0b080b080j0b0r0b0r0j0b0j0j0j0j080b0j0b0r0j0j0j0b080b080b0j0j0j0j080b0j0j0j0j0j0j0b0j0j0j0r0b0j0j0j0j0j0j0b080b080b080b0r0C0b080b0j0j0j0j0j0b080b0r0C0b080b080b080b0j0j0j0j080b0j0C0j0j0j0b0j0j0C080b0j0j0j0j0j0j0b080j0b0C080j0j0b0j0j0j0j0j0j0b0r0b080j0j0b080b080b0j0j0j0j0j0j0b080j0j0j0j0b0j0j0j0r0b0j0b080j0j0j0j0j0b080b080b0C0r0b0j0j0j0j0j0j0b080b080j0C0b0j080b080b0j0j0j0j0j0j,0a0j0j0j0j0C0j0j0C0j0C0C0j0j0j0j0j0j0j0m0C0j0j0j0j0u080j0j0j1n0j0j0j0j0C0j0j0j0V0j0j0j1c0u0j0C0V0j0j0V0j0j1v0N0C0V2o1v1O2S2o141v0j1v4l0j1c0j1v2S2o0C0u1v0j0C0C2S1v0j1c0j0j1v0N251c0j1v0b1c1v1n1v0j0j0V0j0j1v0N1v0C0V0j0j1v0b0C0j0j0V1c0j0u0j1c0j0j0j0j0j0j0j0j1c0j0u0j0j0V0j0j0j0j0j0j0b080u110u0j0j0j0j0j0j1c0j0b0j080b0j0C0j0j0j0V0j0j0u0C0V0j0j0j0C0j0b080j1c0j0b0j0j0j0C0j0C0j0j0j0b080b080b0j0C0j080b0j0j0j0j0j0j0j0b0C0r0u0j0j0j0j0j0j0b080j0b0r0C0j0b0j0j0j0r0b0j0b0r0j0j0j0b080b080b0j0r0b0j080b0j0j0j0j0j0j0b0j0r0C0b0j0j0j0j0j0j0b080j0j0C0j0j0b080b0j0j0j0j0j0j0j0j0j0j0b080b080b080b0C0j0j080b0j0j0j0j0j0j0b0j0j0C080b0j0j0j0j0j0j0j0j0b0C080j0j0b0j0j0j0j0j,0n0Q0j1c14010q0V1c171k0u0r140V0j0j1c0C0N1O0j0V0j0j0j1c0j0u110u0C0j0C0V0C0j0j0b671v0j1v5Q1O2S2o2S1v4l1v0j1v2S2o0C1Z0j0C0C1O141v0j1c0j2z1O0j0V0j0j1v0b2H390j1c0j0V0C2z0j1c0j1v2g0C0V0j1O0b0j0j0V0C1c0j0u0j1c0j0j0j0j0j0j0j0j1c0N0j0j0V0j0j0C0j0j0b081v0u0j0j0j0C0j1c0N0j0j0C0j0j0j0C0j0j0j0u0C0r0u0j0j0j0C0j0b080j1c0j0b0j0C0C0j0C0C0j0b080b080u0C0j080b0j0C0j0j0j0u110u0j0j0j0j0j0j0j0j0C0C0j0b0j0j0j0C0j0C0C0j0b080b080b0j0C0j080b0j0C0j0j0j0b0j110b0j0j0j0j0j,0B0j0V0j0j0C0j0j0j0C0j0C0j0j0C0j0m0j0j0j0j0C0j0C0j0j0u0j1c0j0j0C0C0j0j0j0j0j0j0j0j0u110N0j0j0V0C0V0j0b081n080b0CrU1O5e2SbX2_1Z0V2o141v0j0C0C0j2z1v0j1c0j7N1O420j1c0j1v2S1c0j1v2S2_0b0j0V0j0j1v0N1v0j0j1c0j1v140j0V0j0j0C0C0b080u1v0C0V0u110u0j0j0j0C0j0j0j0C0C0N0C0V0j0j0C0j0j0b080u110u0C0j0C0u0r0C0u080b0j0j0C0j0j0j".split(",",-1);for(let i=0;i<12;i++){let r=0;const n=e[i],s=~~(n.length/2),a=[];for(let t=0;t<s;t++){const e=2*t,i=n.substring(e,e+2);let s=0,o=1;for(let t=1;t>-1;t--)s+=o*"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_@".indexOf(i.charAt(t)),o*=64;r+=s,a.push(r)}t.LEAP[`${i+1}`]=a}t.isInit=!0}static fromYear(e){return new t(e)}getYear(){return this.year}getDayCount(){let t=0;const e=this.getMonths();for(let i=0,r=e.length;i<r;i++)t+=e[i].getDayCount();return t}getMonthCount(){return this.getLeapMonth()>0?13:12}getName(){return`农历${this.getSixtyCycle().getName()}年`}next(e){return t.fromYear(this.year+e)}getLeapMonth(){if(-1===this.year)return 11;for(const e in t.LEAP)if(t.LEAP[e].indexOf(this.year)>-1)return parseInt(e,10);return 0}getSixtyCycle(){return ut.fromIndex(this.year-4)}getTwenty(){return K.fromIndex(Math.floor((this.year-1864)/20))}getNineStar(){return Nt.fromIndex(63+3*this.getTwenty().getSixty().getIndex()-this.getSixtyCycle().getIndex())}getJupiterDirection(){return j.fromIndex([0,7,7,2,3,3,8,1,1,6,0,0][this.getSixtyCycle().getEarthBranch().getIndex()])}getMonths(){const t=[];let e=Kt.fromYm(this.year,1);for(;e.getYear()===this.year;)t.push(e),e=e.next(1);return t}};n(Yt,"isInit",!1),n(Yt,"LEAP",{});let Vt=Yt;const Ht=class t extends h{constructor(e){super(t.NAMES,e)}static fromIndex(e){return new t(e)}static fromName(e){return new t(e)}next(e){return t.fromIndex(this.nextIndex(e))}};n(Ht,"NAMES",["孟春","仲春","季春","孟夏","仲夏","季夏","孟秋","仲秋","季秋","孟冬","仲冬","季冬"]);let Ut=Ht;const Wt=class t extends h{constructor(e){super(t.NAMES,e)}static fromLunarMonth(e){return e.isLeap()?null:new t(e.getMonth()-1)}next(e){return new t(this.nextIndex(e))}};n(Wt,"NAMES",["占房床","占户窗","占门堂","占厨灶","占房床","占床仓","占碓磨","占厕户","占门房","占房床","占灶炉","占房床"]);let qt=Wt;const zt=class t extends a{constructor(t,e,i){if(super(),n(this,"year"),n(this,"month"),n(this,"leap"),n(this,"dayCount"),n(this,"indexInYear"),n(this,"firstJulianDay"),i){const t=i[1];this.year=Vt.fromYear(i[0]),this.month=Math.abs(t),this.leap=t<0,this.dayCount=i[2],this.indexInYear=i[3],this.firstJulianDay=ie.fromJulianDay(i[4])}else{const i=Vt.fromYear(t),r=i.getLeapMonth();if(0===e||e>12||e<-12)throw new Error(`illegal lunar month: ${e}`);const n=e<0,s=Math.abs(e);if(n&&s!=r)throw new Error(`illegal leap month ${s} in lunar year ${t}`);const a=ae.fromIndex(t,0).getCursoryJulianDay();let o=ne.calcShuo(a);o>a&&(o-=29.53);let h=2;t>8&&t<24?h=1:Vt.fromYear(t-1).getLeapMonth()>10&&239!=t&&240!=t&&(h=3);let l=s-1;(n||r>0&&s>r)&&(l+=1),this.indexInYear=l,o+=29.5306*(h+l);const d=ne.calcShuo(o);this.firstJulianDay=ie.fromJulianDay(ie.J2000+d),this.dayCount=~~(ne.calcShuo(o+29.5306)-d),this.year=i,this.month=s,this.leap=n}}static fromYm(e,i){let r;const n=`${e}${i}`;let s=t.cache[n];return s?r=new t(0,0,s):(r=new t(e,i),t.cache[n]=[r.getYear(),r.getMonthWithLeap(),r.getDayCount(),r.getIndexInYear(),r.getFirstJulianDay().getDay()]),r}getLunarYear(){return this.year}getYear(){return this.year.getYear()}getMonth(){return this.month}getMonthWithLeap(){return this.leap?-this.month:this.month}getDayCount(){return this.dayCount}getIndexInYear(){return this.indexInYear}getSeason(){return Ut.fromIndex(this.month-1)}getFirstJulianDay(){return this.firstJulianDay}isLeap(){return this.leap}getWeekCount(t){return Math.ceil((this.indexOf(this.firstJulianDay.getWeek().getIndex()-t,7)+this.getDayCount())/7)}getName(){return(this.leap?"闰":"")+t.NAMES[this.month-1]}toString(){return this.year.toString()+this.getName()}next(e){if(0===e)return t.fromYm(this.getYear(),this.getMonthWithLeap());let i=this.indexInYear+1+e,r=this.year,n=r.getLeapMonth();if(e>0){let t=n>0?13:12;for(;i>t;)i-=t,r=r.next(1),n=r.getLeapMonth(),t=n>0?13:12}else for(;i<=0;)r=r.next(-1),n=r.getLeapMonth(),i+=n>0?13:12;let s=!1;return n>0&&(i===n+1&&(s=!0),i>n&&i--),t.fromYm(r.getYear(),s?-i:i)}getDays(){const t=this.getYear(),e=this.getMonthWithLeap(),i=[];for(let r=1,n=this.getDayCount();r<=n;r++)i.push(Qt.fromYmd(t,e,r));return i}getWeeks(t){const e=this.getYear(),i=this.getMonthWithLeap(),r=[];for(let n=0,s=this.getWeekCount(t);n<s;n++)r.push($t.fromYm(e,i,n,t));return r}getSixtyCycle(){return ut.fromName(tt.fromIndex(2*(this.year.getSixtyCycle().getHeavenStem().getIndex()+1)+this.indexInYear).getName()+Q.fromIndex(this.indexInYear+2).getName())}getNineStar(){return Nt.fromIndex(27-this.year.getSixtyCycle().getEarthBranch().getIndex()%3*3-this.getSixtyCycle().getEarthBranch().getIndex())}getJupiterDirection(){const t=this.getSixtyCycle(),e=[7,-1,1,3][t.getEarthBranch().next(-2).getIndex()%4];return-1===e?t.getHeavenStem().getDirection():j.fromIndex(e)}getFetus(){return qt.fromLunarMonth(this)}getMinorRen(){return ct.fromIndex((this.month-1)%6)}};n(zt,"cache",{}),n(zt,"NAMES",["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]);let Kt=zt;const Xt=class t extends a{constructor(t,e,i,r){if(super(),n(this,"month"),n(this,"index"),n(this,"start"),i<0||i>5)throw new Error(`illegal lunar week index: ${i}`);if(r<0||r>6)throw new Error(`illegal lunar week start: ${r}`);const s=Kt.fromYm(t,e);if(i>=s.getWeekCount(r))throw new Error(`illegal lunar week index: ${i} in month: ${s.toString()}`);this.month=s,this.index=i,this.start=C.fromIndex(r)}static fromYm(e,i,r,n){return new t(e,i,r,n)}getLunarMonth(){return this.month}getYear(){return this.month.getYear()}getMonth(){return this.month.getMonthWithLeap()}getIndex(){return this.index}getStart(){return this.start}getName(){return t.NAMES[this.index]}toString(){return this.month.toString()+this.getName()}next(e){const i=this.start.getIndex();if(0===e)return t.fromYm(this.getYear(),this.getMonth(),this.index,i);let r=this.index+e,n=this.month;if(e>0){let t=n.getWeekCount(i);for(;r>=t;)r-=t,n=n.next(1),Qt.fromYmd(n.getYear(),n.getMonthWithLeap(),1).getWeek().equals(this.start)||(r+=1),t=n.getWeekCount(i)}else for(;r<0;)Qt.fromYmd(n.getYear(),n.getMonthWithLeap(),1).getWeek().equals(this.start)||(r-=1),n=n.next(-1),r+=n.getWeekCount(i);return t.fromYm(n.getYear(),n.getMonthWithLeap(),r,i)}getFirstDay(){const t=Qt.fromYmd(this.getYear(),this.getMonth(),1);return t.next(7*this.index-this.indexOf(t.getWeek().getIndex()-this.start.getIndex(),7))}getDays(){const t=[],e=this.getFirstDay();t.push(e);for(let i=1;i<7;i++)t.push(e.next(i));return t}equals(t){return t&&t.getFirstDay().equals(this.getFirstDay())}};n(Xt,"NAMES",["第一周","第二周","第三周","第四周","第五周","第六周"]);let $t=Xt;const Jt=class t extends a{constructor(t,e,i){super(),n(this,"month"),n(this,"day");const r=Kt.fromYm(t,e);if(i<1||i>r.getDayCount())throw new Error(`illegal day ${i} in ${r.toString()}`);this.month=r,this.day=i}static fromYmd(e,i,r){return new t(e,i,r)}getLunarMonth(){return this.month}getYear(){return this.month.getYear()}getMonth(){return this.month.getMonthWithLeap()}getDay(){return this.day}getName(){return t.NAMES[this.day-1]}toString(){return this.month.toString()+this.getName()}next(e){return 0!==e?this.getSolarDay().next(e).getLunarDay():t.fromYmd(this.getYear(),this.getMonth(),this.day)}isBefore(t){const e=this.getYear(),i=t.getYear();if(e!==i)return e<i;const r=this.getMonth(),n=t.getMonth();return r!==n?Math.abs(r)<Math.abs(n):this.day<t.getDay()}isAfter(t){const e=this.getYear(),i=t.getYear();if(e!==i)return e>i;const r=this.getMonth(),n=t.getMonth();return r!=n?Math.abs(r)>=Math.abs(n):this.day>t.getDay()}getWeek(){return this.getSolarDay().getWeek()}getYearSixtyCycle(){const t=this.getSolarDay(),e=t.getYear(),i=ae.fromIndex(e,3).getJulianDay().getSolarDay(),r=this.month.getLunarYear(),n=r.getYear();let s=r.getSixtyCycle();return n===e?t.isBefore(i)&&(s=s.next(-1)):n<e&&(t.isBefore(i)||(s=s.next(1))),s}getMonthSixtyCycle(){const t=this.getSolarDay(),e=t.getYear(),i=t.getTerm();let r=i.getIndex()-3;return r<0&&i.getJulianDay().getSolarDay().isAfter(ae.fromIndex(e,3).getJulianDay().getSolarDay())&&(r+=24),Kt.fromYm(e,1).getSixtyCycle().next(Math.floor(r/2))}getSixtyCycle(){const t=~~this.month.getFirstJulianDay().next(this.day-12).getDay();return ut.fromName(tt.fromIndex(t).getName()+Q.fromIndex(t).getName())}getDuty(){return w.fromIndex(this.getSixtyCycle().getEarthBranch().getIndex()-this.getMonthSixtyCycle().getEarthBranch().getIndex())}getTwelveStar(){return Lt.fromIndex(this.getSixtyCycle().getEarthBranch().getIndex()+2*(8-this.getMonthSixtyCycle().getEarthBranch().getIndex()%6))}getNineStar(){const t=this.getSolarDay(),e=ae.fromIndex(t.getYear(),0),i=e.next(12),r=e.next(24),n=e.getJulianDay().getSolarDay(),s=i.getJulianDay().getSolarDay(),a=r.getJulianDay().getSolarDay(),o=n.getLunarDay().getSixtyCycle().getIndex(),h=s.getLunarDay().getSixtyCycle().getIndex(),l=a.getLunarDay().getSixtyCycle().getIndex(),d=n.next(o>29?60-o:-o),c=a.next(l>29?60-l:-l),g=s.next(h>29?60-h:-h);let u=0;return!t.isBefore(d)&&t.isBefore(g)?u=t.subtract(d):!t.isBefore(g)&&t.isBefore(c)?u=8-t.subtract(g):t.isBefore(c)?t.isBefore(d)&&(u=8+d.subtract(t)):u=t.subtract(c),Nt.fromIndex(u)}getJupiterDirection(){const t=this.getSixtyCycle().getIndex();return t%12<6?M.fromIndex(~~(t/12)).getDirection():this.month.getLunarYear().getJupiterDirection()}getFetusDay(){return xt.fromLunarDay(this)}getPhase(){return N.fromIndex(this.day-1)}getSolarDay(){return this.month.getFirstJulianDay().next(this.day-1).getSolarDay()}getTwentyEightStar(){return g.fromIndex([10,18,26,6,14,22,2][this.getSolarDay().getWeek().getIndex()]).next(-7*this.getSixtyCycle().getEarthBranch().getIndex())}getFestival(){return be.fromYmd(this.getYear(),this.getMonth(),this.day)}getSixStar(){return lt.fromIndex((this.month.getMonth()+this.day-2)%6)}getGods(){return T.getDayGods(this.getMonthSixtyCycle(),this.getSixtyCycle())}getRecommends(){return V.getDayRecommends(this.getMonthSixtyCycle(),this.getSixtyCycle())}getAvoids(){return V.getDayAvoids(this.getMonthSixtyCycle(),this.getSixtyCycle())}getHours(){const t=[],e=this.getYear(),i=this.getMonth();t.push(te.fromYmdHms(e,i,this.day,0,0,0));for(let r=0;r<24;r+=2)t.push(te.fromYmdHms(e,i,this.day,r+1,0,0));return t}getMinorRen(){return this.getLunarMonth().getMinorRen().next(this.day-1)}};n(Jt,"NAMES",["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"]);let Qt=Jt;const Zt=class t extends a{constructor(t,e,i,r,s,a){if(super(),n(this,"day"),n(this,"hour"),n(this,"minute"),n(this,"second"),r<0||r>23)throw new Error(`illegal hour: ${r}`);if(s<0||s>59)throw new Error(`illegal minute: ${s}`);if(a<0||a>59)throw new Error(`illegal second: ${a}`);this.day=Qt.fromYmd(t,e,i),this.hour=r,this.minute=s,this.second=a}static fromYmdHms(e,i,r,n,s,a){return new t(e,i,r,n,s,a)}getLunarDay(){return this.day}getYear(){return this.day.getYear()}getMonth(){return this.day.getMonth()}getDay(){return this.day.getDay()}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getName(){return Q.fromIndex(this.getIndexInDay()).getName()+"时"}toString(){return`${this.day.toString()}${this.getSixtyCycle().getName()}时`}getIndexInDay(){return~~((this.hour+1)/2)}next(e){if(0==e)return t.fromYmdHms(this.getYear(),this.getMonth(),this.getDay(),this.hour,this.minute,this.second);const i=this.hour+2*e,r=i<0?-1:1;let n=Math.abs(i),s=~~(n/24)*r;n=n%24*r,n<0&&(n+=24,s--);const a=this.day.next(s);return t.fromYmdHms(a.getYear(),a.getMonth(),a.getDay(),n,this.minute,this.second)}isBefore(t){return this.day.equals(t.getLunarDay())?this.hour!==t.getHour()?this.hour<t.getHour():this.minute!==t.getMinute()?this.minute<t.getMinute():this.second<t.getSecond():this.day.isBefore(t.getLunarDay())}isAfter(t){return this.day.equals(t.getLunarDay())?this.hour!==t.getHour()?this.hour>t.getHour():this.minute!==t.getMinute()?this.minute>t.getMinute():this.second>t.getSecond():this.day.isAfter(t.getLunarDay())}getYearSixtyCycle(){const t=this.getSolarTime(),e=this.day.getSolarDay().getYear(),i=ae.fromIndex(e,3).getJulianDay().getSolarTime(),r=this.day.getLunarMonth().getLunarYear(),n=r.getYear();let s=r.getSixtyCycle();return n===e?t.isBefore(i)&&(s=s.next(-1)):n<e&&(t.isBefore(i)||(s=s.next(1))),s}getMonthSixtyCycle(){const t=this.getSolarTime(),e=t.getYear(),i=t.getTerm();let r=i.getIndex()-3;return r<0&&i.getJulianDay().getSolarTime().isAfter(ae.fromIndex(e,3).getJulianDay().getSolarTime())&&(r+=24),Kt.fromYm(e,1).getSixtyCycle().next(Math.floor(r/2))}getDaySixtyCycle(){const t=this.day.getSixtyCycle();return this.hour<23?t:t.next(1)}getSixtyCycle(){const t=this.getIndexInDay()%12,e=this.getDaySixtyCycle().getHeavenStem().getIndex()%5*2+t;return ut.fromName(tt.fromIndex(e).getName()+Q.fromIndex(t).getName())}getTwelveStar(){return Lt.fromIndex(this.getSixtyCycle().getEarthBranch().getIndex()+2*(8-this.getDaySixtyCycle().getEarthBranch().getIndex()%6))}getNineStar(){const t=this.day.getSolarDay(),e=ae.fromIndex(t.getYear(),0),i=e.next(12),r=!t.isBefore(e.getJulianDay().getSolarDay())&&t.isBefore(i.getJulianDay().getSolarDay());let n=[8,5,2][this.day.getSixtyCycle().getEarthBranch().getIndex()%3];r&&(n=8-n);const s=this.getIndexInDay()%12;return Nt.fromIndex(n+(r?s:-s))}getSolarTime(){const t=this.day.getSolarDay();return Ae.fromYmdHms(t.getYear(),t.getMonth(),t.getDay(),this.hour,this.minute,this.second)}getEightChar(){return t.provider.getEightChar(this)}getRecommends(){return V.getHourRecommends(this.getDaySixtyCycle(),this.getSixtyCycle())}getAvoids(){return V.getHourAvoids(this.getDaySixtyCycle(),this.getSixtyCycle())}getMinorRen(){return this.getLunarDay().getMinorRen().next(this.getIndexInDay())}};n(Zt,"provider",new class{getEightChar(t){return new ve(t.getYearSixtyCycle(),t.getMonthSixtyCycle(),t.getDaySixtyCycle(),t.getSixtyCycle())}});let te=Zt;const ee=class t extends a{constructor(t){super(),n(this,"day"),this.day=t}static fromJulianDay(e){return new t(e)}static fromYmdHms(e,i,r,n,s,a){const o=r+((a/60+s)/60+n)/24;let h=0;const l=372*e+31*i+~~o>=588829;return i<=2&&(i+=12,e--),l&&(h=~~(e/100),h=2-h+~~(h/4)),t.fromJulianDay(~~(365.25*(e+4716))+~~(30.6001*(i+1))+o+h-1524.5)}getDay(){return this.day}getName(){return`${this.day}`}next(e){return t.fromJulianDay(this.day+e)}getSolarDay(){return this.getSolarTime().getSolarDay()}getSolarTime(){let t=~~(this.day+.5),e=this.day+.5-t;if(t>=2299161){const e=~~((t-1867216.25)/36524.25);t+=1+e-~~(e/4)}t+=1524;let i=~~((t-122.1)/365.25);t-=~~(365.25*i);let r=~~(t/30.601);t-=~~(30.601*r);let n=t;r>13?(r-=13,i-=4715):(r-=1,i-=4716),e*=24;let s=~~e;e-=s,e*=60;let a=~~e;e-=a,e*=60;let o=Math.round(e);return o>59&&(o-=60,a++),a>59&&(a-=60,s++),s>23&&(s-=24,n+=1),Ae.fromYmdHms(i,r,n,s,a,o)}getWeek(){return C.fromIndex(7000001+~~(this.day+.5))}subtract(t){return this.day-t.getDay()}};n(ee,"J2000",2451545);let ie=ee;const re=class t{static decode(t){const e="0000000000",i=e+e;return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/J/g,"00")).replace(/I/g,"000")).replace(/H/g,"0000")).replace(/G/g,"00000")).replace(/t/g,"02")).replace(/s/g,"002")).replace(/r/g,"0002")).replace(/q/g,"00002")).replace(/p/g,"000002")).replace(/o/g,"0000002")).replace(/n/g,"00000002")).replace(/m/g,"000000002")).replace(/l/g,"0000000002")).replace(/k/g,"01")).replace(/j/g,"0101")).replace(/i/g,"001")).replace(/h/g,"001001")).replace(/g/g,"0001")).replace(/f/g,"00001")).replace(/e/g,"000001")).replace(/d/g,"0000001")).replace(/c/g,"00000001")).replace(/b/g,"000000001")).replace(/a/g,"0000000001")).replace(/A/g,i+i+i)).replace(/B/g,i+i+e)).replace(/C/g,i+i)).replace(/D/g,i+e)).replace(/E/g,i)).replace(/F/g,e)}static nutationLon2(e){let i=-1.742*e,r=e*e,n=0;for(let s=0,a=t.NUT_B.length;s<a;s+=5)n+=(t.NUT_B[s+3]+i)*Math.sin(t.NUT_B[s]+t.NUT_B[s+1]*e+t.NUT_B[s+2]*r),i=0;return n/100/t.SECOND_PER_RAD}static eLon(e,i){e/=10;let r,n,s,a,o,h=0,l=1,d=t.XL0[2]-t.XL0[1];for(let c=0;c<6;c++,l*=e)if(r=~~t.XL0[1+c],n=~~t.XL0[2+c],o=n-r,0!==o){i<0?s=n:(s=~~(3*i*o/d+.5+r),0!=c&&(s+=3),s>n&&(s=n)),a=0;for(let i=r;i<s;i+=3)a+=t.XL0[i]*Math.cos(t.XL0[i+1]+e*t.XL0[i+2]);h+=a*l}h/=t.XL0[0];let c=e*e;return h+=(-.0728-2.7702*e-1.1019*c-.0996*c*e)/t.SECOND_PER_RAD,h}static mLon(e,i){let r,n,s=t.XL1,a=s[0].length,o=1,h=0,l=e*e,d=l*e,c=d*e,g=c*e,u=e-10;h+=(3.81034409+8399.684730072*e-3319e-8*l+3.11e-8*d-2.033e-10*c)*t.SECOND_PER_RAD,h+=5028.792262*e+1.1124406*l+7699e-8*d-23479e-9*c-1.78e-8*g,u>0&&(h+=1.43*u-.866+.054*u*u),l/=1e4,d/=1e8,c/=1e8,(i*=6)<0&&(i=a);for(let t=0,g=s.length;t<g;t++,o*=e){let g=s[t],u=g.length,f=~~(i*u/a+.5);for(t>0&&(f+=6),f>=u&&(f=u),r=0,n=0;r<f;r+=6)n+=g[r]*Math.cos(g[r+1]+e*g[r+2]+l*g[r+3]+d*g[r+4]+c*g[r+5]);h+=n*o}return h/=t.SECOND_PER_RAD,h}static gxcSunLon(e){let i=e*e,r=628.301955*e-.043126-2732e-9*i;return-20.49552*(1+(.016708634-42037e-9*e-1.267e-7*i)*Math.cos(r))/t.SECOND_PER_RAD}static ev(t){let e=628.307585*t;return 628.332+21*Math.sin(1.527+e)+.44*Math.sin(1.48+2*e)+.129*Math.sin(5.82+e)*t+55e-5*Math.sin(4.21+e)*t*t}static saLon(e,i){return t.eLon(e,i)+t.nutationLon2(e)+t.gxcSunLon(e)+Math.PI}static dtExt(t,e){let i=(t-1820)/100;return e*i*i-20}static dtCalc(e){const i=t.DT_AT.length;let r,n=t.DT_AT[i-2],s=t.DT_AT[i-1];if(e>=n){let i=31;return e>n+100?t.dtExt(e,i):t.dtExt(e,i)-(t.dtExt(n,i)-s)*(n+100-e)/100}for(r=0;r<i&&!(e<t.DT_AT[r+5]);r+=5);let a=(e-t.DT_AT[r])/(t.DT_AT[r+5]-t.DT_AT[r])*10,o=a*a,h=o*a;return t.DT_AT[r+1]+t.DT_AT[r+2]*a+t.DT_AT[r+3]*o+t.DT_AT[r+4]*h}static dtT(e){return t.dtCalc(e/365.2425+2e3)/t.SECOND_PER_DAY}static mv(t){let e=8399.71-914*Math.sin(.7848+8328.691425*t+1523e-7*t*t);return e-=179*Math.sin(2.543+15542.7543*t)+160*Math.sin(.1874+7214.0629*t)+62*Math.sin(3.14+16657.3828*t)+34*Math.sin(4.827+16866.9323*t)+22*Math.sin(4.9+23871.4457*t)+12*Math.sin(2.59+14914.4523*t)+7*Math.sin(.23+6585.7609*t)+5*Math.sin(.9+25195.624*t)+5*Math.sin(2.32-7700.3895*t)+5*Math.sin(3.88+8956.9934*t)+5*Math.sin(.49+7771.3771*t),e}static saLonT(e){let i,r=628.3319653318;return i=(e-1.75347-Math.PI)/r,r=t.ev(i),i+=(e-t.saLon(i,10))/r,r=t.ev(i),i+=(e-t.saLon(i,-1))/r,i}static msaLon(e,i,r){return t.mLon(e,i)+-34e-7-(t.eLon(e,r)+t.gxcSunLon(e)+Math.PI)}static msaLonT(e){let i,r=7771.37714500204;return i=(e+1.08472)/r,i+=(e-t.msaLon(i,3,3))/r,r=t.mv(i)-t.ev(i),i+=(e-t.msaLon(i,20,10))/r,i+=(e-t.msaLon(i,-1,60))/r,i}static saLonT2(e){const i=628.3319653318;let r=(e-1.75347-Math.PI)/i;return r-=(5297e-9*r*r+.0334166*Math.cos(4.669257+628.307585*r)+2061e-7*Math.cos(2.67823+628.307585*r)*r)/i,r+=(e-t.eLon(r,8)-Math.PI+(20.5+17.2*Math.sin(2.1824-33.75705*r))/t.SECOND_PER_RAD)/i,r}static msaLonT2(e){let i,r=7771.37714500204;i=(e+1.08472)/r;let n,s=i*i;return i-=(-3309e-8*s+.10976*Math.cos(.784758+8328.6914246*i+152292e-9*s)+.02224*Math.cos(.1874+7214.0628654*i-21848e-8*s)-.03342*Math.cos(4.669257+628.307585*i))/r,s=i*i,n=t.mLon(i,20)-(4.8950632+628.3319653318*i+5297e-9*s+.0334166*Math.cos(4.669257+628.307585*i)+2061e-7*Math.cos(2.67823+628.307585*i)*i+349e-6*Math.cos(4.6261+1256.61517*i)-20.5/t.SECOND_PER_RAD),r=7771.38-914*Math.sin(.7848+8328.691425*i+1523e-7*s)-179*Math.sin(2.543+15542.7543*i)-160*Math.sin(.1874+7214.0629*i),i+=(e-n)/r,i}static qiHigh(e){let i=36525*t.saLonT2(e);i=i-t.dtT(i)+t.ONE_THIRD;const r=(i+.5)%1*t.SECOND_PER_DAY;return(r<1200||r>t.SECOND_PER_DAY-1200)&&(i=36525*t.saLonT(e)-t.dtT(i)+t.ONE_THIRD),i}static shuoHigh(e){let i=36525*t.msaLonT2(e);i=i-t.dtT(i)+t.ONE_THIRD;let r=(i+.5)%1*t.SECOND_PER_DAY;return(r<1800||r>t.SECOND_PER_DAY-1800)&&(i=36525*t.msaLonT(e)-t.dtT(i)+t.ONE_THIRD),i}static qiLow(e){const i=628.3319653318;let r=(e-4.895062166)/i;r-=(53*r*r+334116*Math.cos(4.67+628.307585*r)+2061*Math.cos(2.678+628.3076*r)*r)/i/1e7;return r-=((48950621.66+6283319653.318*r+53*r*r+334166*Math.cos(4.669257+628.307585*r)+3489*Math.cos(4.6261+1256.61517*r)+2060.6*Math.cos(2.67823+628.307585*r)*r-994-834*Math.sin(2.1824-33.75705*r))/1e7-e)/628.332+(32*(r+1.8)*(r+1.8)-20)/t.SECOND_PER_DAY/36525,36525*r+t.ONE_THIRD}static shuoLow(e){let i=7771.37714500204,r=(e+1.08472)/i;return r-=(-331e-7*r*r+.10976*Math.cos(.785+8328.6914*r)+.02224*Math.cos(.187+7214.0629*r)-.03342*Math.cos(4.669+628.3076*r))/i+(32*(r+1.8)*(r+1.8)-20)/t.SECOND_PER_DAY/36525,36525*r+t.ONE_THIRD}static calcShuo(e){let i,r=t.SHUO_KB.length,n=0,s=14;e+=2451545;let a=t.SHUO_KB[0]-s,o=t.SHUO_KB[r-1]-s,h=2436935;if(e<a||e>=h)n=Math.floor(t.shuoHigh(Math.floor((e+s-2451551)/29.5306)*t.PI_2)+.5);else if(e>=a&&e<o){for(i=0;i<r&&!(e+s<t.SHUO_KB[i+2]);i+=2);n=t.SHUO_KB[i]+t.SHUO_KB[i+1]*Math.floor((e+s-t.SHUO_KB[i])/t.SHUO_KB[i+1]),n=Math.floor(n+.5),1683460===n&&n++,n-=2451545}else if(e>=o&&e<h){n=Math.floor(t.shuoLow(Math.floor((e+s-2451551)/29.5306)*t.PI_2)+.5);let i=Math.floor((e-o)/29.5306),r=t.SB.substring(i,i+1);"1"===r?n+=1:"2"===r&&(n-=1)}return n}static calcQi(e){let i,r=t.QI_KB.length,n=0;e+=2451545;let s=t.QI_KB[0]-7,a=t.QI_KB[r-1]-7,o=2436935;if(e<s||e>=o)n=Math.floor(t.qiHigh(Math.floor((e+7-2451259)/365.2422*24)*Math.PI/12)+.5);else if(e>=s&&e<a){for(i=0;i<r&&!(e+7<t.QI_KB[i+2]);i+=2);n=t.QI_KB[i]+t.QI_KB[i+1]*Math.floor((e+7-t.QI_KB[i])/t.QI_KB[i+1]),n=Math.floor(n+.5),1683460===n&&n++,n-=2451545}else if(e>=a&&e<o){n=Math.floor(t.qiLow(Math.floor((e+7-2451259)/365.2422*24)*Math.PI/12)+.5);let i=Math.floor((e-a)/365.2422*24),r=t.QB.substring(i,i+1);"1"===r?n+=1:"2"===r&&(n-=1)}return n}static qiAccurate(e){const i=36525*t.saLonT(e);return i-t.dtT(i)+t.ONE_THIRD}static qiAccurate2(e){const i=Math.PI/12,r=Math.floor((e+293)/365.2422*24)*i,n=t.qiAccurate(r);return n-e>5?t.qiAccurate(r-i):n-e<-5?t.qiAccurate(r+i):n}};n(re,"PI_2",2*Math.PI),n(re,"ONE_THIRD",1/3),n(re,"SECOND_PER_DAY",86400),n(re,"SECOND_PER_RAD",648e3/Math.PI),n(re,"NUT_B",[2.1824,-33.75705,36e-6,-1720,920,3.5069,1256.66393,11e-6,-132,57,1.3375,16799.4182,-51e-6,-23,10,4.3649,-67.5141,72e-6,21,-9,.04,-628.302,0,-14,0,2.36,8328.691,0,7,0,3.46,1884.966,0,-5,2,5.44,16833.175,0,-4,2,3.69,25128.11,0,-3,0,3.55,628.362,0,2,0]),n(re,"DT_AT",[-4e3,108371.7,-13036.8,392,0,-500,17201,-627.82,16.17,-.3413,-150,12200.6,-346.41,5.403,-.1593,150,9113.8,-328.13,-1.647,.0377,500,5707.5,-391.41,.915,.3145,900,2203.4,-283.45,13.034,-.1778,1300,490.1,-57.35,2.085,-.0072,1600,120,-9.81,-1.532,.1403,1700,10.2,-.91,.51,-.037,1800,13.4,-.72,.202,-.0193,1830,7.8,-1.81,.416,-.0247,1860,8.3,-.13,-.406,.0292,1880,-5.4,.32,-.183,.0173,1900,-2.3,2.06,.169,-.0135,1920,21.2,1.69,-.304,.0167,1940,24.2,1.22,-.064,.0031,1960,33.2,.51,.231,-.0109,1980,51,1.29,-.026,.0032,2e3,63.87,.1,0,0,2005,64.7,.21,0,0,2012,66.8,.22,0,0,2018,69,.36,0,0,2028,72.6]),n(re,"XL0",[1e10,20,578,920,1100,1124,1136,1148,1217,1226,1229,1229,1229,1229,1937,2363,2618,2633,2660,2666,17534704567,0,0,334165646,4.669256804,6283.075849991,3489428,4.6261024,12566.1517,349706,2.744118,5753.384885,341757,2.828866,3.523118,313590,3.62767,77713.771468,267622,4.418084,7860.419392,234269,6.135162,3930.209696,132429,.742464,11506.76977,127317,2.037097,529.690965,119917,1.109629,1577.343542,99025,5.23268,5884.92685,90186,2.04505,26.29832,85722,3.50849,398.149,77979,1.17883,5223.69392,75314,2.53339,5507.55324,50526,4.58293,18849.22755,49238,4.20507,775.52261,35666,2.91954,.06731,31709,5.84902,11790.62909,28413,1.89869,796.29801,27104,.31489,10977.0788,24281,.34481,5486.77784,20616,4.80647,2544.31442,20539,1.86948,5573.1428,20226,2.45768,6069.77675,15552,.83306,213.2991,13221,3.41118,2942.46342,12618,1.08303,20.7754,11513,.64545,.98032,10285,.636,4694.00295,10190,.97569,15720.83878,10172,4.2668,7.11355,9921,6.2099,2146.1654,9761,.681,155.4204,8580,5.9832,161000.6857,8513,1.2987,6275.9623,8471,3.6708,71430.6956,7964,1.8079,17260.1547,7876,3.037,12036.4607,7465,1.7551,5088.6288,7387,3.5032,3154.6871,7355,4.6793,801.8209,6963,.833,9437.7629,6245,3.9776,8827.3903,6115,1.8184,7084.8968,5696,2.7843,6286.599,5612,4.3869,14143.4952,5558,3.4701,6279.5527,5199,.1891,12139.5535,5161,1.3328,1748.0164,5115,.2831,5856.4777,4900,.4874,1194.447,4104,5.3682,8429.2413,4094,2.3985,19651.0485,3920,6.1683,10447.3878,3677,6.0413,10213.2855,3660,2.5696,1059.3819,3595,1.7088,2352.8662,3557,1.776,6812.7668,3329,.5931,17789.8456,3041,.4429,83996.8473,3005,2.7398,1349.8674,2535,3.1647,4690.4798,2474,.2148,3.5904,2366,.4847,8031.0923,2357,2.0653,3340.6124,2282,5.222,4705.7323,2189,5.5559,553.5694,2142,1.4256,16730.4637,2109,4.1483,951.7184,2030,.3713,283.8593,1992,5.2221,12168.0027,1986,5.7747,6309.3742,1912,3.8222,23581.2582,1889,5.3863,149854.4001,1790,2.2149,13367.9726,1748,4.5605,135.0651,1622,5.9884,11769.8537,1508,4.1957,6256.7775,1442,4.1932,242.7286,1435,3.7236,38.0277,1397,4.4014,6681.2249,1362,1.8893,7632.9433,1250,1.1305,5.5229,1205,2.6223,955.5997,1200,1.0035,632.7837,1129,.1774,4164.312,1083,.3273,103.0928,1052,.9387,11926.2544,1050,5.3591,1592.596,1033,6.1998,6438.4962,1001,6.0291,5746.2713,980,.999,11371.705,980,5.244,27511.468,938,2.624,5760.498,923,.483,522.577,922,4.571,4292.331,905,5.337,6386.169,862,4.165,7058.598,841,3.299,7234.794,836,4.539,25132.303,813,6.112,4732.031,812,6.271,426.598,801,5.821,28.449,787,.996,5643.179,776,2.957,23013.54,769,3.121,7238.676,758,3.974,11499.656,735,4.386,316.392,731,.607,11513.883,719,3.998,74.782,706,.323,263.084,676,5.911,90955.552,663,3.665,17298.182,653,5.791,18073.705,630,4.717,6836.645,615,1.458,233141.314,612,1.075,19804.827,596,3.321,6283.009,596,2.876,6283.143,555,2.452,12352.853,541,5.392,419.485,531,.382,31441.678,519,4.065,6208.294,513,2.361,10973.556,494,5.737,9917.697,450,3.272,11015.106,449,3.653,206.186,447,2.064,7079.374,435,4.423,5216.58,421,1.906,245.832,413,.921,3738.761,402,.84,20.355,387,1.826,11856.219,379,2.344,3.881,374,2.954,3128.389,370,5.031,536.805,365,1.018,16200.773,365,1.083,88860.057,352,5.978,3894.182,352,2.056,244287.6,351,3.713,6290.189,340,1.106,14712.317,339,.978,8635.942,339,3.202,5120.601,333,.837,6496.375,325,3.479,6133.513,316,5.089,21228.392,316,1.328,10873.986,309,3.646,10.637,303,1.802,35371.887,296,3.397,9225.539,288,6.026,154717.61,281,2.585,14314.168,262,3.856,266.607,262,2.579,22483.849,257,1.561,23543.231,255,3.949,1990.745,251,3.744,10575.407,240,1.161,10984.192,238,.106,7.046,236,4.272,6040.347,234,3.577,10969.965,211,3.714,65147.62,210,.754,13521.751,207,4.228,5650.292,202,.814,170.673,201,4.629,6037.244,200,.381,6172.87,199,3.933,6206.81,199,5.197,6262.3,197,1.046,18209.33,195,1.07,5230.807,195,4.869,36.028,194,4.313,6244.943,192,1.229,709.933,192,5.595,6282.096,192,.602,6284.056,189,3.744,23.878,188,1.904,15.252,188,.867,22003.915,182,3.681,15110.466,181,.491,1.484,179,3.222,39302.097,179,1.259,12559.038,62833196674749,0,0,20605886,2.67823456,6283.07584999,430343,2.635127,12566.1517,42526,1.59047,3.52312,11926,5.79557,26.29832,10898,2.96618,1577.34354,9348,2.5921,18849.2275,7212,1.1385,529.691,6777,1.8747,398.149,6733,4.4092,5507.5532,5903,2.888,5223.6939,5598,2.1747,155.4204,4541,.398,796.298,3637,.4662,775.5226,2896,2.6471,7.1135,2084,5.3414,.9803,1910,1.8463,5486.7778,1851,4.9686,213.2991,1729,2.9912,6275.9623,1623,.0322,2544.3144,1583,1.4305,2146.1654,1462,1.2053,10977.0788,1246,2.8343,1748.0164,1188,3.258,5088.6288,1181,5.2738,1194.447,1151,2.075,4694.003,1064,.7661,553.5694,997,1.303,6286.599,972,4.239,1349.867,945,2.7,242.729,858,5.645,951.718,758,5.301,2352.866,639,2.65,9437.763,610,4.666,4690.48,583,1.766,1059.382,531,.909,3154.687,522,5.661,71430.696,520,1.854,801.821,504,1.425,6438.496,433,.241,6812.767,426,.774,10447.388,413,5.24,7084.897,374,2.001,8031.092,356,2.429,14143.495,350,4.8,6279.553,337,.888,12036.461,337,3.862,1592.596,325,3.4,7632.943,322,.616,8429.241,318,3.188,4705.732,297,6.07,4292.331,295,1.431,5746.271,290,2.325,20.355,275,.935,5760.498,270,4.804,7234.794,253,6.223,6836.645,228,5.003,17789.846,225,5.672,11499.656,215,5.202,11513.883,208,3.955,10213.286,208,2.268,522.577,206,2.224,5856.478,206,2.55,25132.303,203,.91,6256.778,189,.532,3340.612,188,4.735,83996.847,179,1.474,4164.312,178,3.025,5.523,177,3.026,5753.385,159,4.637,3.286,157,6.124,5216.58,155,3.077,6681.225,154,4.2,13367.973,143,1.191,3894.182,138,3.093,135.065,136,4.245,426.598,134,5.765,6040.347,128,3.085,5643.179,127,2.092,6290.189,125,3.077,11926.254,125,3.445,536.805,114,3.244,12168.003,112,2.318,16730.464,111,3.901,11506.77,111,5.32,23.878,105,3.75,7860.419,103,2.447,1990.745,96,.82,3.88,96,4.08,6127.66,91,5.42,206.19,91,.42,7079.37,88,5.17,11790.63,81,.34,9917.7,80,3.89,10973.56,78,2.4,1589.07,78,2.58,11371.7,77,3.98,955.6,77,3.36,36.03,76,1.3,103.09,75,5.18,10969.97,75,4.96,6496.37,73,5.21,38.03,72,2.65,6309.37,70,5.61,3738.76,69,2.6,3496.03,69,.39,15.25,69,2.78,20.78,65,1.13,7058.6,64,4.28,28.45,61,5.63,10984.19,60,.73,419.48,60,5.28,10575.41,58,5.55,17298.18,58,3.19,4732.03,5291887,0,0,871984,1.072097,6283.07585,30913,.86729,12566.1517,2734,.053,3.5231,1633,5.1883,26.2983,1575,3.6846,155.4204,954,.757,18849.228,894,2.057,77713.771,695,.827,775.523,506,4.663,1577.344,406,1.031,7.114,381,3.441,5573.143,346,5.141,796.298,317,6.053,5507.553,302,1.192,242.729,289,6.117,529.691,271,.306,398.149,254,2.28,553.569,237,4.381,5223.694,208,3.754,.98,168,.902,951.718,153,5.759,1349.867,145,4.364,1748.016,134,3.721,1194.447,125,2.948,6438.496,122,2.973,2146.165,110,1.271,161000.686,104,.604,3154.687,100,5.986,6286.599,92,4.8,5088.63,89,5.23,7084.9,83,3.31,213.3,76,3.42,5486.78,71,6.19,4690.48,68,3.43,4694,65,1.6,2544.31,64,1.98,801.82,61,2.48,10977.08,50,1.44,6836.65,49,2.34,1592.6,46,1.31,4292.33,46,3.81,149854.4,43,.04,7234.79,40,4.94,7632.94,39,1.57,71430.7,38,3.17,6309.37,35,.99,6040.35,35,.67,1059.38,31,3.18,2352.87,31,3.55,8031.09,30,1.92,10447.39,30,2.52,6127.66,28,4.42,9437.76,28,2.71,3894.18,27,.67,25132.3,26,5.27,6812.77,25,.55,6279.55,23,1.38,4705.73,22,.64,6256.78,20,6.07,640.88,28923,5.84384,6283.07585,3496,0,0,1682,5.4877,12566.1517,296,5.196,155.42,129,4.722,3.523,71,5.3,18849.23,64,5.97,242.73,40,3.79,553.57,11408,3.14159,0,772,4.134,6283.076,77,3.84,12566.15,42,.42,155.42,88,3.14,0,17,2.77,6283.08,5,2.01,155.42,3,2.21,12566.15,27962,3.1987,84334.66158,10164,5.42249,5507.55324,8045,3.8801,5223.6939,4381,3.7044,2352.8662,3193,4.0003,1577.3435,2272,3.9847,1047.7473,1814,4.9837,6283.0758,1639,3.5646,5856.4777,1444,3.7028,9437.7629,1430,3.4112,10213.2855,1125,4.8282,14143.4952,1090,2.0857,6812.7668,1037,4.0566,71092.8814,971,3.473,4694.003,915,1.142,6620.89,878,4.44,5753.385,837,4.993,7084.897,770,5.554,167621.576,719,3.602,529.691,692,4.326,6275.962,558,4.41,7860.419,529,2.484,4705.732,521,6.25,18073.705,903,3.897,5507.553,618,1.73,5223.694,380,5.244,2352.866,166,1.627,84334.662,10001398880,0,0,167069963,3.098463508,6283.075849991,1395602,3.0552461,12566.1517,308372,5.198467,77713.771468,162846,1.173877,5753.384885,157557,2.846852,7860.419392,92480,5.45292,11506.76977,54244,4.56409,3930.2097,47211,3.661,5884.92685,34598,.96369,5507.55324,32878,5.89984,5223.69392,30678,.29867,5573.1428,24319,4.2735,11790.62909,21183,5.84715,1577.34354,18575,5.02194,10977.0788,17484,3.01194,18849.22755,10984,5.05511,5486.77784,9832,.8868,6069.7768,8650,5.6896,15720.8388,8583,1.2708,161000.6857,6490,.2725,17260.1547,6292,.9218,529.691,5706,2.0137,83996.8473,5574,5.2416,71430.6956,4938,3.245,2544.3144,4696,2.5781,775.5226,4466,5.5372,9437.7629,4252,6.0111,6275.9623,3897,5.3607,4694.003,3825,2.3926,8827.3903,3749,.8295,19651.0485,3696,4.9011,12139.5535,3566,1.6747,12036.4607,3454,1.8427,2942.4634,3319,.2437,7084.8968,3192,.1837,5088.6288,3185,1.7778,398.149,2846,1.2134,6286.599,2779,1.8993,6279.5527,2628,4.589,10447.3878,2460,3.7866,8429.2413,2393,4.996,5856.4777,2359,.2687,796.298,2329,2.8078,14143.4952,2210,1.95,3154.6871,2035,4.6527,2146.1654,1951,5.3823,2352.8662,1883,.6731,149854.4001,1833,2.2535,23581.2582,1796,.1987,6812.7668,1731,6.152,16730.4637,1717,4.4332,10213.2855,1619,5.2316,17789.8456,1381,5.1896,8031.0923,1364,3.6852,4705.7323,1314,.6529,13367.9726,1041,4.3329,11769.8537,1017,1.5939,4690.4798,998,4.201,6309.374,966,3.676,27511.468,874,6.064,1748.016,779,3.674,12168.003,771,.312,7632.943,756,2.626,6256.778,746,5.648,11926.254,693,2.924,6681.225,680,1.423,23013.54,674,.563,3340.612,663,5.661,11371.705,659,3.136,801.821,648,2.65,19804.827,615,3.029,233141.314,612,5.134,1194.447,563,4.341,90955.552,552,2.091,17298.182,534,5.1,31441.678,531,2.407,11499.656,523,4.624,6438.496,513,5.324,11513.883,477,.256,11856.219,461,1.722,7234.794,458,3.766,6386.169,458,4.466,5746.271,423,1.055,5760.498,422,1.557,7238.676,415,2.599,7058.598,401,3.03,1059.382,397,1.201,1349.867,379,4.907,4164.312,360,5.707,5643.179,352,3.626,244287.6,348,.761,10973.556,342,3.001,4292.331,336,4.546,4732.031,334,3.138,6836.645,324,4.164,9917.697,316,1.691,11015.106,307,.238,35371.887,298,1.306,6283.143,298,1.75,6283.009,293,5.738,16200.773,286,5.928,14712.317,281,3.515,21228.392,280,5.663,8635.942,277,.513,26.298,268,4.207,18073.705,266,.9,12352.853,260,2.962,25132.303,255,2.477,6208.294,242,2.8,709.933,231,1.054,22483.849,229,1.07,14314.168,216,1.314,154717.61,215,6.038,10873.986,200,.561,7079.374,198,2.614,951.718,197,4.369,167283.762,186,2.861,5216.58,183,1.66,39302.097,183,5.912,3738.761,175,2.145,6290.189,173,2.168,10575.407,171,3.702,1592.596,171,1.343,3128.389,164,5.55,6496.375,164,5.856,10984.192,161,1.998,10969.965,161,1.909,6133.513,157,4.955,25158.602,154,6.216,23543.231,153,5.357,13521.751,150,5.77,18209.33,150,5.439,155.42,139,1.778,9225.539,139,1.626,5120.601,128,2.46,13916.019,123,.717,143571.324,122,2.654,88860.057,121,4.414,3894.182,121,1.192,3.523,120,4.03,553.569,119,1.513,17654.781,117,3.117,14945.316,113,2.698,6040.347,110,3.085,43232.307,109,.998,955.6,108,2.939,17256.632,107,5.285,65147.62,103,.139,11712.955,103,5.85,213.299,102,3.046,6037.244,101,2.842,8662.24,100,3.626,6262.3,98,2.36,6206.81,98,5.11,6172.87,98,2,15110.47,97,2.67,5650.29,97,2.75,6244.94,96,4.02,6282.1,96,5.31,6284.06,92,.1,29088.81,85,3.26,20426.57,84,2.6,28766.92,81,3.58,10177.26,80,5.81,5230.81,78,2.53,16496.36,77,4.06,6127.66,73,.04,5481.25,72,5.96,12559.04,72,5.92,4136.91,71,5.49,22003.91,70,3.41,7.11,69,.62,11403.68,69,3.9,1589.07,69,1.96,12416.59,69,4.51,426.6,67,1.61,11087.29,66,4.5,47162.52,66,5.08,283.86,66,4.32,16858.48,65,1.04,6062.66,64,1.59,18319.54,63,5.7,45892.73,63,4.6,66567.49,63,3.82,13517.87,62,2.62,11190.38,61,1.54,33019.02,60,5.58,10344.3,60,5.38,316428.23,60,5.78,632.78,59,6.12,9623.69,57,.16,17267.27,57,3.86,6076.89,57,1.98,7668.64,56,4.78,20199.09,55,4.56,18875.53,55,3.51,17253.04,54,3.07,226858.24,54,4.83,18422.63,53,5.02,12132.44,52,3.63,5333.9,52,.97,155427.54,51,3.36,20597.24,50,.99,11609.86,50,2.21,1990.75,48,1.62,12146.67,48,1.17,12569.67,47,4.62,5436.99,47,1.81,12562.63,47,.59,21954.16,47,.76,7342.46,46,.27,4590.91,46,3.77,156137.48,45,5.66,10454.5,44,5.84,3496.03,43,.24,17996.03,41,5.93,51092.73,41,4.21,12592.45,40,5.14,1551.05,40,5.28,15671.08,39,3.69,18052.93,39,4.94,24356.78,38,2.72,11933.37,38,5.23,7477.52,38,4.99,9779.11,37,3.7,9388.01,37,4.44,4535.06,36,2.16,28237.23,36,2.54,242.73,36,.22,5429.88,35,6.15,19800.95,35,2.92,36949.23,34,5.63,2379.16,34,5.73,16460.33,34,5.11,5849.36,33,6.19,6268.85,10301861,1.1074897,6283.07584999,172124,1.064423,12566.1517,70222,3.14159,0,3235,1.0217,18849.2275,3080,2.8435,5507.5532,2497,1.3191,5223.6939,1849,1.4243,1577.3435,1008,5.9138,10977.0788,865,1.42,6275.962,863,.271,5486.778,507,1.686,5088.629,499,6.014,6286.599,467,5.987,529.691,440,.518,4694.003,410,1.084,9437.763,387,4.75,2544.314,375,5.071,796.298,352,.023,83996.847,344,.949,71430.696,341,5.412,775.523,322,6.156,2146.165,286,5.484,10447.388,284,3.42,2352.866,255,6.132,6438.496,252,.243,398.149,243,3.092,4690.48,225,3.689,7084.897,220,4.952,6812.767,219,.42,8031.092,209,1.282,1748.016,193,5.314,8429.241,185,1.82,7632.943,175,3.229,6279.553,173,1.537,4705.732,158,4.097,11499.656,158,5.539,3154.687,150,3.633,11513.883,148,3.222,7234.794,147,3.653,1194.447,144,.817,14143.495,135,6.151,5746.271,134,4.644,6836.645,128,2.693,1349.867,123,5.65,5760.498,118,2.577,13367.973,113,3.357,17789.846,110,4.497,4292.331,108,5.828,12036.461,102,5.621,6256.778,99,1.14,1059.38,98,.66,5856.48,93,2.32,10213.29,92,.77,16730.46,88,1.5,11926.25,86,1.42,5753.38,85,.66,155.42,81,1.64,6681.22,80,4.11,951.72,66,4.55,5216.58,65,.98,25132.3,64,4.19,6040.35,64,.52,6290.19,63,1.51,5643.18,59,6.18,4164.31,57,2.3,10973.56,55,2.32,11506.77,55,2.2,1592.6,55,5.27,3340.61,54,5.54,553.57,53,5.04,9917.7,53,.92,11371.7,52,3.98,17298.18,52,3.6,10969.97,49,5.91,3894.18,49,2.51,6127.66,48,1.67,12168,46,.31,801.82,42,3.7,10575.41,42,4.05,10984.19,40,2.17,7860.42,40,4.17,26.3,38,5.82,7058.6,37,3.39,6496.37,36,1.08,6309.37,36,5.34,7079.37,34,3.62,11790.63,32,.32,16200.77,31,4.24,3738.76,29,4.55,11856.22,29,1.26,8635.94,27,3.45,5884.93,26,5.08,10177.26,26,5.38,21228.39,24,2.26,11712.96,24,1.05,242.73,24,5.59,6069.78,23,3.63,6284.06,23,1.64,4732.03,22,3.46,213.3,21,1.05,3496.03,21,3.92,13916.02,21,4.01,5230.81,20,5.16,12352.85,20,.69,1990.75,19,2.73,6062.66,19,5.01,11015.11,18,6.04,6283.01,18,2.85,7238.68,18,5.6,6283.14,18,5.16,17253.04,18,2.54,14314.17,17,1.58,7.11,17,.98,3930.21,17,4.75,17267.27,16,2.19,6076.89,16,2.19,18073.7,16,6.12,3.52,16,4.61,9623.69,16,3.4,16496.36,15,.19,9779.11,15,5.3,13517.87,15,4.26,3128.39,15,.81,709.93,14,.5,25158.6,14,4.38,4136.91,13,.98,65147.62,13,3.31,154717.61,13,2.11,1589.07,13,1.92,22483.85,12,6.03,9225.54,12,1.53,12559.04,12,5.82,6282.1,12,5.61,5642.2,12,2.38,167283.76,12,.39,12132.44,12,3.98,4686.89,12,5.81,12569.67,12,.56,5849.36,11,.45,6172.87,11,5.8,16858.48,11,6.22,12146.67,11,2.27,5429.88,435939,5.784551,6283.07585,12363,5.57935,12566.1517,1234,3.1416,0,879,3.628,77713.771,569,1.87,5573.143,330,5.47,18849.228,147,4.48,5507.553,110,2.842,161000.686,101,2.815,5223.694,85,3.11,1577.34,65,5.47,775.52,61,1.38,6438.5,50,4.42,6286.6,47,3.66,7084.9,46,5.39,149854.4,42,.9,10977.08,40,3.2,5088.63,35,1.81,5486.78,32,5.35,3154.69,30,3.52,796.3,29,4.62,4690.48,28,1.84,4694,27,3.14,71430.7,27,6.17,6836.65,26,1.42,2146.17,25,2.81,1748.02,24,2.18,155.42,23,4.76,7234.79,21,3.38,7632.94,21,.22,4705.73,20,4.22,1349.87,20,2.01,1194.45,20,4.58,529.69,19,1.59,6309.37,18,5.7,6040.35,18,6.03,4292.33,17,2.9,9437.76,17,2,8031.09,17,5.78,83996.85,16,.05,2544.31,15,.95,6127.66,14,.36,10447.39,14,1.48,2352.87,13,.77,553.57,13,5.48,951.72,13,5.27,6279.55,13,3.76,6812.77,11,5.41,6256.78,10,.68,1592.6,10,4.95,398.15,10,1.15,3894.18,10,5.2,244287.6,10,1.94,11856.22,9,5.39,25132.3,8,6.18,1059.38,8,.69,8429.24,8,5.85,242.73,7,5.26,14143.5,7,.52,801.82,6,2.24,8635.94,6,4,13367.97,6,2.77,90955.55,6,5.17,7058.6,5,1.46,233141.31,5,4.13,7860.42,5,3.91,26.3,5,3.89,12036.46,5,5.58,6290.19,5,5.54,1990.75,5,.83,11506.77,5,6.22,6681.22,4,5.26,10575.41,4,1.91,7477.52,4,.43,10213.29,4,1.09,709.93,4,5.09,11015.11,4,4.22,88860.06,4,3.57,7079.37,4,1.98,6284.06,4,3.93,10973.56,4,6.18,9917.7,4,.36,10177.26,4,2.75,3738.76,4,3.33,5643.18,4,5.36,25158.6,14459,4.27319,6283.07585,673,3.917,12566.152,77,0,0,25,3.73,18849.23,4,2.8,6286.6,386,2.564,6283.076,31,2.27,12566.15,5,3.44,5573.14,2,2.05,18849.23,1,2.06,77713.77,1,4.41,161000.69,1,3.82,149854.4,1,4.08,6127.66,1,5.26,6438.5,9,1.22,6283.08,1,.66,12566.15]),n(re,"XL1",[[22639.586,.78475822,8328.691424623,1.5229241,25.0719,-.123598,4586.438,.1873974,7214.06286536,-2.184756,-18.86,.0828,2369.914,2.542952,15542.75428998,-.661832,6.212,-.0408,769.026,3.140313,16657.38284925,3.04585,50.144,-.2472,666.418,1.527671,628.30195521,-.02664,.062,-.0054,411.596,4.826607,16866.932315,-1.28012,-1.07,-.0059,211.656,4.115028,-1114.6285593,-3.70768,-43.93,.2064,205.436,.230523,6585.7609101,-2.15812,-18.92,.0882,191.956,4.898507,23871.4457146,.86109,31.28,-.164,164.729,2.586078,14914.4523348,-.6352,6.15,-.035,147.321,5.4553,-7700.3894694,-1.5496,-25.01,.118,124.988,.48608,7771.377145,-.3309,3.11,-.02,109.38,3.88323,8956.9933798,1.4963,25.13,-.129,55.177,5.57033,-1324.178025,.6183,7.3,-.035,45.1,.89898,25195.62374,.2428,24,-.129,39.533,3.81213,-8538.24089,2.803,26.1,-.118,38.43,4.30115,22756.817155,-2.8466,-12.6,.042,36.124,5.49587,24986.074274,4.5688,75.2,-.371,30.773,1.94559,14428.125731,-4.3695,-37.7,.166,28.397,3.28586,7842.364821,-2.2114,-18.8,.077,24.358,5.64142,16171.056245,-.6885,6.3,-.046,18.585,4.41371,-557.31428,-1.8538,-22,.1,17.954,3.58454,8399.6791,-.3576,3.2,-.03,14.53,4.9416,23243.143759,.888,31.2,-.16,14.38,.9709,32200.137139,2.384,56.4,-.29,14.251,5.7641,-2.3012,1.523,25.1,-.12,13.899,.3735,31085.50858,-1.324,12.4,-.08,13.194,1.7595,-9443.319984,-5.231,-69,.33,9.679,3.0997,-16029.080894,-3.072,-50.1,.24,9.366,.3016,24080.99518,-3.465,-19.9,.08,8.606,4.1582,-1742.930514,-3.681,-44,.21,8.453,2.8416,16100.06857,1.192,28.2,-.14,8.05,2.6292,14286.15038,-.609,6.1,-.03,7.63,6.2388,17285.684804,3.019,50.2,-.25,7.447,1.4845,1256.60391,-.053,.1,-.01,7.371,.2736,5957.458955,-2.131,-19,.09,7.063,5.6715,33.757047,-.308,-3.6,.02,6.383,4.7843,7004.5134,2.141,32.4,-.16,5.742,2.6572,32409.686605,-1.942,5,-.05,4.374,4.3443,22128.5152,-2.82,-13,.05,3.998,3.2545,33524.31516,1.766,49,-.25,3.21,2.2443,14985.44001,-2.516,-16,.06,2.915,1.7138,24499.74767,.834,31,-.17,2.732,1.9887,13799.82378,-4.343,-38,.17,2.568,5.4122,-7072.08751,-1.576,-25,.11,2.521,3.2427,8470.66678,-2.238,-19,.07,2.489,4.0719,-486.3266,-3.734,-44,.2,2.146,5.6135,-1952.47998,.645,7,-.03,1.978,2.7291,39414.2,.199,37,-.21,1.934,1.5682,33314.7657,6.092,100,-.5,1.871,.4166,30457.20662,-1.297,12,-.1,1.753,2.0582,-8886.0057,-3.38,-47,.2,1.437,2.386,-695.87607,.59,7,0,1.373,3.026,-209.54947,4.33,51,-.2,1.262,5.94,16728.37052,1.17,28,-.1,1.224,6.172,6656.74859,-4.04,-41,.2,1.187,5.873,6099.43431,-5.89,-63,.3,1.177,1.014,31571.83518,2.41,56,-.3,1.162,3.84,9585.29534,1.47,25,-.1,1.143,5.639,8364.73984,-2.18,-19,.1,1.078,1.229,70.98768,-1.88,-22,.1,1.059,3.326,40528.82856,3.91,81,-.4,.99,5.013,40738.37803,-.42,30,-.2,.948,5.687,-17772.01141,-6.75,-94,.5,.876,.298,-.35232,0,0,0,.822,2.994,393.02097,0,0,0,.788,1.836,8326.39022,3.05,50,-.2,.752,4.985,22614.8418,.91,31,-.2,.74,2.875,8330.99262,0,0,0,.669,.744,-24357.77232,-4.6,-75,.4,.644,1.314,8393.12577,-2.18,-19,.1,.639,5.888,575.33849,0,0,0,.635,1.116,23385.11911,-2.87,-13,0,.584,5.197,24428.75999,2.71,53,-.3,.583,3.513,-9095.55517,.95,4,0,.572,6.059,29970.88002,-5.03,-32,.1,.565,2.96,.32863,1.52,25,-.1,.561,4.001,-17981.56087,-2.43,-43,.2,.557,.529,7143.07519,-.3,3,0,.546,2.311,25614.37623,4.54,75,-.4,.536,4.229,15752.30376,-4.99,-45,.2,.493,3.316,-8294.9344,-1.83,-29,.1,.491,1.744,8362.4485,1.21,21,-.1,.478,1.803,-10071.6219,-5.2,-69,.3,.454,.857,15333.2048,3.66,57,-.3,.445,2.071,8311.7707,-2.18,-19,.1,.426,.345,23452.6932,-3.44,-20,.1,.42,4.941,33733.8646,-2.56,-2,0,.413,1.642,17495.2343,-1.31,-1,0,.404,1.458,23314.1314,-.99,9,-.1,.395,2.132,38299.5714,-3.51,-6,0,.382,2.7,31781.3846,-1.92,5,0,.375,4.827,6376.2114,2.17,32,-.2,.361,3.867,16833.1753,-.97,3,0,.358,5.044,15056.4277,-4.4,-38,.2,.35,5.157,-8257.7037,-3.4,-47,.2,.344,4.233,157.7344,0,0,0,.34,2.672,13657.8484,-.58,6,0,.329,5.61,41853.0066,3.29,74,-.4,.325,5.895,-39.8149,0,0,0,.309,4.387,21500.2132,-2.79,-13,.1,.302,1.278,786.0419,0,0,0,.302,5.341,-24567.3218,-.27,-24,.1,.301,1.045,5889.8848,-1.57,-12,0,.294,4.201,-2371.2325,-3.65,-44,.2,.293,3.704,21642.1886,-6.55,-57,.2,.29,4.069,32828.4391,2.36,56,-.3,.289,3.472,31713.8105,-1.35,12,-.1,.285,5.407,-33.7814,.31,4,0,.283,5.998,-16.9207,-3.71,-44,.2,.283,2.772,38785.898,.23,37,-.2,.274,5.343,15613.742,-2.54,-16,.1,.263,3.997,25823.9257,.22,24,-.1,.254,.6,24638.3095,-1.61,2,0,.253,1.344,6447.1991,.29,10,-.1,.25,.887,141.9754,-3.76,-44,.2,.247,.317,5329.157,-2.1,-19,.1,.245,.141,36.0484,-3.71,-44,.2,.231,2.287,14357.1381,-2.49,-16,.1,.227,5.158,2.6298,0,0,0,.219,5.085,47742.8914,1.72,63,-.3,.211,2.145,6638.7244,-2.18,-19,.1,.201,4.415,39623.7495,-4.13,-14,0,.194,2.091,588.4927,0,0,0,.193,3.057,-15400.7789,-3.1,-50,0,.186,5.598,16799.3582,-.72,6,0,.185,3.886,1150.677,0,0,0,.183,1.619,7178.0144,1.52,25,0,.181,2.635,8328.3391,1.52,25,0,.181,2.077,8329.0437,1.52,25,0,.179,3.215,-9652.8694,-.9,-18,0,.176,1.716,-8815.018,-5.26,-69,0,.175,5.673,550.7553,0,0,0,.17,2.06,31295.058,-5.6,-39,0,.167,1.239,7211.7617,-.7,6,0,.165,4.499,14967.4158,-.7,6,0,.164,3.595,15540.4531,.9,31,0,.164,4.237,522.3694,0,0,0,.163,4.633,15545.0555,-2.2,-19,0,.161,.478,6428.0209,-2.2,-19,0,.158,2.03,13171.5218,-4.3,-38,0,.157,2.28,7216.3641,-3.7,-44,0,.154,5.65,7935.6705,1.5,25,0,.152,.46,29828.9047,-1.3,12,0,.151,1.19,-.7113,0,0,0,.15,1.42,23942.4334,-1,9,0,.144,2.75,7753.3529,1.5,25,0,.137,2.08,7213.7105,-2.2,-19,0,.137,1.44,7214.4152,-2.2,-19,0,.136,4.46,-1185.6162,-1.8,-22,0,.136,3.03,8000.1048,-2.2,-19,0,.134,2.83,14756.7124,-.7,6,0,.131,5.05,6821.0419,-2.2,-19,0,.128,5.99,-17214.6971,-4.9,-72,0,.127,5.35,8721.7124,1.5,25,0,.126,4.49,46628.2629,-2,19,0,.125,5.94,7149.6285,1.5,25,0,.124,1.09,49067.0695,1.1,55,0,.121,2.88,15471.7666,1.2,28,0,.111,3.92,41643.4571,7.6,125,-1,.11,1.96,8904.0299,1.5,25,0,.106,3.3,-18.0489,-2.2,-19,0,.105,2.3,-4.931,1.5,25,0,.104,2.22,-6.559,-1.9,-22,0,.101,1.44,1884.9059,-.1,0,0,.1,5.92,5471.1324,-5.9,-63,0,.099,1.12,15149.7333,-.7,6,0,.096,4.73,15508.9972,-.4,10,0,.095,5.18,7230.9835,1.5,25,0,.093,3.37,39900.5266,3.9,81,0,.092,2.01,25057.0619,2.7,53,0,.092,1.21,-79.6298,0,0,0,.092,1.65,-26310.2523,-4,-68,0,.091,1.01,42062.5561,-1,23,0,.09,6.1,29342.5781,-5,-32,0,.09,4.43,15542.402,-.7,6,0,.09,3.8,15543.1066,-.7,6,0,.089,4.15,6063.3859,-2.2,-19,0,.086,4.03,52.9691,0,0,0,.085,.49,47952.4409,-2.6,11,0,.085,1.6,7632.8154,2.1,32,0,.084,.22,14392.0773,-.7,6,0,.083,6.22,6028.4466,-4,-41,0,.083,.63,-7909.9389,2.8,26,0,.083,5.2,-77.5523,0,0,0,.082,2.74,8786.1467,-2.2,-19,0,.08,2.43,9166.5428,-2.8,-26,0,.08,3.7,-25405.1732,4.1,27,0,.078,5.68,48857.52,5.4,106,-1,.077,1.85,8315.5735,-2.2,-19,0,.075,5.46,-18191.1103,1.9,8,0,.075,1.41,-16238.6304,1.3,1,0,.074,5.06,40110.0761,-.4,30,0,.072,2.1,64.4343,-3.7,-44,0,.071,2.17,37671.2695,-3.5,-6,0,.069,1.71,16693.4313,-.7,6,0,.069,3.33,-26100.7028,-8.3,-119,1,.068,1.09,8329.4028,1.5,25,0,.068,3.62,8327.9801,1.5,25,0,.068,2.41,16833.1509,-1,3,0,.067,3.4,24709.2971,-3.5,-20,0,.067,1.65,8346.7156,-.3,3,0,.066,2.61,22547.2677,1.5,39,0,.066,3.5,15576.5113,-1,3,0,.065,5.76,33037.9886,-2,5,0,.065,4.58,8322.1325,-.3,3,0,.065,6.2,17913.9868,3,50,0,.065,1.5,22685.8295,-1,9,0,.065,2.37,7180.3058,-1.9,-15,0,.064,1.06,30943.5332,2.4,56,0,.064,1.89,8288.8765,1.5,25,0,.064,4.7,6.0335,.3,4,0,.063,2.83,8368.5063,1.5,25,0,.063,5.66,-2580.7819,.7,7,0,.062,3.78,7056.3285,-2.2,-19,0,.061,1.49,8294.91,1.8,29,0,.061,.12,-10281.1714,-.9,-18,0,.061,3.06,-8362.4729,-1.2,-21,0,.061,4.43,8170.9571,1.5,25,0,.059,5.78,-13.1179,-3.7,-44,0,.059,5.97,6625.5702,-2.2,-19,0,.058,5.01,-.508,-.3,0,0,.058,2.73,7161.0938,-2.2,-19,0,.057,.19,7214.0629,-2.2,-19,0,.057,4,22199.5029,-4.7,-35,0,.057,5.38,8119.142,5.8,76,0,.056,1.07,7542.6495,1.5,25,0,.056,.28,8486.4258,1.5,25,0,.054,4.19,16655.0816,4.6,75,0,.053,.72,7267.032,-2.2,-19,0,.053,3.12,12.6192,.6,7,0,.052,2.99,-32896.013,-1.8,-49,0,.052,3.46,1097.708,0,0,0,.051,5.37,-6443.786,-1.6,-25,0,.051,1.35,7789.401,-2.2,-19,0,.051,5.83,40042.502,.2,38,0,.051,3.63,9114.733,1.5,25,0,.05,1.51,8504.484,-2.5,-22,0,.05,5.23,16659.684,1.5,25,0,.05,1.15,7247.82,-2.5,-23,0,.047,.25,-1290.421,.3,0,0,.047,4.67,-32686.464,-6.1,-100,0,.047,3.49,548.678,0,0,0,.047,2.37,6663.308,-2.2,-19,0,.046,.98,1572.084,0,0,0,.046,2.04,14954.262,-.7,6,0,.046,3.72,6691.693,-2.2,-19,0,.045,6.19,-235.287,0,0,0,.044,2.96,32967.001,-.1,27,0,.044,3.82,-1671.943,-5.6,-66,0,.043,5.82,1179.063,0,0,0,.043,.07,34152.617,1.7,49,0,.043,3.71,6514.773,-.3,0,0,.043,5.62,15.732,-2.5,-23,0,.043,5.8,8351.233,-2.2,-19,0,.042,.27,7740.199,1.5,25,0,.042,6.14,15385.02,-.7,6,0,.042,6.13,7285.051,-4.1,-41,0,.041,1.27,32757.451,4.2,78,0,.041,4.46,8275.722,1.5,25,0,.04,.23,8381.661,1.5,25,0,.04,5.87,-766.864,2.5,29,0,.04,1.66,254.431,0,0,0,.04,.4,9027.981,-.4,0,0,.04,2.96,7777.936,1.5,25,0,.039,4.67,33943.068,6.1,100,0,.039,3.52,8326.062,1.5,25,0,.039,3.75,21013.887,-6.5,-57,0,.039,5.6,606.978,0,0,0,.039,1.19,8331.321,1.5,25,0,.039,2.84,7211.433,-2.2,-19,0,.038,.67,7216.693,-2.2,-19,0,.038,6.22,25161.867,.6,28,0,.038,4.4,7806.322,1.5,25,0,.038,4.16,9179.168,-2.2,-19,0,.037,4.73,14991.999,-.7,6,0,.036,.35,67.514,-.6,-7,0,.036,3.7,25266.611,-1.6,0,0,.036,5.39,16328.796,-.7,6,0,.035,1.44,7174.248,-2.2,-19,0,.035,5,15684.73,-4.4,-38,0,.035,.39,-15.419,-2.2,-19,0,.035,6.07,15020.385,-.7,6,0,.034,6.01,7371.797,-2.2,-19,0,.034,.96,-16623.626,-3.4,-54,0,.033,6.24,9479.368,1.5,25,0,.033,3.21,23661.896,5.2,82,0,.033,4.06,8311.418,-2.2,-19,0,.033,2.4,1965.105,0,0,0,.033,5.17,15489.785,-.7,6,0,.033,5.03,21986.54,.9,31,0,.033,4.1,16691.14,2.7,46,0,.033,5.13,47114.589,1.7,63,0,.033,4.45,8917.184,1.5,25,0,.033,4.23,2.078,0,0,0,.032,2.33,75.251,1.5,25,0,.032,2.1,7253.878,-2.2,-19,0,.032,3.11,-.224,1.5,25,0,.032,4.43,16640.462,-.7,6,0,.032,5.68,8328.363,0,0,0,.031,5.32,8329.02,3,50,0,.031,3.7,16118.093,-.7,6,0,.03,3.67,16721.817,-.7,6,0,.03,5.27,-1881.492,-1.2,-15,0,.03,5.72,8157.839,-2.2,-19,0,.029,5.73,-18400.313,-6.7,-94,0,.029,2.76,16,-2.2,-19,0,.029,1.75,8879.447,1.5,25,0,.029,.32,8851.061,1.5,25,0,.029,.9,14704.903,3.7,57,0,.028,2.9,15595.723,-.7,6,0,.028,5.88,16864.631,.2,24,0,.028,.63,16869.234,-2.8,-26,0,.028,4.04,-18609.863,-2.4,-43,0,.027,5.83,6727.736,-5.9,-63,0,.027,6.12,418.752,4.3,51,0,.027,.14,41157.131,3.9,81,0,.026,3.8,15.542,0,0,0,.026,1.68,50181.698,4.8,99,-1,.026,.32,315.469,0,0,0,.025,5.67,19.188,.3,0,0,.025,3.16,62.133,-2.2,-19,0,.025,3.76,15502.939,-.7,6,0,.025,4.53,45999.961,-2,19,0,.024,3.21,837.851,-4.4,-51,0,.024,2.82,38157.596,.3,37,0,.024,5.21,15540.124,-.7,6,0,.024,.26,14218.576,0,13,0,.024,3.01,15545.384,-.7,6,0,.024,1.16,-17424.247,-.6,-21,0,.023,2.34,-67.574,.6,7,0,.023,2.44,18.024,-1.9,-22,0,.023,3.7,469.4,0,0,0,.023,.72,7136.511,-2.2,-19,0,.023,4.5,15582.569,-.7,6,0,.023,2.8,-16586.395,-4.9,-72,0,.023,1.51,80.182,0,0,0,.023,1.09,5261.583,-1.5,-12,0,.023,.56,54956.954,-.5,44,0,.023,4.01,8550.86,-2.2,-19,0,.023,4.46,38995.448,-4.1,-14,0,.023,3.82,2358.126,0,0,0,.022,3.77,32271.125,.5,34,0,.022,.82,15935.775,-.7,6,0,.022,1.07,24013.421,-2.9,-13,0,.022,.4,8940.078,-2.2,-19,0,.022,2.06,15700.489,-.7,6,0,.022,4.27,15124.002,-5,-45,0,.021,1.16,56071.583,3.2,88,0,.021,5.58,9572.189,-2.2,-19,0,.02,1.7,-17.273,-3.7,-44,0,.02,3.05,214.617,0,0,0,.02,4.41,8391.048,-2.2,-19,0,.02,5.95,23869.145,2.4,56,0,.02,.42,40947.927,-4.7,-21,0,.019,1.39,5818.897,.3,10,0,.019,.71,23873.747,-.7,6,0,.019,2.81,7291.615,-2.2,-19,0,.019,5.09,8428.018,-2.2,-19,0,.019,4.14,6518.187,-1.6,-12,0,.019,3.85,21.33,0,0,0,.018,.66,14445.046,-.7,6,0,.018,1.65,.966,-4,-48,0,.018,5.64,-17143.709,-6.8,-94,0,.018,6.01,7736.432,-2.2,-19,0,.018,2.74,31153.083,-1.9,5,0,.018,4.58,6116.355,-2.2,-19,0,.018,2.28,46.401,.3,0,0,.018,3.8,10213.597,1.4,25,0,.018,2.84,56281.132,-1.1,36,0,.018,3.53,8249.062,1.5,25,0,.017,4.43,20871.911,-3,-13,0,.017,4.44,627.596,0,0,0,.017,1.85,628.308,0,0,0,.017,1.19,8408.321,2,25,0,.017,1.95,7214.056,-2,-19,0,.017,1.57,7214.07,-2,-19,0,.017,1.65,13870.811,-6,-60,0,.017,.3,22.542,-4,-44,0,.017,2.62,-119.445,0,0,0,.016,4.87,5747.909,2,32,0,.016,4.45,14339.108,-1,6,0,.016,1.83,41366.68,0,30,0,.016,4.53,16309.618,-3,-23,0,.016,2.54,15542.754,-1,6,0,.016,6.05,1203.646,0,0,0,.015,5.2,2751.147,0,0,0,.015,1.8,-10699.924,-5,-69,0,.015,.4,22824.391,-3,-20,0,.015,2.1,30666.756,-6,-39,0,.015,2.1,6010.417,-2,-19,0,.015,.7,-23729.47,-5,-75,0,.015,1.4,14363.691,-1,6,0,.015,5.8,16900.689,-2,0,0,.015,5.2,23800.458,3,53,0,.015,5.3,6035,-2,-19,0,.015,1.2,8251.139,2,25,0,.015,3.6,-8.86,0,0,0,.015,.8,882.739,0,0,0,.015,3,1021.329,0,0,0,.015,.6,23296.107,1,31,0,.014,5.4,7227.181,2,25,0,.014,.1,7213.352,-2,-19,0,.014,4,15506.706,3,50,0,.014,3.4,7214.774,-2,-19,0,.014,4.6,6665.385,-2,-19,0,.014,.1,-8.636,-2,-22,0,.014,3.1,15465.202,-1,6,0,.014,4.9,508.863,0,0,0,.014,3.5,8406.244,2,25,0,.014,1.3,13313.497,-8,-82,0,.014,2.8,49276.619,-3,0,0,.014,.1,30528.194,-3,-10,0,.013,1.7,25128.05,1,31,0,.013,2.9,14128.405,-1,6,0,.013,3.4,57395.761,3,80,0,.013,2.7,13029.546,-1,6,0,.013,3.9,7802.556,-2,-19,0,.013,1.6,8258.802,-2,-19,0,.013,2.2,8417.709,-2,-19,0,.013,.7,9965.21,-2,-19,0,.013,3.4,50391.247,0,48,0,.013,3,7134.433,-2,-19,0,.013,2.9,30599.182,-5,-31,0,.013,3.6,-9723.857,1,0,0,.013,4.8,7607.084,-2,-19,0,.012,.8,23837.689,1,35,0,.012,3.6,4.409,-4,-44,0,.012,5,16657.031,3,50,0,.012,4.4,16657.735,3,50,0,.012,1.1,15578.803,-4,-38,0,.012,6,-11.49,0,0,0,.012,1.9,8164.398,0,0,0,.012,2.4,31852.372,-4,-17,0,.012,2.4,6607.085,-2,-19,0,.012,4.2,8359.87,0,0,0,.012,.5,5799.713,-2,-19,0,.012,2.7,7220.622,0,0,0,.012,4.3,-139.72,0,0,0,.012,2.3,13728.836,-2,-16,0,.011,3.6,14912.146,1,31,0,.011,4.7,14916.748,-2,-19,0],[1.6768,4.66926,628.301955,-.0266,.1,-.005,.51642,3.3721,6585.76091,-2.158,-18.9,.09,.41383,5.7277,14914.452335,-.635,6.2,-.04,.37115,3.9695,7700.389469,1.55,25,-.12,.2756,.7416,8956.99338,1.496,25.1,-.13,.24599,4.2253,-2.3012,1.523,25.1,-.12,.07118,.1443,7842.36482,-2.211,-19,.08,.06128,2.4998,16171.05625,-.688,6,0,.04516,.443,8399.6791,-.36,3,0,.04048,5.771,14286.15038,-.61,6,0,.03747,4.626,1256.60391,-.05,0,0,.03707,3.415,5957.45895,-2.13,-19,.1,.03649,1.8,23243.14376,.89,31,-.2,.02438,.042,16029.08089,3.07,50,-.2,.02165,1.017,-1742.93051,-3.68,-44,.2,.01923,3.097,17285.6848,3.02,50,-.3,.01692,1.28,.3286,1.52,25,-.1,.01361,.298,8326.3902,3.05,50,-.2,.01293,4.013,7072.0875,1.58,25,-.1,.01276,4.413,8330.9926,0,0,0,.0127,.101,8470.6668,-2.24,-19,.1,.01097,1.203,22128.5152,-2.82,-13,0,.01088,2.545,15542.7543,-.66,6,0,.00835,.19,7214.0629,-2.18,-19,.1,.00734,4.855,24499.7477,.83,31,-.2,.00686,5.13,13799.8238,-4.34,-38,.2,.00631,.93,-486.3266,-3.73,-44,0,.00585,.699,9585.2953,1.5,25,0,.00566,4.073,8328.3391,1.5,25,0,.00566,.638,8329.0437,1.5,25,0,.00539,2.472,-1952.48,.6,7,0,.00509,2.88,-.7113,0,0,0,.00469,3.56,30457.2066,-1.3,12,0,.00387,.78,-.3523,0,0,0,.00378,1.84,22614.8418,.9,31,0,.00362,5.53,-695.8761,.6,7,0,.00317,2.8,16728.3705,1.2,28,0,.00303,6.07,157.7344,0,0,0,.003,2.53,33.757,-.3,-4,0,.00295,4.16,31571.8352,2.4,56,0,.00289,5.98,7211.7617,-.7,6,0,.00285,2.06,15540.4531,.9,31,0,.00283,2.65,2.6298,0,0,0,.00282,6.17,15545.0555,-2.2,-19,0,.00278,1.23,-39.8149,0,0,0,.00272,3.82,7216.3641,-3.7,-44,0,.0027,4.37,70.9877,-1.9,-22,0,.00256,5.81,13657.8484,-.6,6,0,.00244,5.64,-.2237,1.5,25,0,.0024,2.96,8311.7707,-2.2,-19,0,.00239,.87,-33.7814,.3,4,0,.00216,2.31,15.9995,-2.2,-19,0,.00186,3.46,5329.157,-2.1,-19,0,.00169,2.4,24357.772,4.6,75,0,.00161,5.8,8329.403,1.5,25,0,.00161,5.2,8327.98,1.5,25,0,.0016,4.26,23385.119,-2.9,-13,0,.00156,1.26,550.755,0,0,0,.00155,1.25,21500.213,-2.8,-13,0,.00152,.6,-16.921,-3.7,-44,0,.0015,2.71,-79.63,0,0,0,.0015,5.29,15.542,0,0,0,.00148,1.06,-2371.232,-3.7,-44,0,.00141,.77,8328.691,1.5,25,0,.00141,3.67,7143.075,-.3,0,0,.00138,5.45,25614.376,4.5,75,0,.00129,4.9,23871.446,.9,31,0,.00126,4.03,141.975,-3.8,-44,0,.00124,6.01,522.369,0,0,0,.0012,4.94,-10071.622,-5.2,-69,0,.00118,5.07,-15.419,-2.2,-19,0,.00107,3.49,23452.693,-3.4,-20,0,.00104,4.78,17495.234,-1.3,0,0,.00103,1.44,-18.049,-2.2,-19,0,.00102,5.63,15542.402,-.7,6,0,.00102,2.59,15543.107,-.7,6,0,.001,4.11,-6.559,-1.9,-22,0,97e-5,.08,15400.779,3.1,50,0,96e-5,5.84,31781.385,-1.9,5,0,94e-5,1.08,8328.363,0,0,0,94e-5,2.46,16799.358,-.7,6,0,94e-5,1.69,6376.211,2.2,32,0,93e-5,3.64,8329.02,3,50,0,93e-5,2.65,16655.082,4.6,75,0,9e-4,1.9,15056.428,-4.4,-38,0,89e-5,1.59,52.969,0,0,0,88e-5,2.02,-8257.704,-3.4,-47,0,88e-5,3.02,7213.711,-2.2,-19,0,87e-5,.5,7214.415,-2.2,-19,0,87e-5,.49,16659.684,1.5,25,0,82e-5,5.64,-4.931,1.5,25,0,79e-5,5.17,13171.522,-4.3,-38,0,76e-5,3.6,29828.905,-1.3,12,0,76e-5,4.08,24567.322,.3,24,0,76e-5,4.58,1884.906,-.1,0,0,73e-5,.33,31713.811,-1.4,12,0,73e-5,.93,32828.439,2.4,56,0,71e-5,5.91,38785.898,.2,37,0,69e-5,2.2,15613.742,-2.5,-16,0,66e-5,3.87,15.732,-2.5,-23,0,66e-5,.86,25823.926,.2,24,0,65e-5,2.52,8170.957,1.5,25,0,63e-5,.18,8322.132,-.3,0,0,6e-4,5.84,8326.062,1.5,25,0,6e-4,5.15,8331.321,1.5,25,0,6e-4,2.18,8486.426,1.5,25,0,58e-5,2.3,-1.731,-4,-44,0,58e-5,5.43,14357.138,-2,-16,0,57e-5,3.09,8294.91,2,29,0,57e-5,4.67,-8362.473,-1,-21,0,56e-5,4.15,16833.151,-1,0,0,54e-5,1.93,7056.329,-2,-19,0,54e-5,5.27,8315.574,-2,-19,0,52e-5,5.6,8311.418,-2,-19,0,52e-5,2.7,-77.552,0,0,0,51e-5,4.3,7230.984,2,25,0,5e-4,.4,-.508,0,0,0,49e-5,5.4,7211.433,-2,-19,0,49e-5,4.4,7216.693,-2,-19,0,49e-5,4.3,16864.631,0,24,0,49e-5,2.2,16869.234,-3,-26,0,47e-5,6.1,627.596,0,0,0,47e-5,5,12.619,1,7,0,45e-5,4.9,-8815.018,-5,-69,0,44e-5,1.6,62.133,-2,-19,0,42e-5,2.9,-13.118,-4,-44,0,42e-5,4.1,-119.445,0,0,0,41e-5,4.3,22756.817,-3,-13,0,41e-5,3.6,8288.877,2,25,0,4e-4,.5,6663.308,-2,-19,0,4e-4,1.1,8368.506,2,25,0,39e-5,4.1,6443.786,2,25,0,39e-5,3.1,16657.383,3,50,0,38e-5,.1,16657.031,3,50,0,38e-5,3,16657.735,3,50,0,38e-5,4.6,23942.433,-1,9,0,37e-5,4.3,15385.02,-1,6,0,37e-5,5,548.678,0,0,0,36e-5,1.8,7213.352,-2,-19,0,36e-5,1.7,7214.774,-2,-19,0,35e-5,1.1,7777.936,2,25,0,35e-5,1.6,-8.86,0,0,0,35e-5,4.4,23869.145,2,56,0,35e-5,2,6691.693,-2,-19,0,34e-5,1.3,-1185.616,-2,-22,0,34e-5,2.2,23873.747,-1,6,0,33e-5,2,-235.287,0,0,0,33e-5,3.1,17913.987,3,50,0,33e-5,1,8351.233,-2,-19,0],[.00487,4.6693,628.30196,-.027,0,-.01,.00228,2.6746,-2.3012,1.523,25,-.12,.0015,3.372,6585.76091,-2.16,-19,.1,.0012,5.728,14914.45233,-.64,6,0,.00108,3.969,7700.38947,1.55,25,-.1,8e-4,.742,8956.99338,1.5,25,-.1,254e-6,6.002,.3286,1.52,25,-.1,21e-5,.144,7842.3648,-2.21,-19,0,18e-5,2.5,16171.0562,-.7,6,0,13e-5,.44,8399.6791,-.4,3,0,126e-6,5.03,8326.3902,3,50,0,12e-5,5.77,14286.1504,-.6,6,0,118e-6,5.96,8330.9926,0,0,0,11e-5,1.8,23243.1438,.9,31,0,11e-5,3.42,5957.459,-2.1,-19,0,11e-5,4.63,1256.6039,-.1,0,0,99e-6,4.7,-.7113,0,0,0,7e-5,.04,16029.0809,3.1,50,0,7e-5,5.14,8328.3391,1.5,25,0,7e-5,5.85,8329.0437,1.5,25,0,6e-5,1.02,-1742.9305,-3.7,-44,0,6e-5,3.1,17285.6848,3,50,0,54e-6,5.69,-.352,0,0,0,43e-6,.52,15.542,0,0,0,41e-6,2.03,2.63,0,0,0,4e-5,.1,8470.667,-2.2,-19,0,4e-5,4.01,7072.088,1.6,25,0,36e-6,2.93,-8.86,-.3,0,0,3e-5,1.2,22128.515,-2.8,-13,0,3e-5,2.54,15542.754,-.7,6,0,27e-6,4.43,7211.762,-.7,6,0,26e-6,.51,15540.453,.9,31,0,26e-6,1.44,15545.055,-2.2,-19,0,25e-6,5.37,7216.364,-3.7,-44,0],[12e-6,1.041,-2.3012,1.52,25,-.1,17e-7,.31,-.711,0,0,0]]),n(re,"QI_KB",[1640650.479938,15.218425,1642476.703182,15.21874996,1683430.515601,15.218750011,1752157.640664,15.218749978,1807675.003759,15.218620279,1883627.765182,15.218612292,1907369.1281,15.218449176,1936603.140413,15.218425,1939145.52418,15.218466998,1947180.7983,15.218524844,1964362.041824,15.218533526,1987372.340971,15.218513908,1999653.819126,15.218530782,2007445.469786,15.218535181,2021324.917146,15.218526248,2047257.232342,15.218519654,2070282.898213,15.218425,2073204.87285,15.218515221,2080144.500926,15.218530782,2086703.688963,15.218523776,2110033.182763,15.218425,2111190.300888,15.218425,2113731.271005,15.218515671,2120670.840263,15.218425,2123973.309063,15.218425,2125068.997336,15.218477932,2136026.312633,15.218472436,2156099.495538,15.218425,2159021.324663,15.218425,2162308.575254,15.218461742,2178485.706538,15.218425,2178759.662849,15.218445786,2185334.0208,15.218425,2187525.481425,15.218425,2188621.191481,15.218437494,2322147.76]),n(re,"QB",re.decode("FrcFs22AFsckF2tsDtFqEtF1posFdFgiFseFtmelpsEfhkF2anmelpFlF1ikrotcnEqEq2FfqmcDsrFor22FgFrcgDscFs22FgEeFtE2sfFs22sCoEsaF2tsD1FpeE2eFsssEciFsFnmelpFcFhkF2tcnEqEpFgkrotcnEqrEtFermcDsrE222FgBmcmr22DaEfnaF222sD1FpeForeF2tssEfiFpEoeFssD1iFstEqFppDgFstcnEqEpFg11FscnEqrAoAF2ClAEsDmDtCtBaDlAFbAEpAAAAAD2FgBiBqoBbnBaBoAAAAAAAEgDqAdBqAFrBaBoACdAAf1AACgAAAeBbCamDgEifAE2AABa1C1BgFdiAAACoCeE1ADiEifDaAEqAAFe1AcFbcAAAAAF1iFaAAACpACmFmAAAAAAAACrDaAAADG0")),n(re,"SHUO_KB",[1457698.231017,29.53067166,1546082.512234,29.53085106,1640640.7353,29.5306,1642472.151543,29.53085439,1683430.5093,29.53086148,1752148.041079,29.53085097,1807665.420323,29.53059851,1883618.1141,29.5306,1907360.7047,29.5306,1936596.2249,29.5306,1939135.6753,29.5306,1947168]),n(re,"SB",re.decode("EqoFscDcrFpmEsF2DfFideFelFpFfFfFiaipqti1ksttikptikqckstekqttgkqttgkqteksttikptikq2fjstgjqttjkqttgkqtekstfkptikq2tijstgjiFkirFsAeACoFsiDaDiADc1AFbBfgdfikijFifegF1FhaikgFag1E2btaieeibggiffdeigFfqDfaiBkF1kEaikhkigeidhhdiegcFfakF1ggkidbiaedksaFffckekidhhdhdikcikiakicjF1deedFhFccgicdekgiFbiaikcfi1kbFibefgEgFdcFkFeFkdcfkF1kfkcickEiFkDacFiEfbiaejcFfffkhkdgkaiei1ehigikhdFikfckF1dhhdikcfgjikhfjicjicgiehdikcikggcifgiejF1jkieFhegikggcikFegiegkfjebhigikggcikdgkaFkijcfkcikfkcifikiggkaeeigefkcdfcfkhkdgkegieidhijcFfakhfgeidieidiegikhfkfckfcjbdehdikggikgkfkicjicjF1dbidikFiggcifgiejkiegkigcdiegfggcikdbgfgefjF1kfegikggcikdgFkeeijcfkcikfkekcikdgkabhkFikaffcfkhkdgkegbiaekfkiakicjhfgqdq2fkiakgkfkhfkfcjiekgFebicggbedF1jikejbbbiakgbgkacgiejkijjgigfiakggfggcibFifjefjF1kfekdgjcibFeFkijcfkfhkfkeaieigekgbhkfikidfcjeaibgekgdkiffiffkiakF1jhbakgdki1dj1ikfkicjicjieeFkgdkicggkighdF1jfgkgfgbdkicggfggkidFkiekgijkeigfiskiggfaidheigF1jekijcikickiggkidhhdbgcfkFikikhkigeidieFikggikhkffaffijhidhhakgdkhkijF1kiakF1kfheakgdkifiggkigicjiejkieedikgdfcggkigieeiejfgkgkigbgikicggkiaideeijkefjeijikhkiggkiaidheigcikaikffikijgkiahi1hhdikgjfifaakekighie1hiaikggikhkffakicjhiahaikggikhkijF1kfejfeFhidikggiffiggkigicjiekgieeigikggiffiggkidheigkgfjkeigiegikifiggkidhedeijcfkFikikhkiggkidhh1ehigcikaffkhkiggkidhh1hhigikekfiFkFikcidhh1hitcikggikhkfkicjicghiediaikggikhkijbjfejfeFhaikggifikiggkigiejkikgkgieeigikggiffiggkigieeigekijcijikggifikiggkideedeijkefkfckikhkiggkidhh1ehijcikaffkhkiggkidhh1hhigikhkikFikfckcidhh1hiaikgjikhfjicjicgiehdikcikggifikigiejfejkieFhegikggifikiggfghigkfjeijkhigikggifikiggkigieeijcijcikfksikifikiggkidehdeijcfdckikhkiggkhghh1ehijikifffffkhsFngErD1pAfBoDd1BlEtFqA2AqoEpDqElAEsEeB2BmADlDkqBtC1FnEpDqnEmFsFsAFnllBbFmDsDiCtDmAB2BmtCgpEplCpAEiBiEoFqFtEqsDcCnFtADnFlEgdkEgmEtEsCtDmADqFtAFrAtEcCqAE1BoFqC1F1DrFtBmFtAC2ACnFaoCgADcADcCcFfoFtDlAFgmFqBq2bpEoAEmkqnEeCtAE1bAEqgDfFfCrgEcBrACfAAABqAAB1AAClEnFeCtCgAADqDoBmtAAACbFiAAADsEtBqAB2FsDqpFqEmFsCeDtFlCeDtoEpClEqAAFrAFoCgFmFsFqEnAEcCqFeCtFtEnAEeFtAAEkFnErAABbFkADnAAeCtFeAfBoAEpFtAABtFqAApDcCGJ"));let ne=re;const se=class t extends h{constructor(e,i,r){super(t.NAMES,i),n(this,"cursoryJulianDay"),r?this.cursoryJulianDay=r:(this.cursoryJulianDay=0,this.initByYear(e,"number"==typeof i?i:this.index))}initByYear(t,e){const i=Math.floor(365.2422*(t-2e3)+180);let r=365.2422*Math.floor((i-355+183)/365.2422)+355;ne.calcQi(r)>i&&(r-=365.2422),this.cursoryJulianDay=ne.calcQi(r+15.2184*e)}static fromIndex(e,i){return new t(e,i)}static fromName(e,i){return new t(e,i)}next(e){return new t(0,this.nextIndex(e),this.cursoryJulianDay+15.2184*e)}isJie(){return this.index%2==1}isQi(){return this.index%2==0}getJulianDay(){return ie.fromJulianDay(ne.qiAccurate2(this.cursoryJulianDay)+ie.J2000)}getCursoryJulianDay(){return this.cursoryJulianDay}};n(se,"NAMES",["冬至","小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪"]);let ae=se;class oe extends o{constructor(t,e){super(t,e)}getSolarTerm(){return this.culture}}class he extends a{constructor(t){if(super(),n(this,"year"),t<1||t>9999)throw new Error(`illegal solar year: ${t}`);this.year=t}static fromYear(t){return new he(t)}getYear(){return this.year}getDayCount(){return 1582===this.year?355:this.isLeap()?366:365}isLeap(){return this.year<1600?this.year%4==0:this.year%4==0&&this.year%100!=0||this.year%400==0}getName(){return`${this.year}年`}next(t){return he.fromYear(this.year+t)}getMonths(){const t=[];for(let e=1;e<13;e++)t.push(fe.fromYm(this.year,e));return t}getSeasons(){const t=[];for(let e=0;e<4;e++)t.push(ge.fromIndex(this.year,e));return t}getHalfYears(){const t=[];for(let e=0;e<2;e++)t.push(de.fromIndex(this.year,e));return t}}const le=class t extends a{constructor(t,e){if(super(),n(this,"year"),n(this,"index"),e<0||e>1)throw new Error(`illegal solar half year index: ${e}`);this.year=he.fromYear(t),this.index=e}static fromIndex(e,i){return new t(e,i)}getSolarYear(){return this.year}getYear(){return this.year.getYear()}getIndex(){return this.index}getName(){return t.NAMES[this.index]}toString(){return this.year.toString()+this.getName()}next(e){let i=this.index,r=this.getYear();return 0!=e&&(i+=e,r+=~~(i/2),i%=2,i<0&&(i+=2,r-=1)),t.fromIndex(r,i)}getMonths(){const t=[],e=this.year.getYear();for(let i=1;i<7;i++)t.push(fe.fromYm(e,6*this.index+i));return t}getSeasons(){const t=[],e=this.year.getYear();for(let i=0;i<2;i++)t.push(ge.fromIndex(e,2*this.index+i));return t}};n(le,"NAMES",["上半年","下半年"]);let de=le;const ce=class t extends a{constructor(t,e){if(super(),n(this,"year"),n(this,"index"),e<0||e>3)throw new Error(`illegal solar season index: ${e}`);this.year=he.fromYear(t),this.index=e}static fromIndex(e,i){return new t(e,i)}getSolarYear(){return this.year}getYear(){return this.year.getYear()}getIndex(){return this.index}getName(){return t.NAMES[this.index]}toString(){return this.year.toString()+this.getName()}next(e){let i=this.index,r=this.year.getYear();return 0!=e&&(i+=e,r+=~~(i/4),i%=4,i<0&&(i+=4,r-=1)),t.fromIndex(r,i)}getMonths(){const t=[],e=this.year.getYear();for(let i=1;i<4;i++)t.push(fe.fromYm(e,3*this.index+i));return t}};n(ce,"NAMES",["一季度","二季度","三季度","四季度"]);let ge=ce;const ue=class t extends a{constructor(t,e){if(super(),n(this,"year"),n(this,"month"),e<1||e>12)throw new Error(`illegal solar month: ${e}`);this.year=he.fromYear(t),this.month=e}static fromYm(e,i){return new t(e,i)}getSolarYear(){return this.year}getYear(){return this.year.getYear()}getMonth(){return this.month}getDayCount(){if(1582===this.getYear()&&10===this.month)return 21;let e=t.DAYS[this.getIndexInYear()];return 2===this.month&&this.year.isLeap()&&e++,e}getIndexInYear(){return this.month-1}getSeason(){return ge.fromIndex(this.getYear(),~~(this.getIndexInYear()/3))}getWeekCount(t){return Math.ceil((this.indexOf(pe.fromYmd(this.getYear(),this.month,1).getWeek().getIndex()-t,7)+this.getDayCount())/7)}getName(){return t.NAMES[this.getIndexInYear()]}toString(){return this.year.toString()+this.getName()}next(e){let i=this.month,r=this.getYear();return 0!=e&&(i+=e,r+=~~(i/12),i%=12,i<1&&(i+=12,r--)),t.fromYm(r,i)}getWeeks(t){const e=[],i=this.getYear();for(let r=0,n=this.getWeekCount(t);r<n;r++)e.push(Ce.fromYm(i,this.month,r,t));return e}getDays(){const t=[],e=this.getYear();for(let i=1,r=this.getDayCount();i<=r;i++)t.push(pe.fromYmd(e,this.month,i));return t}};n(ue,"NAMES",["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]),n(ue,"DAYS",[31,28,31,30,31,30,31,31,30,31,30,31]);let fe=ue;const Fe=class t extends a{constructor(t,e,i,r){if(super(),n(this,"month"),n(this,"index"),n(this,"start"),i<0||i>5)throw new Error(`illegal solar week index: ${i}`);if(r<0||r>6)throw new Error(`illegal solar week start: ${r}`);const s=fe.fromYm(t,e);if(i>=s.getWeekCount(r))throw new Error(`illegal solar week index: ${i} in month: ${s.toString()}`);this.month=s,this.index=i,this.start=C.fromIndex(r)}static fromYm(e,i,r,n){return new t(e,i,r,n)}getSolarMonth(){return this.month}getYear(){return this.month.getYear()}getMonth(){return this.month.getMonth()}getIndex(){return this.index}getIndexInYear(){let e=0;const i=this.getFirstDay();let r=t.fromYm(this.getYear(),1,0,this.start.getIndex());for(;!r.getFirstDay().equals(i);)r=r.next(1),e++;return e}getStart(){return this.start}getName(){return t.NAMES[this.index]}toString(){return this.month.toString()+this.getName()}next(e){const i=this.start.getIndex();let r=this.index,n=this.month;if(e>0){r+=e;let t=n.getWeekCount(i);for(;r>=t;)r-=t,n=n.next(1),pe.fromYmd(n.getYear(),n.getMonth(),1).getWeek().equals(this.start)||(r+=1),t=n.getWeekCount(i)}else if(e<0)for(r+=e;r<0;)pe.fromYmd(n.getYear(),n.getMonth(),1).getWeek().equals(this.start)||(r-=1),n=n.next(-1),r+=n.getWeekCount(i);return t.fromYm(n.getYear(),n.getMonth(),r,i)}getFirstDay(){const t=pe.fromYmd(this.getYear(),this.getMonth(),1);return t.next(7*this.index-this.indexOf(t.getWeek().getIndex()-this.start.getIndex(),7))}getDays(){const t=[],e=this.getFirstDay();t.push(e);for(let i=1;i<7;i++)t.push(e.next(i));return t}equals(t){return t&&t.getFirstDay().equals(this.getFirstDay())}};n(Fe,"NAMES",["第一周","第二周","第三周","第四周","第五周","第六周"]);let Ce=Fe;const me=class t extends a{constructor(t,e,i){if(super(),n(this,"month"),n(this,"day"),i<1)throw new Error(`illegal solar day: ${t}-${e}-${i}`);const r=fe.fromYm(t,e);if(1582===t&&10===e){if(i>4&&i<15||i>31)throw new Error(`illegal solar day: ${t}-${e}-${i}`)}else if(i>r.getDayCount())throw new Error(`illegal solar day: ${t}-${e}-${i}`);this.month=r,this.day=i}static fromYmd(e,i,r){return new t(e,i,r)}getSolarMonth(){return this.month}getYear(){return this.month.getYear()}getMonth(){return this.month.getMonth()}getDay(){return this.day}getWeek(){return this.getJulianDay().getWeek()}getConstellation(){let t=11;const e=100*this.getMonth()+this.day;return e>=321&&e<=419?t=0:e>=420&&e<=520?t=1:e>=521&&e<=621?t=2:e>=622&&e<=722?t=3:e>=723&&e<=822?t=4:e>=823&&e<=922?t=5:e>=923&&e<=1023?t=6:e>=1024&&e<=1122?t=7:e>=1123&&e<=1221?t=8:e>=1222||e<=119?t=9:e<=218&&(t=10),S.fromIndex(t)}getName(){return t.NAMES[this.day-1]}toString(){return this.month.toString()+this.getName()}next(t){return this.getJulianDay().next(t).getSolarDay()}isBefore(t){const e=this.getYear(),i=t.getYear();if(e!==i)return e<i;const r=this.getMonth(),n=t.getMonth();return r!==n?r<n:this.day<t.getDay()}isAfter(t){const e=this.getYear(),i=t.getYear();if(e!==i)return e>i;const r=this.getMonth(),n=t.getMonth();return r!==n?r>n:this.day>t.getDay()}getTerm(){return this.getTermDay().getSolarTerm()}getTermDay(){let t=this.getYear(),e=2*this.getMonth();24==e&&(t+=1,e=0);let i=ae.fromIndex(t,e),r=i.getJulianDay().getSolarDay();for(;this.isBefore(r);)i=i.next(-1),r=i.getJulianDay().getSolarDay();return new oe(i,this.subtract(r))}getSolarWeek(e){const i=this.getYear(),r=this.getMonth();return Ce.fromYm(i,r,Math.ceil((this.day+t.fromYmd(i,r,1).getWeek().next(-e).getIndex())/7)-1,e)}getPhenologyDay(){const t=this.getTerm();let e=this.subtract(t.getJulianDay().getSolarDay()),i=~~(e/5);return i>2&&(i=2),e-=5*i,new Tt(Bt.fromIndex(3*t.getIndex()+i),e)}getDogDay(){const t=ae.fromIndex(this.getYear(),12);let e=t.getJulianDay().getSolarDay(),i=6-e.getLunarDay().getSixtyCycle().getHeavenStem().getIndex();i<0&&(i+=10),i+=20,e=e.next(i);let r=this.subtract(e);if(r<0)return null;if(r<10)return new Ct(Ft.fromIndex(0),r);if(e=e.next(10),r=this.subtract(e),r<10)return new Ct(Ft.fromIndex(1),r);if(e=e.next(10),r=this.subtract(e),t.next(3).getJulianDay().getSolarDay().isAfter(e)){if(r<10)return new Ct(Ft.fromIndex(1),r+10);e=e.next(10),r=this.subtract(e)}return r<10?new Ct(Ft.fromIndex(2),r):null}getPlumRainDay(){const t=ae.fromIndex(this.getYear(),11);let e=t.getJulianDay().getSolarDay(),i=2-e.getLunarDay().getSixtyCycle().getHeavenStem().getIndex();i<0&&(i+=10),e=e.next(i);let r=t.next(2).getJulianDay().getSolarDay();return i=7-r.getLunarDay().getSixtyCycle().getEarthBranch().getIndex(),i<0&&(i+=12),r=r.next(i),this.isBefore(e)||this.isAfter(r)?null:this.equals(r)?new At(pt.fromIndex(1),0):new At(pt.fromIndex(0),this.subtract(e))}getNineDay(){const t=this.getYear();let e=ae.fromIndex(t+1,0).getJulianDay().getSolarDay();this.isBefore(e)&&(e=ae.fromIndex(t,0).getJulianDay().getSolarDay());const i=e.next(81);if(this.isBefore(e)||!this.isBefore(i))return null;const r=this.subtract(e);return new _t(vt.fromIndex(~~(r/9)),r%9)}getIndexInYear(){return this.subtract(t.fromYmd(this.getYear(),1,1))}subtract(t){return~~this.getJulianDay().subtract(t.getJulianDay())}getJulianDay(){return ie.fromYmdHms(this.getYear(),this.getMonth(),this.day,0,0,0)}getLunarDay(){let t=Kt.fromYm(this.getYear(),this.getMonth()),e=this.subtract(t.getFirstJulianDay().getSolarDay());for(;e<0;)t=t.next(-1),e+=t.getDayCount();return Qt.fromYmd(t.getYear(),t.getMonthWithLeap(),e+1)}getLegalHoliday(){return ye.fromYmd(this.getYear(),this.getMonth(),this.day)}getFestival(){return De.fromYmd(this.getYear(),this.getMonth(),this.day)}};n(me,"NAMES",["1日","2日","3日","4日","5日","6日","7日","8日","9日","10日","11日","12日","13日","14日","15日","16日","17日","18日","19日","20日","21日","22日","23日","24日","25日","26日","27日","28日","29日","30日","31日"]);let pe=me;class Ae extends a{constructor(t,e,i,r,s,a){if(super(),n(this,"day"),n(this,"hour"),n(this,"minute"),n(this,"second"),r<0||r>23)throw new Error(`illegal hour: ${r}`);if(s<0||s>59)throw new Error(`illegal minute: ${s}`);if(a<0||a>59)throw new Error(`illegal second: ${a}`);this.day=pe.fromYmd(t,e,i),this.hour=r,this.minute=s,this.second=a}static fromYmdHms(t,e,i,r,n,s){return new Ae(t,e,i,r,n,s)}getSolarDay(){return this.day}getYear(){return this.day.getYear()}getMonth(){return this.day.getMonth()}getDay(){return this.day.getDay()}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getName(){return`${(this.hour<10?"0":"")+this.hour}:${(this.minute<10?"0":"")+this.minute}:${(this.second<10?"0":"")+this.second}`}toString(){return`${this.day.toString()} ${this.getName()}`}next(t){if(0==t)return Ae.fromYmdHms(this.getYear(),this.getMonth(),this.getDay(),this.hour,this.minute,this.second);let e=this.second+t,i=this.minute+~~(e/60);e%=60,e<0&&(e+=60,i-=1);let r=this.hour+~~(i/60);i%=60,i<0&&(i+=60,r-=1);let n=~~(r/24);r%=24,r<0&&(r+=24,n-=1);const s=this.day.next(n);return Ae.fromYmdHms(s.getYear(),s.getMonth(),s.getDay(),r,i,e)}isBefore(t){return this.day.equals(t.getSolarDay())?this.hour!==t.getHour()?this.hour<t.getHour():this.minute!==t.getMinute()?this.minute<t.getMinute():this.second<t.getSecond():this.day.isBefore(t.getSolarDay())}isAfter(t){return this.day.equals(t.getSolarDay())?this.hour!==t.getHour()?this.hour>t.getHour():this.minute!==t.getMinute()?this.minute>t.getMinute():this.second>t.getSecond():this.day.isAfter(t.getSolarDay())}getTerm(){let t=this.getYear(),e=2*this.getMonth();24==e&&(t+=1,e=0);let i=ae.fromIndex(t,e);for(;this.isBefore(i.getJulianDay().getSolarTime());)i=i.next(-1);return i}getJulianDay(){return ie.fromYmdHms(this.day.getYear(),this.day.getMonth(),this.day.getDay(),this.hour,this.minute,this.second)}subtract(t){let e=this.day.subtract(t.getSolarDay());let i=3600*this.hour+60*this.minute+this.second-(3600*t.getHour()+60*t.getMinute()+t.getSecond());return i<0&&(i+=86400,e--),i+=86400*e,i}getLunarHour(){const t=this.day.getLunarDay();return te.fromYmdHms(t.getYear(),t.getMonth(),t.getDay(),this.hour,this.minute,this.second)}}const je=class t extends a{constructor(e,i,r,s){super(),n(this,"day"),n(this,"name"),n(this,"work"),this.day=pe.fromYmd(e,i,r),this.work=48===s.charCodeAt(8),this.name=t.NAMES[s.charCodeAt(9)-48]}static fromYmd(e,i,r){const n=(Array(4).join("0")+e).slice(-4),s=new RegExp(`${n}${(i<10?"0":"")+i}${(r<10?"0":"")+r}[0-1][0-8][+|-]\\d{2}`,"g").exec(t.DATA);return s?new t(e,i,r,s[0]):null}getName(){return this.name}getDay(){return this.day}isWork(){return this.work}toString(){return`${this.day.toString()} ${this.name}(${this.work?"班":"休"})`}next(e){const i=this.day.getYear(),r=this.day.getMonth(),n=this.day.getDay();if(0===e)return t.fromYmd(i,r,n);let s=(Array(4).join("0")+i).slice(-4);const a=[],o=`${s}${(r<10?"0":"")+r}${(n<10?"0":"")+n}`;let h=new RegExp(`${s}\\d{4}[0-1][0-8][+|-]\\d{2}`,"g"),l=h.exec(t.DATA);for(;l;)a.push(l[0]),l=h.exec(t.DATA);let d=-1,c=a.length;for(let t=0;t<c;t++)if(0===a[t].indexOf(o)){d=t;break}if(-1===d)return null;d+=e;let g=i;if(e>0)for(;d>=c;){for(d-=c,g+=1,a.length=0,s=(Array(4).join("0")+g).slice(-4),h=new RegExp(`${s}\\d{4}[0-1][0-8][+|-]\\d{2}`,"g"),l=h.exec(t.DATA);l;)a.push(l[0]),l=h.exec(t.DATA);if(c=a.length,c<1)return null}else for(;d<0;){for(g-=1,a.length=0,s=(Array(4).join("0")+g).slice(-4),h=new RegExp(`${s}\\d{4}[0-1][0-8][+|-]\\d{2}`,"g"),l=h.exec(t.DATA);l;)a.push(l[0]),l=h.exec(t.DATA);if(c=a.length,c<1)return null;d+=c}let u=a[d];return new t(parseInt(u.substring(0,4),10),parseInt(u.substring(4,6),10),parseInt(u.substring(6,8),10),u)}};n(je,"NAMES",["元旦节","春节","清明节","劳动节","端午节","中秋节","国庆节","国庆中秋","抗战胜利日"]),n(je,"DATA","2001122900+032001123000+022002010110+002002010210-012002010310-022002020901+032002021001+022002021211+002002021311-012002021411-022002021511-032002021611-042002021711-052002021811-062002042703+042002042803+032002050113+002002050213-012002050313-022002050413-032002050513-042002050613-052002050713-062002092806+032002092906+022002100116+002002100216-012002100316-022002100416-032002100516-042002100616-052002100716-062003010110+002003020111+002003020211-012003020311-022003020411-032003020511-042003020611-052003020711-062003020801-072003020901-082003042603+052003042703+042003050113+002003050213-012003050313-022003050413-032003050513-042003050613-052003050713-062003092706+042003092806+032003100116+002003100216-012003100316-022003100416-032003100516-042003100616-052003100716-062004010110+002004011701+052004011801+042004012211+002004012311-012004012411-022004012511-032004012611-042004012711-052004012811-062004050113+002004050213-012004050313-022004050413-032004050513-042004050613-052004050713-062004050803-072004050903-082004100116+002004100216-012004100316-022004100416-032004100516-042004100616-052004100716-062004100906-082004101006-092005010110+002005010210-012005010310-022005020501+042005020601+032005020911+002005021011-012005021111-022005021211-032005021311-042005021411-052005021511-062005043003+012005050113+002005050213-012005050313-022005050413-032005050513-042005050613-052005050713-062005050803-072005100116+002005100216-012005100316-022005100416-032005100516-042005100616-052005100716-062005100806-072005100906-082005123100+012006010110+002006010210-012006010310-022006012801+012006012911+002006013011-012006013111-022006020111-032006020211-042006020311-052006020411-062006020501-072006042903+022006043003+012006050113+002006050213-012006050313-022006050413-032006050513-042006050613-052006050713-062006093006+012006100116+002006100216-012006100316-022006100416-032006100516-042006100616-052006100716-062006100806-072006123000+022006123100+012007010110+002007010210-012007010310-022007021701+012007021811+002007021911-012007022011-022007022111-032007022211-042007022311-052007022411-062007022501-072007042803+032007042903+022007050113+002007050213-012007050313-022007050413-032007050513-042007050613-052007050713-062007092906+022007093006+012007100116+002007100216-012007100316-022007100416-032007100516-042007100616-052007100716-062007122900+032007123010+022007123110+012008010110+002008020201+042008020301+032008020611+002008020711-012008020811-022008020911-032008021011-042008021111-052008021211-062008040412+002008040512-012008040612-022008050113+002008050213-012008050313-022008050403-032008060714+012008060814+002008060914-012008091315+012008091415+002008091515-012008092706+042008092806+032008092916+022008093016+012008100116+002008100216-012008100316-022008100416-032008100516-042009010110+002009010210-012009010310-022009010400-032009012401+012009012511+002009012611-012009012711-022009012811-032009012911-042009013011-052009013111-062009020101-072009040412+002009040512-012009040612-022009050113+002009050213-012009050313-022009052814+002009052914-012009053014-022009053104-032009092706+042009100116+002009100216-012009100316-022009100416-032009100515-022009100615-032009100715-042009100815-052009101005-072010010110+002010010210-012010010310-022010021311+002010021411-012010021511-022010021611-032010021711-042010021811-052010021911-062010022001-072010022101-082010040312+022010040412+012010040512+002010050113+002010050213-012010050313-022010061204+042010061304+032010061414+022010061514+012010061614+002010091905+032010092215+002010092315-012010092415-022010092505-032010092606+052010100116+002010100216-012010100316-022010100416-032010100516-042010100616-052010100716-062010100906-082011010110+002011010210-012011010310-022011013001+042011020211+012011020311+002011020411-012011020511-022011020611-032011020711-042011020811-052011021201-092011040202+032011040312+022011040412+012011040512+002011043013+012011050113+002011050213-012011060414+022011060514+012011060614+002011091015+022011091115+012011091215+002011100116+002011100216-012011100316-022011100416-032011100516-042011100616-052011100716-062011100806-072011100906-082011123100+012012010110+002012010210-012012010310-022012012101+022012012211+012012012311+002012012411-012012012511-022012012611-032012012711-042012012811-052012012901-062012033102+042012040102+032012040212+022012040312+012012040412+002012042803+032012042913+022012043013+012012050113+002012050203-012012062214+012012062314+002012062414-012012092905+012012093015+002012100116+002012100216-012012100316-022012100416-032012100516-042012100616-052012100716-062012100806-072013010110+002013010210-012013010310-022013010500-042013010600-052013020911+012013021011+002013021111-012013021211-022013021311-032013021411-042013021511-052013021601-062013021701-072013040412+002013040512-012013040612-022013042703+042013042803+032013042913+022013043013+012013050113+002013060804+042013060904+032013061014+022013061114+012013061214+002013091915+002013092015-012013092115-022013092205-032013092906+022013100116+002013100216-012013100316-022013100416-032013100516-042013100616-052013100716-062014010110+002014012601+052014013111+002014020111-012014020211-022014020311-032014020411-042014020511-052014020611-062014020801-082014040512+002014040612-012014040712-022014050113+002014050213-012014050313-022014050403-032014053114+022014060114+012014060214+002014090615+022014090715+012014090815+002014092806+032014100116+002014100216-012014100316-022014100416+002014100516-042014100616-052014100716-062014101106-102015010110+002015010210-012015010310-022015010400-032015021501+042015021811+012015021911+002015022011-012015022111-022015022211-032015022311-042015022411-052015022801-092015040412+012015040512+002015040612-012015050113+002015050213-012015050313-022015062014+002015062114-012015062214-022015090318+002015090418-012015090518-022015090608-032015092615+012015092715+002015100116+002015100216-012015100316-022015100416+002015100516-042015100616-052015100716-062015101006-092016010110+002016010210-012016010310-022016020601+022016020711+012016020811+002016020911-012016021011-022016021111-032016021211-042016021311-052016021401-062016040212+022016040312+012016040412+002016043013+012016050113+002016050213-012016060914+002016061014-012016061114-022016061204-032016091515+002016091615-012016091715-022016091805-032016100116+002016100216-012016100316-022016100416-032016100516-042016100616-052016100716-062016100806-072016100906-082016123110+012017010110+002017010210-012017012201+062017012711+012017012811+002017012911-012017013011-022017013111-032017020111-042017020211-052017020401-072017040102+032017040212+022017040312+012017040412+002017042913+022017043013+012017050113+002017052704+032017052814+022017052914+012017053014+002017093006+012017100116+002017100216-012017100316-022017100415+002017100516-042017100616-052017100716-062017100816-072017123010+022017123110+012018010110+002018021101+052018021511+012018021611+002018021711-012018021811-022018021911-032018022011-042018022111-052018022401-082018040512+002018040612-012018040712-022018040802-032018042803+032018042913+022018043013+012018050113+002018061614+022018061714+012018061814+002018092215+022018092315+012018092415+002018092906+022018093006+012018100116+002018100216-012018100316-022018100416-032018100516-042018100616-052018100716-062018122900+032018123010+022018123110+012019010110+002019020201+032019020301+022019020411+012019020511+002019020611-012019020711-022019020811-032019020911-042019021011-052019040512+002019040612-012019040712-022019042803+032019050113+002019050213-012019050313-022019050413-032019050503-042019060714+002019060814-012019060914-022019091315+002019091415-012019091515-022019092906+022019100116+002019100216-012019100316-022019100416-032019100516-042019100616-052019100716-062019101206-112020010110+002020011901+062020012411+012020012511+002020012611-012020012711-022020012811-032020012911-042020013011-052020013111-062020020111-072020020211-082020040412+002020040512-012020040612-022020042603+052020050113+002020050213-012020050313-022020050413-032020050513-042020050903-082020062514+002020062614-012020062714-022020062804-032020092707+042020100117+002020100216-012020100316-022020100416-032020100516-042020100616-052020100716-062020100816-072020101006-092021010110+002021010210-012021010310-022021020701+052021021111+012021021211+002021021311-012021021411-022021021511-032021021611-042021021711-052021022001-082021040312+012021040412+002021040512-012021042503+062021050113+002021050213-012021050313-022021050413-032021050513-042021050803-072021061214+022021061314+012021061414+002021091805+032021091915+022021092015+012021092115+002021092606+052021100116+002021100216-012021100316-022021100416-032021100516-042021100616-052021100716-062021100906-082022010110+002022010210-012022010310-022022012901+032022013001+022022013111+012022020111+002022020211-012022020311-022022020411-032022020511-042022020611-052022040202+032022040312+022022040412+012022040512+002022042403+072022043013+012022050113+002022050213-012022050313-022022050413-032022050703-062022060314+002022060414-012022060514-022022091015+002022091115-012022091215-022022100116+002022100216-012022100316-022022100416-032022100516-042022100616-052022100716-062022100806-072022100906-082022123110+012023010110+002023010210-012023012111+012023012211+002023012311-012023012411-022023012511-032023012611-042023012711-052023012801-062023012901-072023040512+002023042303+082023042913+022023043013+012023050113+002023050213-012023050313-022023050603-052023062214+002023062314-012023062414-022023062504-032023092915+002023093016+012023100116+002023100216-012023100316-022023100416-032023100516-042023100616-052023100706-062023100806-072023123010+022023123110+012024010110+002024020401+062024021011+002024021111-012024021211-022024021311-032024021411-042024021511-052024021611-062024021711-072024021801-082024040412+002024040512-012024040612-022024040702-032024042803+032024050113+002024050213-012024050313-022024050413-032024050513-042024051103-102024060814+022024060914+012024061014+002024091405+032024091515+022024091615+012024091715+002024092906+022024100116+002024100216-012024100316-022024100416-032024100516-042024100616-052024100716-062024101206-11");let ye=je;const Ee=class t extends a{constructor(e,i,r,s){super(),n(this,"type"),n(this,"index"),n(this,"day"),n(this,"name"),n(this,"startYear"),this.type=e,this.day=i,this.startYear=r,this.index=parseInt(s.substring(1,3),10),this.name=t.NAMES[this.index]}static fromIndex(e,i){if(i<0||i>=t.NAMES.length)throw new Error(`illegal index: ${i}`);const r=new RegExp(`@${(i<10?"0":"")+i}\\d+`,"g").exec(t.DATA);if(r){const i=r[0];if(0===i.charCodeAt(3)-48){const r=parseInt(i.substring(8),10);if(e>=r)return new t(0,pe.fromYmd(e,parseInt(i.substring(4,6),10),parseInt(i.substring(6,8),10)),r,i)}}return null}static fromYmd(e,i,r){const n=new RegExp(`@\\d{2}0${(i<10?"0":"")+i}${(r<10?"0":"")+r}\\d+`,"g").exec(t.DATA);if(n){const s=n[0],a=parseInt(s.substring(8),10);if(e>=a)return new t(0,pe.fromYmd(e,i,r),a,s)}return null}getName(){return this.name}getIndex(){return this.index}getDay(){return this.day}getType(){return this.type}getStartYear(){return this.startYear}toString(){return`${this.day.toString()} ${this.name}`}next(e){if(0===e)return t.fromYmd(this.day.getYear(),this.day.getMonth(),this.day.getDay());const i=t.NAMES.length;let r=this.index+e;const n=this.indexOf(r,i);return r<0&&(r-=i),t.fromIndex(this.day.getYear()+~~(r/i),n)}};n(Ee,"NAMES",["元旦","三八妇女节","植树节","五一劳动节","五四青年节","六一儿童节","建党节","八一建军节","教师节","国庆节"]),n(Ee,"DATA","@00001011950@01003081950@02003121979@03005011950@04005041950@05006011950@06007011941@07008011933@08009101985@09010011950");let De=Ee;const xe=class t extends a{constructor(e,i,r,s){super(),n(this,"type"),n(this,"index"),n(this,"day"),n(this,"name"),n(this,"solarTerm"),this.type=e,this.day=i,this.solarTerm=r,this.index=parseInt(s.substring(1,3),10),this.name=t.NAMES[this.index]}static fromIndex(e,i){if(i<0||i>=t.NAMES.length)throw new Error(`illegal index: ${i}`);const r=new RegExp(`@${(i<10?"0":"")+i}\\d+`,"g").exec(t.DATA);if(r){const i=r[0];switch(i.charCodeAt(3)-48){case 0:return new t(0,Qt.fromYmd(e,parseInt(i.substring(4,6),10),parseInt(i.substring(6),10)),null,i);case 1:const r=ae.fromIndex(e,parseInt(i.substring(4),10));return new t(1,r.getJulianDay().getSolarDay().getLunarDay(),r,i);case 2:return new t(2,Qt.fromYmd(e+1,1,1).next(-1),null,i)}}return null}static fromYmd(e,i,r){let n=new RegExp(`@\\d{2}0${(i<10?"0":"")+i}${(r<10?"0":"")+r}`,"g").exec(t.DATA);if(n)return new t(0,Qt.fromYmd(e,i,r),null,n[0]);const s=new RegExp("@\\d{2}1\\d{2}","g");for(n=s.exec(t.DATA);n;){const a=n[0],o=ae.fromIndex(e,parseInt(a.substring(4),10)),h=o.getJulianDay().getSolarDay().getLunarDay();if(h.getYear()===e&&h.getMonth()===i&&h.getDay()===r)return new t(1,h,o,a);n=s.exec(ye.DATA)}if(n=new RegExp("@\\d{2}2","g").exec(t.DATA),n){const s=Qt.fromYmd(e,i,r),a=s.next(1);if(1===a.getMonth()&&1===a.getDay())return new t(2,s,null,n[0])}return null}getName(){return this.name}getIndex(){return this.index}getDay(){return this.day}getType(){return this.type}getSolarTerm(){return this.solarTerm}toString(){return`${this.day.toString()} ${this.name}`}next(e){if(0===e)return t.fromYmd(this.day.getYear(),this.day.getMonth(),this.day.getDay());const i=t.NAMES.length;let r=this.index+e;const n=this.indexOf(r,i);return r<0&&(r-=i),t.fromIndex(this.day.getYear()+~~(r/i),n)}};n(xe,"NAMES",["春节","元宵节","龙头节","上巳节","清明节","端午节","七夕节","中元节","中秋节","重阳节","冬至节","腊八节","除夕"]),n(xe,"DATA","@0000101@0100115@0200202@0300303@04107@0500505@0600707@0700715@0800815@0900909@10124@1101208@122");let be=xe;class ve extends s{constructor(t,e,i,r){super(),n(this,"year"),n(this,"month"),n(this,"day"),n(this,"hour"),this.year=t instanceof ut?t:ut.fromName(t),this.month=e instanceof ut?e:ut.fromName(e),this.day=i instanceof ut?i:ut.fromName(i),this.hour=r instanceof ut?r:ut.fromName(r)}getYear(){return this.year}getMonth(){return this.month}getDay(){return this.day}getHour(){return this.hour}getFetalOrigin(){return ut.fromName(this.month.getHeavenStem().next(1).getName()+this.month.getEarthBranch().next(3).getName())}getFetalBreath(){return ut.fromName(this.day.getHeavenStem().next(5).getName()+Q.fromIndex(13-this.day.getEarthBranch().getIndex()).getName())}getOwnSign(){let t=this.month.getEarthBranch().next(-1).getIndex()+this.hour.getEarthBranch().next(-1).getIndex();return t=(t>=14?26:14)-t,t-=1,ut.fromName(tt.fromIndex(2*(this.year.getHeavenStem().getIndex()+1)+t).getName()+Q.fromIndex(2+t).getName())}getBodySign(){let t=this.month.getEarthBranch().getIndex()+this.hour.getEarthBranch().getIndex();return t%=12,t-=1,ut.fromName(tt.fromIndex(2*(this.year.getHeavenStem().getIndex()+1)+t).getName()+Q.fromIndex(2+t).getName())}getDuty(){return w.fromIndex(this.day.getEarthBranch().getIndex()-this.month.getEarthBranch().getIndex())}getName(){return`${this.year.toString()} ${this.month.toString()} ${this.day.toString()} ${this.hour.toString()}`}getSolarTimes(t,e){const i=[];let r=this.month.getEarthBranch().next(-2).getIndex();if(!tt.fromIndex(2*(this.year.getHeavenStem().getIndex()+1)+r).equals(this.month.getHeavenStem()))return i;let n=this.year.next(-57).getIndex()+1;r*=2;const s=2*this.hour.getEarthBranch().getIndex(),a=0==s?[0,23]:[s],o=t-1;for(o>n&&(n+=60*~~Math.ceil((o-n)/60));n<=e;){let e=ae.fromIndex(n,3);r>0&&(e=e.next(r));let s=e.getJulianDay().getSolarTime();if(s.getYear()>=t){let t=s.getSolarDay();const e=this.day.next(-t.getLunarDay().getSixtyCycle().getIndex()).getIndex();e>0&&(t=t.next(e));for(let r=0,n=a.length;r<n;r++){let n=0,o=0;const h=a[r];0==e&&h==s.getHour()&&(n=s.getMinute(),o=s.getSecond());const l=Ae.fromYmdHms(t.getYear(),t.getMonth(),t.getDay(),h,n,o);l.getLunarHour().getEightChar().equals(this)&&i.push(l)}}n+=60}return i}}class _e{constructor(t,e,i,r,s,a,o){n(this,"startTime"),n(this,"endTime"),n(this,"yearCount"),n(this,"monthCount"),n(this,"dayCount"),n(this,"hourCount"),n(this,"minuteCount"),this.startTime=t,this.endTime=e,this.yearCount=i,this.monthCount=r,this.dayCount=s,this.hourCount=a,this.minuteCount=o}getStartTime(){return this.startTime}getEndTime(){return this.endTime}getYearCount(){return this.yearCount}getMonthCount(){return this.monthCount}getDayCount(){return this.dayCount}getHourCount(){return this.hourCount}getMinuteCount(){return this.minuteCount}}class Se{next(t,e,i,r,n,s,a){let o=t.getDay()+r,h=t.getHour()+n,l=t.getMinute()+s,d=t.getSecond()+a;l+=~~(d/60),d%=60,h+=~~(l/60),l%=60,o+=~~(h/24),h%=24;let c=fe.fromYm(t.getYear()+e,t.getMonth()).next(i),g=c.getDayCount();for(;o>g;)o-=g,c=c.next(1),g=c.getDayCount();return new _e(t,Ae.fromYmdHms(c.getYear(),c.getMonth(),o,h,l,d),e,i,r,n,s)}}n(class t{constructor(e,i){n(this,"eightChar"),n(this,"gender"),n(this,"forward"),n(this,"info"),this.gender=i,this.eightChar=e.getLunarHour().getEightChar();const r=1==this.eightChar.getYear().getHeavenStem().getYinYang(),s=1==i;this.forward=r&&s||!r&&!s;let a=e.getTerm();a.isJie()||(a=a.next(-1)),this.forward&&(a=a.next(2)),this.info=t.provider.getInfo(e,a)}static fromSolarTime(e,i){return new t(e,i)}getEightChar(){return this.eightChar}getGender(){return this.gender}getYearCount(){return this.info.getYearCount()}getMonthCount(){return this.info.getMonthCount()}getDayCount(){return this.info.getDayCount()}getHourCount(){return this.info.getHourCount()}getMinuteCount(){return this.info.getMinuteCount()}getStartTime(){return this.info.getStartTime()}getEndTime(){return this.info.getEndTime()}isForward(){return this.forward}getStartDecadeFortune(){return Be.fromChildLimit(this,0)}getStartFortune(){return we.fromChildLimit(this,0)}},"provider",new class extends Se{getInfo(t,e){let i=Math.abs(e.getJulianDay().getSolarTime().subtract(t));const r=~~(i/259200);i%=259200;const n=~~(i/21600);i%=21600;const s=~~(i/720);i%=720;const a=~~(i/30);i%=30;const o=2*i;return this.next(t,r,n,s,a,o,0)}});class Be extends a{constructor(t,e){super(),n(this,"childLimit"),n(this,"index"),this.childLimit=t,this.index=e}static fromChildLimit(t,e){return new Be(t,e)}getStartAge(){return this.childLimit.getYearCount()+1+10*this.index}getEndAge(){return this.getStartAge()+9}getStartLunarYear(){return this.childLimit.getEndTime().getLunarHour().getLunarDay().getLunarMonth().getLunarYear().next(10*this.index)}getEndLunarYear(){return this.getStartLunarYear().next(9)}getSixtyCycle(){return this.childLimit.getEightChar().getMonth().next(this.childLimit.isForward()?this.index+1:-this.index-1)}getName(){return this.getSixtyCycle().getName()}next(t){return Be.fromChildLimit(this.childLimit,this.index+t)}getStartFortune(){return we.fromChildLimit(this.childLimit,10*this.index)}}class we extends a{constructor(t,e){super(),n(this,"childLimit"),n(this,"index"),this.childLimit=t,this.index=e}static fromChildLimit(t,e){return new we(t,e)}getAge(){return this.childLimit.getYearCount()+1+this.index}getLunarYear(){return this.childLimit.getEndTime().getLunarHour().getLunarDay().getLunarMonth().getLunarYear().next(this.index)}getSixtyCycle(){const t=this.getAge();return this.childLimit.getEightChar().getHour().next(this.childLimit.isForward()?t:-t)}getName(){return this.getSixtyCycle().getName()}next(t){return we.fromChildLimit(this.childLimit,this.index+t)}}class ke{constructor(){this.listeners=new Map}on(t,e){if(!this.listeners.has(t))return this.listeners.set(t,[e]),this;const i=this.listeners.get(t);return this.listeners.set(t,[...i,e]),this}emit(t,e){if(this.listeners.has(t)){const i=this.listeners.get(t);for(const t of i)t(e)}}removeListener(t,e){if(this.listeners.has(t)){const i=this.listeners.get(t),r=i.indexOf(e);r&&r>=0&&i.splice(r,1)}}once(t,e){const i=(...r)=>{e(...r),this.removeListener(t,i)};this.on(t,i)}}var Me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ie(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Te(t,e){return t(e={exports:{}},e.exports),e.exports}var Pe=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const i=Math.PI/180;e.glob=void 0!==Me?Me:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.16",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:t=>e.Konva.angleDeg?t*i:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isTransforming(){var t;return null===(t=e.Konva.Transformer)||void 0===t?void 0:t.isTransforming()},isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};e._registerNode=t=>{e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)}));Ie(Pe),Pe._registerNode,Pe.Konva,Pe.glob;var Ne=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;class i{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.m[0]*e+this.m[2]*i,n=this.m[1]*e+this.m[3]*i,s=this.m[0]*-i+this.m[2]*e,a=this.m[1]*-i+this.m[3]*e;return this.m[0]=r,this.m[1]=n,this.m[2]=s,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,n=this.m[2]+this.m[0]*t,s=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],n=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=n,this.m[4]=s,this.m[5]=a,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,r=-this.m[2]*t,n=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=n,this.m[4]=s,this.m[5]=a,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],s=t*n-i*r,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=i){const e=Math.sqrt(t*t+i*i);a.rotation=i>0?Math.acos(t/e):-Math.acos(t/e),a.scaleX=e,a.scaleY=s/e,a.skewX=(t*r+i*n)/s,a.skewY=0}else if(0!=r||0!=n){const e=Math.sqrt(r*r+n*n);a.rotation=Math.PI/2-(n>0?Math.acos(-r/e):-Math.acos(r/e)),a.scaleX=s/e,a.scaleY=e,a.skewX=0,a.skewY=(t*r+i*n)/s}return a.rotation=e.Util._getRotation(a.rotation),a}}e.Transform=i;let r=Math.PI/180,n=180/Math.PI,s="Konva error: ",a={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},o=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,h=[];const l="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)};e.Util={_isElement:t=>!(!t||1!=t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;const e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t||t>0?1:-1,requestAnimFrame(t){h.push(t),1===h.length&&l((function(){const t=h;h=[],t.forEach((function(t){t()}))}))},createCanvasElement(){const t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,i){const r=e.Util.createImageElement();r.onload=function(){i(r)},r.src=t},_rgbToHex:(t,e,i)=>((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1),_hexToRgb(t){t=t.replace("#","");const e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){let t=(16777215*Math.random()|0).toString(16);for(;t.length<6;)t="0"+t;return"#"+t},getRGB(t){let e;return t in a?(e=a[t],{r:e[0],g:e[1],b:e[2]}):"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=o.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)),_namedColorToRBA(t){const e=a[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){const e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){const e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(i[0])/360,n=Number(i[1])/100,s=Number(i[2])/100;let a,o,h;if(0===n)return h=255*s,{r:Math.round(h),g:Math.round(h),b:Math.round(h),a:1};a=s<.5?s*(1+n):s+n-s*n;const l=2*s-a,d=[0,0,0];for(let t=0;t<3;t++)o=r+1/3*-(t-1),o<0&&o++,o>1&&o--,h=6*o<1?l+6*(a-l)*o:2*o<1?a:3*o<2?l+(a-l)*(2/3-o)*6:l,d[t]=255*h;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){const e={};for(const i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*r,radToDeg:t=>t*n,_degToRad:t=>(e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)),_radToDeg:t=>(e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)),_getRotation:t=>Pe.Konva.angleDeg?e.Util.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw new Error(s+t)},error(t){console.error(s+t)},warn(t){Pe.Konva.showWarnings&&console.warn("Konva warning: "+t)},each(t,e){for(const i in t)e(i,t[i])},_inRange:(t,e,i)=>e<=t&&t<i,_getProjectionToSegment(t,e,i,r,n,s){let a,o,h;const l=(t-i)*(t-i)+(e-r)*(e-r);if(0==l)a=t,o=e,h=(n-i)*(n-i)+(s-r)*(s-r);else{const d=((n-t)*(i-t)+(s-e)*(r-e))/l;d<0?(a=t,o=e,h=(t-n)*(t-n)+(e-s)*(e-s)):d>1?(a=i,o=r,h=(i-n)*(i-n)+(r-s)*(r-s)):(a=t+d*(i-t),o=e+d*(r-e),h=(a-n)*(a-n)+(o-s)*(o-s))}return[a,o,h]},_getProjectionToLine(t,i,r){const n=e.Util.cloneObject(t);let s=Number.MAX_VALUE;return i.forEach((function(a,o){if(!r&&o===i.length-1)return;const h=i[(o+1)%i.length],l=e.Util._getProjectionToSegment(a.x,a.y,h.x,h.y,t.x,t.y),d=l[0],c=l[1],g=l[2];g<s&&(n.x=d,n.y=c,s=g)})),n},_prepareArrayForTween(t,i,r){let n,s=[],a=[];if(t.length>i.length){const e=i;i=t,t=e}for(n=0;n<t.length;n+=2)s.push({x:t[n],y:t[n+1]});for(n=0;n<i.length;n+=2)a.push({x:i[n],y:i[n+1]});const o=[];return a.forEach((function(t){const i=e.Util._getProjectionToLine(t,s,r);o.push(i.x),o.push(i.y)})),o},_prepareToStringify(t){let i;t.visitedByCircularReferenceRemoval=!0;for(const r in t)if(t.hasOwnProperty(r)&&t[r]&&"object"==typeof t[r])if(i=Object.getOwnPropertyDescriptor(t,r),t[r].visitedByCircularReferenceRemoval||e.Util._isElement(t[r])){if(!i.configurable)return null;delete t[r]}else if(null===e.Util._prepareToStringify(t[r])){if(!i.configurable)return null;delete t[r]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(const i in e)t[i]=e[i];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:t.pointerId||999,releaseCanvas(...t){Pe.Konva.releaseCanvasOnDestroy&&t.forEach((t=>{t.width=0,t.height=0}))},drawRoundedRectPath(t,e,i,r){let n=0,s=0,a=0,o=0;"number"==typeof r?n=s=a=o=Math.min(r,e/2,i/2):(n=Math.min(r[0]||0,e/2,i/2),s=Math.min(r[1]||0,e/2,i/2),o=Math.min(r[2]||0,e/2,i/2),a=Math.min(r[3]||0,e/2,i/2)),t.moveTo(n,0),t.lineTo(e-s,0),t.arc(e-s,s,s,3*Math.PI/2,0,!1),t.lineTo(e,i-o),t.arc(e-o,i-o,o,0,Math.PI/2,!1),t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,n),t.arc(n,n,n,Math.PI,3*Math.PI/2,!1)}}}));Ie(Ne),Ne.Util,Ne.Transform;var Re=Te((function(t,e){function i(t){return Ne.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||Ne.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.RGBComponent=function(t){if(t>255)return 255;if(t<0)return 0;return Math.round(t)},e.alphaComponent=function(t){if(t>1)return 1;if(t<1e-4)return 1e-4;return t},e.getNumberValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){return Ne.Util._isNumber(t)||Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(Pe.Konva.isUnminified)return function(e,r){const n=Ne.Util._isNumber(e),s=Ne.Util._isArray(e)&&e.length==t;return n||s||Ne.Util.warn(i(e)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){return Ne.Util._isNumber(t)||"auto"===t||Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){return Ne.Util._isString(t)||Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){const r=Ne.Util._isString(t),n="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return r||n||Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){return Ne.Util._isFunction(t)||Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){const r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&t instanceof r||(Ne.Util._isArray(t)?t.forEach((function(t){Ne.Util._isNumber(t)||Ne.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}},e.getBooleanValidator=function(){if(Pe.Konva.isUnminified)return function(t,e){return!0===t||!1===t||Ne.Util.warn(i(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(Pe.Konva.isUnminified)return function(e,r){return null==e||Ne.Util.isObject(e)||Ne.Util.warn(i(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}}));Ie(Re),Re.RGBComponent,Re.alphaComponent,Re.getNumberValidator,Re.getNumberOrArrayOfNumbersValidator,Re.getNumberOrAutoValidator,Re.getStringValidator,Re.getStringOrGradientValidator,Re.getFunctionValidator,Re.getNumberArrayValidator,Re.getBooleanValidator,Re.getComponentValidator;var Le=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const i="get",r="set";e.Factory={addGetterSetter(t,i,r,n,s){e.Factory.addGetter(t,i,r),e.Factory.addSetter(t,i,n,s),e.Factory.addOverloadedGetterSetter(t,i)},addGetter(t,e,r){const n=i+Ne.Util._capitalize(e);t.prototype[n]=t.prototype[n]||function(){const t=this.attrs[e];return void 0===t?r:t}},addSetter(t,i,n,s){const a=r+Ne.Util._capitalize(i);t.prototype[a]||e.Factory.overWriteSetter(t,i,n,s)},overWriteSetter(t,e,i,n){const s=r+Ne.Util._capitalize(e);t.prototype[s]=function(t){return i&&null!=t&&(t=i.call(this,t,e)),this._setAttr(e,t),n&&n.call(this),this}},addComponentsGetterSetter(t,n,s,a,o){let h,l,d=s.length,c=Ne.Util._capitalize,g=i+c(n),u=r+c(n);t.prototype[g]=function(){const t={};for(h=0;h<d;h++)l=s[h],t[l]=this.getAttr(n+c(l));return t};const f=(0,Re.getComponentValidator)(s);t.prototype[u]=function(t){let e,i=this.attrs[n];for(e in a&&(t=a.call(this,t)),f&&f.call(this,t,n),t)t.hasOwnProperty(e)&&this._setAttr(n+c(e),t[e]);return t||s.forEach((t=>{this._setAttr(n+c(t),void 0)})),this._fireChangeEvent(n,i,t),o&&o.call(this),this},e.Factory.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter(t,e){const n=Ne.Util._capitalize(e),s=r+n,a=i+n;t.prototype[e]=function(){return arguments.length?(this[s](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter(t,r,n,s){Ne.Util.error("Adding deprecated "+r);const a=i+Ne.Util._capitalize(r),o=r+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[a]=function(){Ne.Util.error(o);const t=this.attrs[r];return void 0===t?n:t},e.Factory.addSetter(t,r,s,(function(){Ne.Util.error(o)})),e.Factory.addOverloadedGetterSetter(t,r)},backCompat(t,e){Ne.Util.each(e,(function(e,n){const s=t.prototype[n],a=i+Ne.Util._capitalize(e),o=r+Ne.Util._capitalize(e);function h(){s.apply(this,arguments),Ne.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=h,t.prototype[a]=h,t.prototype[o]=h}))},afterSetFilter(){this._filterUpToDate=!1}}}));Ie(Le),Le.Factory;var Ge=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;const i=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class r{constructor(t){this.canvas=t,Pe.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i,r,n,s,a=this.traceArr,o=a.length,h="";for(i=0;i<o;i++)r=a[i],n=r.method,n?(s=r.args,h+=n,t?h+="()":Ne.Util._isArray(s[0])?h+="(["+s.join(",")+"])":(e&&(s=s.map((t=>"number"==typeof t?Math.floor(t):t))),h+="("+s.join(",")+")")):(h+=r.property,t||(h+="="+r.val)),h+=";";return h}clearTrace(){this.traceArr=[]}_trace(t){let e,i=this.traceArr;i.push(t),e=i.length,e>=100&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,r,n,s){this._context.arc(t,e,i,r,n,s)}arcTo(t,e,i,r,n){this._context.arcTo(t,e,i,r,n)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,r,n,s){this._context.bezierCurveTo(t,e,i,r,n,s)}clearRect(t,e,i,r){this._context.clearRect(t,e,i,r)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;return 2===i.length?this._context.createImageData(t,e):1===i.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,i,r){return this._context.createLinearGradient(t,e,i,r)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,r,n,s){return this._context.createRadialGradient(t,e,i,r,n,s)}drawImage(t,e,i,r,n,s,a,o,h){const l=arguments,d=this._context;3===l.length?d.drawImage(t,e,i):5===l.length?d.drawImage(t,e,i,r,n):9===l.length&&d.drawImage(t,e,i,r,n,s,a,o,h)}ellipse(t,e,i,r,n,s,a,o){this._context.ellipse(t,e,i,r,n,s,a,o)}isPointInPath(t,e,i,r){return i?this._context.isPointInPath(i,t,e,r):this._context.isPointInPath(t,e,r)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,r){this._context.fillRect(t,e,i,r)}strokeRect(t,e,i,r){this._context.strokeRect(t,e,i,r)}fillText(t,e,i,r){r?this._context.fillText(t,e,i,r):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,r){return this._context.getImageData(t,e,i,r)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,r){this._context.rect(t,e,i,r)}roundRect(t,e,i,r,n){this._context.roundRect(t,e,i,r,n)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,r){this._context.quadraticCurveTo(t,e,i,r)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,r,n,s){this._context.setTransform(t,e,i,r,n,s)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,r){this._context.strokeText(t,e,i,r)}transform(t,e,i,r,n,s){this._context.transform(t,e,i,r,n,s)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t,e,r=this,n=i.length,s=this.setAttr;const a=function(t){let i,n=r[t];r[t]=function(){return e=function(t){let e,i,r=[],n=t.length,s=Ne.Util;for(e=0;e<n;e++)i=t[e],s._isNumber(i)?i=Math.round(1e3*i)/1e3:s._isString(i)||(i+=""),r.push(i);return r}(Array.prototype.slice.call(arguments,0)),i=n.apply(r,arguments),r._trace({method:t,args:e}),i}};for(t=0;t<n;t++)a(i[t]);r.setAttr=function(){s.apply(r,arguments);const t=arguments[0];let e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),r._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}e.Context=r,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(r.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})}));e.SceneContext=class extends r{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&"color"===i)return void this._fillColor(t);const r=t.getFillPatternImage();if(r&&"pattern"===i)return void this._fillPattern(t);const n=t.getFillLinearGradientColorStops();if(n&&"linear-gradient"===i)return void this._fillLinearGradient(t);const s=t.getFillRadialGradientColorStops();s&&"radial-gradient"===i?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):n?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),n=this.createLinearGradient(e.x,e.y,i.x,i.y);if(r){for(let t=0;t<r.length;t+=2)n.addColorStop(r[t],r[t+1]);this.setAttr("strokeStyle",n)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,r;const n=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",s=null!==(i=t.getShadowBlur())&&void 0!==i?i:5,a=null!==(r=t.getShadowOffset())&&void 0!==r?r:{x:0,y:0},o=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),l=o.x*h,d=o.y*h;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",s*Math.min(Math.abs(l),Math.abs(d))),this.setAttr("shadowOffsetX",a.x*l),this.setAttr("shadowOffsetY",a.y*d)}};e.HitContext=class extends r{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),r="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}}));Ie(Ge),Ge.HitContext,Ge.SceneContext,Ge.Context;var Oe=Te((function(t,e){let i;Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;class r{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const e=(t||{}).pixelRatio||Pe.Konva.pixelRatio||function(){if(i)return i;const t=Ne.Util.createCanvasElement(),e=t.getContext("2d");return i=(Pe.Konva._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),Ne.Util.releaseCanvas(t),i}();this.pixelRatio=e,this._canvas=Ne.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return Ne.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}e.Canvas=r,Le.Factory.addGetterSetter(r,"pixelRatio",void 0,(0,Re.getNumberValidator)());e.SceneCanvas=class extends r{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Ge.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}};e.HitCanvas=class extends r{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Ge.HitContext(this),this.setSize(t.width,t.height)}}}));Ie(Oe),Oe.HitCanvas,Oe.SceneCanvas,Oe.Canvas;var Ye=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0,e.DD={get isDragging(){let t=!1;return e.DD._dragElements.forEach((e=>{"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){let t;return e.DD._dragElements.forEach((e=>{t=e.node})),t},_dragElements:new Map,_drag(t){const i=[];e.DD._dragElements.forEach(((e,r)=>{const{node:n}=e,s=n.getStage();s.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=Ne.Util._getFirstPointerId(t));const a=s._changedPointerPositions.find((t=>t.id===e.pointerId));if(a){if("dragging"!==e.dragStatus){const i=n.dragDistance();if(Math.max(Math.abs(a.x-e.startPointerPos.x),Math.abs(a.y-e.startPointerPos.y))<i)return;if(n.startDrag({evt:t}),!n.isDragging())return}n._setDragPosition(t,e),i.push(n)}})),i.forEach((e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore(t){const i=[];e.DD._dragElements.forEach((r=>{const{node:n}=r,s=n.getStage();t&&s.setPointersPositions(t);if(!s._changedPointerPositions.find((t=>t.id===r.pointerId)))return;"dragging"!==r.dragStatus&&"stopped"!==r.dragStatus||(e.DD.justDragged=!0,Pe.Konva._mouseListenClick=!1,Pe.Konva._touchListenClick=!1,Pe.Konva._pointerListenClick=!1,r.dragStatus="stopped");const a=r.node.getLayer()||r.node instanceof Pe.Konva.Stage&&r.node;a&&-1===i.indexOf(a)&&i.push(a)})),i.forEach((t=>{t.draw()}))},_endDragAfter(t){e.DD._dragElements.forEach(((i,r)=>{"stopped"===i.dragStatus&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:t},!0),"dragging"!==i.dragStatus&&e.DD._dragElements.delete(r)}))}},Pe.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}));Ie(Ye),Ye.DD;var Ve=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;const i="absoluteOpacity",r="allEventListeners",n="absoluteTransform",s="absoluteScale",a="canvas",o="listening",h="mouseenter",l="mouseleave",d="Shape",c=" ",g="stage",u="transform",f="visible",F=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(c);let C=1;class m{constructor(t){this._id=C++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==u&&t!==n||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){let i=this._cache.get(t);return(void 0===i||(t===u||t===n)&&!0===i.dirty)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const i=e.map((t=>t+"Change.konva")).join(c);this.on(i,(()=>{this._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(a)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===n&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(a)){const{scene:t,filter:e,hit:i}=this._cache.get(a);Ne.Util.releaseCanvas(t,e,i),this._cache.delete(a)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let r={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let n=Math.ceil(e.width||r.width),o=Math.ceil(e.height||r.height),h=e.pixelRatio,l=void 0===e.x?Math.floor(r.x):e.x,d=void 0===e.y?Math.floor(r.y):e.y,c=e.offset||0,g=e.drawBorder||!1,u=e.hitCanvasPixelRatio||1;if(!n||!o)return void Ne.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");n+=2*c+(Math.abs(Math.round(r.x)-l)>.5?1:0),o+=2*c+(Math.abs(Math.round(r.y)-d)>.5?1:0),l-=c,d-=c;const f=new Oe.SceneCanvas({pixelRatio:h,width:n,height:o}),F=new Oe.SceneCanvas({pixelRatio:h,width:0,height:0,willReadFrequently:!0}),C=new Oe.HitCanvas({pixelRatio:u,width:n,height:o}),m=f.getContext(),p=C.getContext();return C.isCache=!0,f.isCache=!0,this._cache.delete(a),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(f.getContext()._context.imageSmoothingEnabled=!1,F.getContext()._context.imageSmoothingEnabled=!1),m.save(),p.save(),m.translate(-l,-d),p.translate(-l,-d),this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(s),this.drawScene(f,this),this.drawHit(C,this),this._isUnderCache=!1,m.restore(),p.restore(),g&&(m.save(),m.beginPath(),m.rect(0,0,n,o),m.closePath(),m.setAttr("strokeStyle","red"),m.setAttr("lineWidth",5),m.stroke(),m.restore()),this._cache.set(a,{scene:f,filter:F,hit:C,x:l,y:d}),this._requestDraw(),this}isCached(){return this._cache.has(a)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let r=1/0,n=1/0,s=-1/0,a=-1/0;const o=this.getAbsoluteTransform(e);return i.forEach((function(t){const e=o.point(t);void 0===r&&(r=s=e.x,n=a=e.y),r=Math.min(r,e.x),n=Math.min(n,e.y),s=Math.max(s,e.x),a=Math.max(a,e.y)})),{x:r,y:n,width:s-r,height:a-n}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),r=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/r,i.height/r),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t,e,i,r,n=this.filters(),s=this._getCanvasCache(),a=s.scene,o=s.filter,h=o.getContext();if(n){if(!this._filterUpToDate){const s=a.pixelRatio;o.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(t=n.length,h.clear(),h.drawImage(a._canvas,0,0,a.getWidth()/s,a.getHeight()/s),e=h.getImageData(0,0,o.getWidth(),o.getHeight()),i=0;i<t;i++)r=n[i],"function"==typeof r?(r.call(this,e),h.putImageData(e,0,0)):Ne.Util.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(t){Ne.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return a}on(t,e){if(this._cache&&this._cache.delete(r),3===arguments.length)return this._delegate.apply(this,arguments);let i,n,s,a,o,h=t.split(c),l=h.length;for(i=0;i<l;i++)n=h[i],s=n.split("."),a=s[0],o=s[1]||"",this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:o,handler:e});return this}off(t,e){let i,n,s,a,o,h,l=(t||"").split(c),d=l.length;if(this._cache&&this._cache.delete(r),!t)for(n in this.eventListeners)this._off(n);for(i=0;i<d;i++)if(s=l[i],a=s.split("."),o=a[0],h=a[1],o)this.eventListeners[o]&&this._off(o,h,e);else for(n in this.eventListeners)this._off(n,h,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const r=this;this.on(t,(function(t){const n=t.target.findAncestors(e,!0,r);for(let e=0;e<n.length;e++)(t=Ne.Util.cloneObject(t)).currentTarget=n[e],i.call(n[e],t)}))}remove(){return this.isDragging()&&this.stopDrag(),Ye.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(n),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(o)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+Ne.Util._capitalize(t);return Ne.Util._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges((()=>{let e,i;if(!t)return this;for(e in t)"children"!==e&&(i="set"+Ne.Util._capitalize(e),Ne.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))})),this}isListening(){return this._getCache(o,this._isListening)}_isListening(t){if(!this.listening())return!1;const e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(f,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let r=!1;Ye.DD._dragElements.forEach((t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===i)&&(r=!0)}));const n=!e&&!Pe.Konva.hitOnDragEnabled&&(r||Pe.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!n}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t,e,i,r,n=this.getDepth(),s=this,a=0;const o=this.getStage();return"Stage"!==s.nodeType&&o&&function o(h){for(t=[],e=h.length,i=0;i<e;i++)r=h[i],a++,r.nodeType!==d&&(t=t.concat(r.getChildren().slice())),r._id===s._id&&(i=e);t.length>0&&t[0].getDepth()<=n&&o(t)}(o.getChildren()),a}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(u),this._clearSelfAndDescendantCache(n)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges((()=>{this.x(t.x),this.y(t.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const r=this.getAbsoluteTransform(t).getMatrix(),n=new Ne.Transform,s=this.offset();return n.m=r.slice(),n.translate(s.x,s.y),n.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...r}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(u);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(t.x,t.y),t={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(r),this.setPosition({x:t.x,y:t.y}),this._clearCache(u),this._clearSelfAndDescendantCache(n),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,r=this.x(),n=this.y();return void 0!==e&&(r+=e),void 0!==i&&(n+=i),this.setPosition({x:r,y:n}),this}_eachAncestorReverse(t,e){let i,r,n=[],s=this.getParent();if(!e||e._id!==this._id){for(n.unshift(this);s&&(!e||s._id!==e._id);)n.unshift(s),s=s.parent;for(i=n.length,r=0;r<i;r++)t(n[r])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return Ne.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return Ne.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return Ne.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return Ne.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return Ne.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&Ne.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t,e,i,r,n,s=this.getAttrs();const a={attrs:{},className:this.getClassName()};for(t in s)e=s[t],n=Ne.Util.isObject(e)&&!Ne.Util._isPlainObject(e)&&!Ne.Util._isArray(e),n||(i="function"==typeof this[t]&&this[t],delete s[t],r=i?i.call(this):null,s[t]=e,r!==e&&(a.attrs[t]=e));return Ne.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const r=[];e&&this._isMatch(t)&&r.push(this);let n=this.parent;for(;n;){if(n===i)return r;n._isMatch(t)&&r.push(n),n=n.parent}return r}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);let e,i,r=t.replace(/ /g,"").split(","),n=r.length;for(e=0;e<n;e++)if(i=r[e],Ne.Util.isValidSelector(i)||(Ne.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Ne.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Ne.Util.warn("Konva is awesome, right?")),"#"===i.charAt(0)){if(this.id()===i.slice(1))return!0}else if("."===i.charAt(0)){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(g,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(n,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new Ne.Transform,this._eachAncestorReverse((function(t){const i=t.transformsEnabled();"all"===i?e.multiply(t.getTransform()):"position"===i&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;{e=this._cache.get(n)||new Ne.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const t=this.transformsEnabled();if("all"===t)e.multiply(this.getTransform());else if("position"===t){const t=this.attrs.x||0,i=this.attrs.y||0,r=this.attrs.offsetX||0,n=this.attrs.offsetY||0;e.translate(t-r,i-n)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(u,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(u)||new Ne.Transform;i.reset();const r=this.x(),n=this.y(),s=Pe.Konva.getAngle(this.rotation()),a=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,o=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,h=this.attrs.skewX||0,l=this.attrs.skewY||0,d=this.attrs.offsetX||0,c=this.attrs.offsetY||0;return 0===r&&0===n||i.translate(r,n),0!==s&&i.rotate(s),0===h&&0===l||i.skew(h,l),1===a&&1===o||i.scale(a,o),0===d&&0===c||i.translate(-1*d,-1*c),i.dirty=!1,i}clone(t){let e,i,r,n,s,a=Ne.Util.cloneObject(this.attrs);for(e in t)a[e]=t[e];const o=new this.constructor(a);for(e in this.eventListeners)for(i=this.eventListeners[e],r=i.length,n=0;n<r;n++)s=i[n],s.name.indexOf("konva")<0&&(o.eventListeners[e]||(o.eventListeners[e]=[]),o.eventListeners[e].push(s));return o}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),r=void 0!==t.x?t.x:Math.floor(e.x),n=void 0!==t.y?t.y:Math.floor(e.y),s=t.pixelRatio||1,a=new Oe.SceneCanvas({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:s}),o=a.getContext(),h=new Oe.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(r),height:a.height/a.pixelRatio+Math.abs(n),pixelRatio:a.pixelRatio});return!1===t.imageSmoothingEnabled&&(o._context.imageSmoothingEnabled=!1),o.save(),(r||n)&&o.translate(-1*r,-1*n),this.drawScene(a,void 0,h),o.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){const e=(t=t||{}).mimeType||null,i=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(r),r}toImage(t){return new Promise(((e,i)=>{try{const i=null==t?void 0:t.callback;i&&delete t.callback,Ne.Util._urlToImage(this.toDataURL(t),(function(t){e(t),null==i||i(t)}))}catch(t){i(t)}}))}toBlob(t){return new Promise(((e,i)=>{try{const i=null==t?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob((t=>{e(t),null==i||i(t)}),null==t?void 0:t.mimeType,null==t?void 0:t.quality)}catch(t){i(t)}}))}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Pe.Konva.dragDistance}_off(t,e,i){let r,n,s,a=this.eventListeners[t];for(r=0;r<a.length;r++)if(n=a[r].name,s=a[r].handler,!("konva"===n&&"konva"!==e||e&&n!==e||i&&i!==s)){if(a.splice(r,1),0===a.length){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();if(!e)return!1;return-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this["set"+Ne.Util._capitalize(t)];return Ne.Util._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Pe.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];(i!==e||Ne.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let r;void 0!==i&&(r=this.attrs[t],r||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,r,i))}_fireAndBubble(t,e,i){e&&this.nodeType===d&&(e.target=this);if(!((t===h||t===l)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i))){this._fire(t,e);const r=(t===h||t===l)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i,n;const s=null!==(e=this._cache.get(r))&&void 0!==e?e:{};let a=null==s?void 0:s[t];if(void 0===a){a=[];let e=Object.getPrototypeOf(this);for(;e;){const r=null!==(n=null===(i=e.eventListeners)||void 0===i?void 0:i[t])&&void 0!==n?n:[];a.push(...r),e=Object.getPrototypeOf(e)}s[t]=a,this._cache.set(r,s)}return a}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(var r=0;r<i.length;r++)i[r].handler.call(this,e);const n=this.eventListeners[t];if(n)for(r=0;r<n.length;r++)n[r].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),r=this.getAbsolutePosition();if(!i)return;const n=i._getPointerById(e)||i._changedPointerPositions[0]||r;Ye.DD._dragElements.set(this._id,{node:this,startPointerPos:n,offset:{x:n.x-r.x,y:n.y-r.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){Ye.DD._dragElements.has(this._id)||this._createDragElement(t);Ye.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let r={x:i.x-e.offset.x,y:i.y-e.offset.y};const n=this.dragBoundFunc();if(void 0!==n){const e=n.call(this,r,t);e?r=e:Ne.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(t){const e=Ye.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),Ye.DD._endDragBefore(t),Ye.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=Ye.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){if(!(!(void 0!==t.evt.button)||Pe.Konva.dragButtons.indexOf(t.evt.button)>=0))return;if(this.isDragging())return;let e=!1;Ye.DD._dragElements.forEach((t=>{this.isAncestorOf(t.node)&&(e=!0)})),e||this._createDragElement(t)}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();if(!this.getStage())return;const t=Ye.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,i=t&&"ready"===t.dragStatus;e?this.stopDrag():i&&Ye.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return Ne.Util.haveIntersection(i,this.getClientRect())}static create(t,e){return Ne.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i,r,n,s=m.prototype.getClassName.call(t),a=t.children;e&&(t.attrs.container=e),Pe.Konva[s]||(Ne.Util.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape");if(i=new(0,Pe.Konva[s])(t.attrs),a)for(r=a.length,n=0;n<r;n++)i.add(m._createNode(a[n]));return i}}e.Node=m,m.prototype.nodeType="Node",m.prototype._attrsAffectingSize=[],m.prototype.eventListeners={},m.prototype.on.call(m.prototype,F,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(u),this._clearSelfAndDescendantCache(n))})),m.prototype.on.call(m.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(f)})),m.prototype.on.call(m.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(o)})),m.prototype.on.call(m.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(i)}));const p=Le.Factory.addGetterSetter;p(m,"zIndex"),p(m,"absolutePosition"),p(m,"position"),p(m,"x",0,(0,Re.getNumberValidator)()),p(m,"y",0,(0,Re.getNumberValidator)()),p(m,"globalCompositeOperation","source-over",(0,Re.getStringValidator)()),p(m,"opacity",1,(0,Re.getNumberValidator)()),p(m,"name","",(0,Re.getStringValidator)()),p(m,"id","",(0,Re.getStringValidator)()),p(m,"rotation",0,(0,Re.getNumberValidator)()),Le.Factory.addComponentsGetterSetter(m,"scale",["x","y"]),p(m,"scaleX",1,(0,Re.getNumberValidator)()),p(m,"scaleY",1,(0,Re.getNumberValidator)()),Le.Factory.addComponentsGetterSetter(m,"skew",["x","y"]),p(m,"skewX",0,(0,Re.getNumberValidator)()),p(m,"skewY",0,(0,Re.getNumberValidator)()),Le.Factory.addComponentsGetterSetter(m,"offset",["x","y"]),p(m,"offsetX",0,(0,Re.getNumberValidator)()),p(m,"offsetY",0,(0,Re.getNumberValidator)()),p(m,"dragDistance",null,(0,Re.getNumberValidator)()),p(m,"width",0,(0,Re.getNumberValidator)()),p(m,"height",0,(0,Re.getNumberValidator)()),p(m,"listening",!0,(0,Re.getBooleanValidator)()),p(m,"preventDefault",!0,(0,Re.getBooleanValidator)()),p(m,"filters",null,(function(t){return this._filterUpToDate=!1,t})),p(m,"visible",!0,(0,Re.getBooleanValidator)()),p(m,"transformsEnabled","all",(0,Re.getStringValidator)()),p(m,"size"),p(m,"dragBoundFunc"),p(m,"draggable",!1,(0,Re.getBooleanValidator)()),Le.Factory.backCompat(m,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})}));Ie(Ve),Ve.Node;var He=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;class i extends Ve.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const e=this.children||[],i=[];return e.forEach((function(e){t(e)&&i.push(e)})),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}add(...t){if(0===t.length)return this;if(t.length>1){for(let e=0;e<t.length;e++)this.add(t[e]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants((r=>{const n=r._isMatch(t);return n&&i.push(r),!(!n||!e)})),i}_descendants(t){let e=!1;const i=this.getChildren();for(const r of i){if(e=t(r),e)return!0;if(r.hasChildren()&&(e=r._descendants(t),e))return!0}return!1}toObject(){const t=Ve.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((e=>{t.children.push(e.toObject())})),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=Ve.Node.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach((i=>{i.isVisible()&&i.intersects(t)&&e.push(i)})),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}drawScene(t,e,i){const r=this.getLayer(),n=t||r&&r.getCanvas(),s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.scene,h=n&&n.isCache;if(!this.isVisible()&&!h)return this;if(o){s.save();const t=this.getAbsoluteTransform(e).getMatrix();s.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",n,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),r=t||i&&i.hitCanvas,n=r&&r.getContext(),s=this._getCanvasCache();if(s&&s.hit){n.save();const t=this.getAbsoluteTransform(e).getMatrix();n.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(n),n.restore()}else this._drawChildren("drawHit",r,e);return this}_drawChildren(t,e,i,r){var n;const s=e&&e.getContext(),a=this.clipWidth(),o=this.clipHeight(),h=this.clipFunc(),l="number"==typeof a&&"number"==typeof o||h,d=i===this;if(l){s.save();const t=this.getAbsoluteTransform(i);let e,r=t.getMatrix();if(s.transform(r[0],r[1],r[2],r[3],r[4],r[5]),s.beginPath(),h)e=h.call(this,s,this);else{const t=this.clipX(),e=this.clipY();s.rect(t||0,e||0,a,o)}s.clip.apply(s,e),r=t.copy().invert().getMatrix(),s.transform(r[0],r[1],r[2],r[3],r[4],r[5])}const c=!d&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;c&&(s.save(),s._applyGlobalCompositeOperation(this)),null===(n=this.children)||void 0===n||n.forEach((function(n){n[t](e,i,r)})),c&&s.restore(),l&&s.restore()}getClientRect(t={}){var e;const i=t.skipTransform,r=t.relativeTo;let n,s,a,o,h={x:1/0,y:1/0,width:0,height:0};const l=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(!e.visible())return;const i=e.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===i.width&&0===i.height||(void 0===n?(n=i.x,s=i.y,a=i.x+i.width,o=i.y+i.height):(n=Math.min(n,i.x),s=Math.min(s,i.y),a=Math.max(a,i.x+i.width),o=Math.max(o,i.y+i.height)))}));const d=this.find("Shape");let c=!1;for(let t=0;t<d.length;t++){if(d[t]._isVisible(this)){c=!0;break}}return h=c&&void 0!==n?{x:n,y:s,width:a-n,height:o-s}:{x:0,y:0,width:0,height:0},i?h:this._transformedRect(h,r)}}e.Container=i,Le.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),Le.Factory.addGetterSetter(i,"clipX",void 0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"clipY",void 0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"clipWidth",void 0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"clipHeight",void 0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"clipFunc")}));Ie(He),He.Container;var Ue=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCapturedShape=function(t){return i.get(t)},e.createEvent=n,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){s(t);if(!e.getStage())return;i.set(t,e),r&&e._fire("gotpointercapture",n(new PointerEvent("gotpointercapture")))},e.releaseCapture=s;const i=new Map,r=void 0!==Pe.Konva._global.PointerEvent;function n(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){const s=i.get(t);if(!s)return;const a=s.getStage();a&&a.content,i.delete(t),r&&s._fire("lostpointercapture",n(new PointerEvent("lostpointercapture")))}}));Ie(Ue),Ue.getCapturedShape,Ue.createEvent,Ue.hasPointerCapture,Ue.setPointerCapture,Ue.releaseCapture;var We=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const i=Pe,r="mouseleave",n="mouseover",s="mouseenter",a="mousemove",o="mousedown",h="mouseup",l="pointermove",d="pointerdown",c="pointerup",g="pointercancel",u="pointerout",f="pointerleave",F="pointerover",C="pointerenter",m="contextmenu",p="touchstart",A="touchend",j="touchmove",y="touchcancel",E="wheel",D=[[s,"_pointerenter"],[o,"_pointerdown"],[a,"_pointermove"],[h,"_pointerup"],[r,"_pointerleave"],[p,"_pointerdown"],[j,"_pointermove"],[A,"_pointerup"],[y,"_pointercancel"],[n,"_pointerover"],[E,"_wheel"],[m,"_contextmenu"],[d,"_pointerdown"],[l,"_pointermove"],[c,"_pointerup"],[g,"_pointercancel"],["lostpointercapture","_lostpointercapture"]],x={mouse:{[u]:"mouseout",[f]:r,[F]:n,[C]:s,[l]:a,[d]:o,[c]:h,[g]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[u]:"touchout",[f]:"touchleave",[F]:"touchover",[C]:"touchenter",[l]:j,[d]:p,[c]:A,[g]:y,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[u]:u,[f]:f,[F]:F,[C]:C,[l]:l,[d]:d,[c]:c,[g]:g,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},b=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",v=t=>{const e=b(t);return"pointer"===e?Pe.Konva.pointerEventsEnabled&&x.pointer:"touch"===e?x.touch:"mouse"===e?x.mouse:void 0};function _(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&Ne.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];class S extends He.Container{constructor(t){super(_(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{_(this.attrs)})),this._checkVisibility()}_validateAdd(t){const e="Layer"===t.getType(),i="FastLayer"===t.getType();e||i||Ne.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){const e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var e;e="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(e)}if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let t,e=this.children,i=e.length;for(t=0;t<i;t++)e[t].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),He.Container.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&Ne.Util._isInDocument(t)&&this.container().removeChild(t);const i=e.stages.indexOf(this);return i>-1&&e.stages.splice(i,1),Ne.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(Ne.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find((e=>e.id===t))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new Oe.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,r=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),r.forEach((function(e){if(!e.isVisible())return;const r=e._toKonvaCanvas(t);i.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())})),e}getIntersection(t){if(!t)return null;let e,i=this.children;for(e=i.length-1;e>=0;e--){const r=i[e].getIntersection(t);if(r)return r}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((i=>{i.setSize({width:t,height:e}),i.draw()}))}add(t,...e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}super.add(t);const i=this.children.length;return i>5&&Ne.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Pe.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return Ue.hasPointerCapture(t,this)}setPointerCapture(t){Ue.setPointerCapture(t,this)}releaseCapture(t){Ue.releaseCapture(t,this)}getLayers(){return this.children}_bindContentEvents(){Pe.Konva.isBrowser&&D.forEach((([t,e])=>{this.content.addEventListener(t,(t=>{this[e](t)}),{passive:!1})}))}_pointerenter(t){this.setPointersPositions(t);const e=v(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=v(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=v(t.type),i=b(t.type);if(!e)return;this.setPointersPositions(t);const r=this._getTargetShape(i),n=!(Pe.Konva.isDragging()||Pe.Konva.isTransforming())||Pe.Konva.hitOnDragEnabled;r&&n?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):n&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=v(t.type),i=b(t.type);if(!e)return;this.setPointersPositions(t);let r=!1;this._changedPointerPositions.forEach((n=>{const s=this.getIntersection(n);if(Ye.DD.justDragged=!1,Pe.Konva["_"+i+"ListenClick"]=!0,!s||!s.isListening())return void(this[i+"ClickStartShape"]=void 0);Pe.Konva.capturePointerEventsEnabled&&s.setPointerCapture(n.id),this[i+"ClickStartShape"]=s,s._fireAndBubble(e.pointerdown,{evt:t,pointerId:n.id}),r=!0;const a=t.type.indexOf("touch")>=0;s.preventDefault()&&t.cancelable&&a&&t.preventDefault()})),r||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=v(t.type),i=b(t.type);if(!e)return;Pe.Konva.isDragging()&&Ye.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);if(!(!(Pe.Konva.isDragging()||Pe.Konva.isTransforming())||Pe.Konva.hitOnDragEnabled))return;const r={};let n=!1;const s=this._getTargetShape(i);this._changedPointerPositions.forEach((a=>{const o=Ue.getCapturedShape(a.id)||this.getIntersection(a),h=a.id,l={evt:t,pointerId:h},d=s!==o;if(d&&s&&(s._fireAndBubble(e.pointerout,{...l},o),s._fireAndBubble(e.pointerleave,{...l},o)),o){if(r[o._id])return;r[o._id]=!0}o&&o.isListening()?(n=!0,d&&(o._fireAndBubble(e.pointerover,{...l},s),o._fireAndBubble(e.pointerenter,{...l},s),this[i+"targetShape"]=o),o._fireAndBubble(e.pointermove,{...l})):s&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:h}),this[i+"targetShape"]=null)})),n||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=v(t.type),i=b(t.type);if(!e)return;this.setPointersPositions(t);const r=this[i+"ClickStartShape"],n=this[i+"ClickEndShape"],s={};let a=!1;this._changedPointerPositions.forEach((o=>{const h=Ue.getCapturedShape(o.id)||this.getIntersection(o);if(h){if(h.releaseCapture(o.id),s[h._id])return;s[h._id]=!0}const l=o.id,d={evt:t,pointerId:l};let c=!1;Pe.Konva["_"+i+"InDblClickWindow"]?(c=!0,clearTimeout(this[i+"DblTimeout"])):Ye.DD.justDragged||(Pe.Konva["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout((function(){Pe.Konva["_"+i+"InDblClickWindow"]=!1}),Pe.Konva.dblClickWindow),h&&h.isListening()?(a=!0,this[i+"ClickEndShape"]=h,h._fireAndBubble(e.pointerup,{...d}),Pe.Konva["_"+i+"ListenClick"]&&r&&r===h&&(h._fireAndBubble(e.pointerclick,{...d}),c&&n&&n===h&&h._fireAndBubble(e.pointerdblclick,{...d}))):(this[i+"ClickEndShape"]=null,Pe.Konva["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:l}),c&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:l}))})),a||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Pe.Konva["_"+i+"ListenClick"]=!1,t.cancelable&&"touch"!==i&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(m,{evt:t}):this._fire(m,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(E,{evt:t}):this._fire(E,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=Ue.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(c,Ue.createEvent(t)),Ue.releaseCapture(t.pointerId)}_lostpointercapture(t){Ue.releaseCapture(t.pointerId)}setPointersPositions(t){let e=this._getContentPosition(),i=null,r=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}))):(i=(t.clientX-e.left)/e.scaleX,r=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:Ne.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:r,id:Ne.Util._getFirstPointerId(t)}])}_setPointerPosition(t){Ne.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Oe.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Oe.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Pe.Konva.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return Ne.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}e.Stage=S,S.prototype.nodeType="Stage",(0,i._registerNode)(S),Le.Factory.addGetterSetter(S,"container"),Pe.Konva.isBrowser&&document.addEventListener("visibilitychange",(()=>{e.stages.forEach((t=>{t.batchDraw()}))}))}));Ie(We),We.Stage,We.stages;var qe=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const i=Pe,r="hasShadow",n="shadowRGBA",s="patternImage",a="linearGradient",o="radialGradient";let h;function l(){return h||(h=Ne.Util.createCanvasElement().getContext("2d"),h)}e.shapes={};class d extends Ve.Node{constructor(t){let i;for(super(t);i=Ne.Util.getRandomColor(),!i||i in e.shapes;);this.colorKey=i,e.shapes[i]=this}getContext(){return Ne.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Ne.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(r,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(s,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=l().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const e=new Ne.Transform;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(Pe.Konva.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=e.getMatrix(),r="undefined"==typeof DOMMatrix?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);t.setTransform(r)}return t}}_getLinearGradient(){return this._getCache(a,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=l(),i=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),n=e.createLinearGradient(i.x,i.y,r.x,r.y);for(let e=0;e<t.length;e+=2)n.addColorStop(t[e],t[e+1]);return n}}_getRadialGradient(){return this._getCache(o,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=l(),i=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),n=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let e=0;e<t.length;e+=2)n.addColorStop(t[e],t[e+1]);return n}}getShadowRGBA(){return this._getCache(n,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=Ne.Util.colorToRGBA(this.shadowColor());return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;i.getContext().clear(),this.drawHit(i,void 0,!0);return i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Ve.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!(null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e))return!1;const i=t||this.hasFill(),r=this.hasStroke(),n=1!==this.getAbsoluteOpacity();if(i&&r&&n)return!0;const s=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(i&&r&&s&&a)}setStrokeHitEnabled(t){Ne.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const r=t.skipTransform,n=t.relativeTo||e&&this.getStage()||void 0,s=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=s.width+a,h=s.height+a,l=!t.skipShadow&&this.hasShadow(),d=l?this.shadowOffsetX():0,c=l?this.shadowOffsetY():0,g=o+Math.abs(d),u=h+Math.abs(c),f=l&&this.shadowBlur()||0,F={width:g+2*f,height:u+2*f,x:-(a/2+f)+Math.min(d,0)+s.x,y:-(a/2+f)+Math.min(c,0)+s.y};return r?F:this._transformedRect(F,n)}drawScene(t,e,i){const r=this.getLayer();let n,s,a=t||r.getCanvas(),o=a.getContext(),h=this._getCanvasCache(),l=this.getSceneFunc(),d=this.hasShadow();const c=a.isCache,g=e===this;if(!this.isVisible()&&!g)return this;if(h){o.save();const t=this.getAbsoluteTransform(e).getMatrix();return o.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!l)return this;if(o.save(),this._useBufferCanvas()&&!c){n=this.getStage();const t=i||n.bufferCanvas;s=t.getContext(),s.clear(),s.save(),s._applyLineJoin(this);var u=this.getAbsoluteTransform(e).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),l.call(this,s,this),s.restore();const r=t.pixelRatio;d&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(t._canvas,0,0,t.width/r,t.height/r)}else{if(o._applyLineJoin(this),!g){u=this.getAbsoluteTransform(e).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}d&&o._applyShadow(this),l.call(this,o,this)}return o.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const r=this.getLayer(),n=t||r.hitCanvas,s=n&&n.getContext(),a=this.hitFunc()||this.sceneFunc(),o=this._getCanvasCache(),h=o&&o.hit;if(this.colorKey||Ne.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){s.save();const t=this.getAbsoluteTransform(e).getMatrix();return s.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;s.save(),s._applyLineJoin(this);if(!(this===e)){const t=this.getAbsoluteTransform(e).getMatrix();s.transform(t[0],t[1],t[2],t[3],t[4],t[5])}return a.call(this,s,this),s.restore(),this}drawHitFromCache(t=0){let e,i,r,n,s,a,o=this._getCanvasCache(),h=this._getCachedSceneCanvas(),l=o.hit,d=l.getContext(),c=l.getWidth(),g=l.getHeight();d.clear(),d.drawImage(h._canvas,0,0,c,g);try{for(e=d.getImageData(0,0,c,g),i=e.data,r=i.length,n=Ne.Util._hexToRgb(this.colorKey),s=0;s<r;s+=4)a=i[s+3],a>t?(i[s]=n.r,i[s+1]=n.g,i[s+2]=n.b,i[s+3]=255):i[s+3]=0;d.putImageData(e,0,0)}catch(t){Ne.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}hasPointerCapture(t){return Ue.hasPointerCapture(t,this)}setPointerCapture(t){Ue.setPointerCapture(t,this)}releaseCapture(t){Ue.releaseCapture(t,this)}}e.Shape=d,d.prototype._fillFunc=function(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()},d.prototype._strokeFunc=function(t){t.stroke()},d.prototype._fillFuncHit=function(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()},d.prototype._strokeFuncHit=function(t){t.stroke()},d.prototype._centroid=!1,d.prototype.nodeType="Shape",(0,i._registerNode)(d),d.prototype.eventListeners={},d.prototype.on.call(d.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(r)})),d.prototype.on.call(d.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(n)})),d.prototype.on.call(d.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(s)})),d.prototype.on.call(d.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(a)})),d.prototype.on.call(d.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(o)})),Le.Factory.addGetterSetter(d,"stroke",void 0,(0,Re.getStringOrGradientValidator)()),Le.Factory.addGetterSetter(d,"strokeWidth",2,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"fillAfterStrokeEnabled",!1),Le.Factory.addGetterSetter(d,"hitStrokeWidth","auto",(0,Re.getNumberOrAutoValidator)()),Le.Factory.addGetterSetter(d,"strokeHitEnabled",!0,(0,Re.getBooleanValidator)()),Le.Factory.addGetterSetter(d,"perfectDrawEnabled",!0,(0,Re.getBooleanValidator)()),Le.Factory.addGetterSetter(d,"shadowForStrokeEnabled",!0,(0,Re.getBooleanValidator)()),Le.Factory.addGetterSetter(d,"lineJoin"),Le.Factory.addGetterSetter(d,"lineCap"),Le.Factory.addGetterSetter(d,"sceneFunc"),Le.Factory.addGetterSetter(d,"hitFunc"),Le.Factory.addGetterSetter(d,"dash"),Le.Factory.addGetterSetter(d,"dashOffset",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"shadowColor",void 0,(0,Re.getStringValidator)()),Le.Factory.addGetterSetter(d,"shadowBlur",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"shadowOpacity",1,(0,Re.getNumberValidator)()),Le.Factory.addComponentsGetterSetter(d,"shadowOffset",["x","y"]),Le.Factory.addGetterSetter(d,"shadowOffsetX",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"shadowOffsetY",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"fillPatternImage"),Le.Factory.addGetterSetter(d,"fill",void 0,(0,Re.getStringOrGradientValidator)()),Le.Factory.addGetterSetter(d,"fillPatternX",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"fillPatternY",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"fillLinearGradientColorStops"),Le.Factory.addGetterSetter(d,"strokeLinearGradientColorStops"),Le.Factory.addGetterSetter(d,"fillRadialGradientStartRadius",0),Le.Factory.addGetterSetter(d,"fillRadialGradientEndRadius",0),Le.Factory.addGetterSetter(d,"fillRadialGradientColorStops"),Le.Factory.addGetterSetter(d,"fillPatternRepeat","repeat"),Le.Factory.addGetterSetter(d,"fillEnabled",!0),Le.Factory.addGetterSetter(d,"strokeEnabled",!0),Le.Factory.addGetterSetter(d,"shadowEnabled",!0),Le.Factory.addGetterSetter(d,"dashEnabled",!0),Le.Factory.addGetterSetter(d,"strokeScaleEnabled",!0),Le.Factory.addGetterSetter(d,"fillPriority","color"),Le.Factory.addComponentsGetterSetter(d,"fillPatternOffset",["x","y"]),Le.Factory.addGetterSetter(d,"fillPatternOffsetX",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"fillPatternOffsetY",0,(0,Re.getNumberValidator)()),Le.Factory.addComponentsGetterSetter(d,"fillPatternScale",["x","y"]),Le.Factory.addGetterSetter(d,"fillPatternScaleX",1,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(d,"fillPatternScaleY",1,(0,Re.getNumberValidator)()),Le.Factory.addComponentsGetterSetter(d,"fillLinearGradientStartPoint",["x","y"]),Le.Factory.addComponentsGetterSetter(d,"strokeLinearGradientStartPoint",["x","y"]),Le.Factory.addGetterSetter(d,"fillLinearGradientStartPointX",0),Le.Factory.addGetterSetter(d,"strokeLinearGradientStartPointX",0),Le.Factory.addGetterSetter(d,"fillLinearGradientStartPointY",0),Le.Factory.addGetterSetter(d,"strokeLinearGradientStartPointY",0),Le.Factory.addComponentsGetterSetter(d,"fillLinearGradientEndPoint",["x","y"]),Le.Factory.addComponentsGetterSetter(d,"strokeLinearGradientEndPoint",["x","y"]),Le.Factory.addGetterSetter(d,"fillLinearGradientEndPointX",0),Le.Factory.addGetterSetter(d,"strokeLinearGradientEndPointX",0),Le.Factory.addGetterSetter(d,"fillLinearGradientEndPointY",0),Le.Factory.addGetterSetter(d,"strokeLinearGradientEndPointY",0),Le.Factory.addComponentsGetterSetter(d,"fillRadialGradientStartPoint",["x","y"]),Le.Factory.addGetterSetter(d,"fillRadialGradientStartPointX",0),Le.Factory.addGetterSetter(d,"fillRadialGradientStartPointY",0),Le.Factory.addComponentsGetterSetter(d,"fillRadialGradientEndPoint",["x","y"]),Le.Factory.addGetterSetter(d,"fillRadialGradientEndPointX",0),Le.Factory.addGetterSetter(d,"fillRadialGradientEndPointY",0),Le.Factory.addGetterSetter(d,"fillPatternRotation",0),Le.Factory.addGetterSetter(d,"fillRule",void 0,(0,Re.getStringValidator)()),Le.Factory.backCompat(d,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}));Ie(qe),qe.Shape,qe.shapes;var ze=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;const i=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],r=i.length;class n extends He.Container{constructor(t){super(t),this.canvas=new Oe.SceneCanvas,this.hitCanvas=new Oe.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ve.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Ve.Node.prototype.moveUp.call(this))return!1;const t=this.getStage();return!(!t||!t.content)&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ve.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ve.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Ve.Node.prototype.remove.call(this),t&&t.parentNode&&Ne.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();"Group"!==e&&"Shape"!==e&&Ne.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),Ve.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Ne.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Ne.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Ne.Util.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,n=!1;for(;;){for(let s=0;s<r;s++){const r=i[s],a=this._getIntersection({x:t.x+r.x*e,y:t.y+r.y*e}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(!n)return null;e+=1}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=i[3];if(255===r){const t=Ne.Util._rgbToHex(i[0],i[1],i[2]),e=qe.shapes["#"+t];return e?{shape:e}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(t,e){const i=this.getLayer(),r=t||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),He.Container.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this}drawHit(t,e){const i=this.getLayer(),r=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),He.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Ne.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Ne.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return Ne.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}e.Layer=n,n.prototype.nodeType="Layer",(0,Pe._registerNode)(n),Le.Factory.addGetterSetter(n,"imageSmoothingEnabled",!0),Le.Factory.addGetterSetter(n,"clearBeforeDraw",!0),Le.Factory.addGetterSetter(n,"hitGraphEnabled",!0,(0,Re.getBooleanValidator)())}));Ie(ze),ze.Layer;var Ke=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;class i extends ze.Layer{constructor(t){super(t),this.listening(!1),Ne.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}e.FastLayer=i,i.prototype.nodeType="FastLayer",(0,Pe._registerNode)(i)}));Ie(Ke),Ke.FastLayer;var Xe=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;class i extends He.Container{_validateAdd(t){const e=t.getType();"Group"!==e&&"Shape"!==e&&Ne.Util.throw("You may only add groups and shapes to groups.")}}e.Group=i,i.prototype.nodeType="Group",(0,Pe._registerNode)(i)}));Ie(Xe),Xe.Group;var $e=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;const i=Pe.glob.performance&&Pe.glob.performance.now?function(){return Pe.glob.performance.now()}:function(){return(new Date).getTime()};class r{constructor(t,e){this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let r=0;r<i;r++)if(e[r]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const t=r.animations,e=t.length;for(let i=0;i<e;i++)if(t[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),r._addAnimation(this),this}stop(){return r._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,r=i.length;for(let t=0;t<r;t++)if(i[t].id===e){this.animations.splice(t,1);break}}static _runFrames(){const t={},e=this.animations;for(let r=0;r<e.length;r++){const n=e[r],s=n.layers,a=n.func;n._updateFrameObject(i());const o=s.length;let h;if(h=!a||!1!==a.call(n,n.frame),h)for(let e=0;e<o;e++){const i=s[e];void 0!==i._id&&(t[i._id]=i)}}for(const e in t)t.hasOwnProperty(e)&&t[e].batchDraw()}static _animationLoop(){const t=r;t.animations.length?(t._runFrames(),Ne.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Ne.Util.requestAnimFrame(this._animationLoop))}}e.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1}));Ie($e),$e.Animation;var Je=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;let i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},r=0,n=["fill","stroke","shadowColor"];class s{constructor(t,e,i,r,n,s,a){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=n-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class a{constructor(t){let n,o,h=this,l=t.node,d=l._id,c=t.easing||e.Easings.Linear,g=!!t.yoyo;n=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=l,this._id=r++;const u=l.getLayer()||(l instanceof Pe.Konva.Stage?l.getLayers():null);for(o in u||Ne.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new $e.Animation((function(){h.tween.onEnterFrame()}),u),this.tween=new s(o,(function(t){h._tweenFunc(t)}),c,0,1,1e3*n,g),this._addListeners(),a.attrs[d]||(a.attrs[d]={}),a.attrs[d][this._id]||(a.attrs[d][this._id]={}),a.tweens[d]||(a.tweens[d]={}),t)void 0===i[o]&&this._addAttr(o,t[o]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){let i,r,s,o,h,l,d,c,g=this.node,u=g._id;if(s=a.tweens[u][t],s&&delete a.attrs[u][s][t],i=g.getAttr(t),Ne.Util._isArray(e))if(r=[],h=Math.max(e.length,i.length),"points"===t&&e.length!==i.length&&(e.length>i.length?(d=i,i=Ne.Util._prepareArrayForTween(i,e,g.closed())):(l=e,e=Ne.Util._prepareArrayForTween(e,i,g.closed()))),0===t.indexOf("fill"))for(o=0;o<h;o++)if(o%2==0)r.push(e[o]-i[o]);else{const t=Ne.Util.colorToRGBA(i[o]);c=Ne.Util.colorToRGBA(e[o]),i[o]=t,r.push({r:c.r-t.r,g:c.g-t.g,b:c.b-t.b,a:c.a-t.a})}else for(o=0;o<h;o++)r.push(e[o]-i[o]);else-1!==n.indexOf(t)?(i=Ne.Util.colorToRGBA(i),c=Ne.Util.colorToRGBA(e),r={r:c.r-i.r,g:c.g-i.g,b:c.b-i.b,a:c.a-i.a}):r=e-i;a.attrs[u][this._id][t]={start:i,diff:r,end:e,trueEnd:l,trueStart:d},a.tweens[u][t]=this._id}_tweenFunc(t){let e,i,r,s,o,h,l,d,c=this.node,g=a.attrs[c._id][this._id];for(e in g){if(i=g[e],r=i.start,s=i.diff,d=i.end,Ne.Util._isArray(r))if(o=[],l=Math.max(r.length,d.length),0===e.indexOf("fill"))for(h=0;h<l;h++)h%2==0?o.push((r[h]||0)+s[h]*t):o.push("rgba("+Math.round(r[h].r+s[h].r*t)+","+Math.round(r[h].g+s[h].g*t)+","+Math.round(r[h].b+s[h].b*t)+","+(r[h].a+s[h].a*t)+")");else for(h=0;h<l;h++)o.push((r[h]||0)+s[h]*t);else o=-1!==n.indexOf(e)?"rgba("+Math.round(r.r+s.r*t)+","+Math.round(r.g+s.g*t)+","+Math.round(r.b+s.b*t)+","+(r.a+s.a*t)+")":r+s*t;c.setAttr(e,o)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=a.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=a.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let t,e=this.node._id,i=this._id,r=a.tweens[e];for(t in this.pause(),r)delete a.tweens[e][t];delete a.attrs[e][i]}}e.Tween=a,a.attrs={},a.tweens={},Ve.Node.prototype.to=function(t){const e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};new a(t).play()},e.Easings={BackEaseIn(t,e,i,r){const n=1.70158;return i*(t/=r)*t*((n+1)*t-n)+e},BackEaseOut(t,e,i,r){const n=1.70158;return i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},BackEaseInOut(t,e,i,r){let n=1.70158;return(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},ElasticEaseIn(t,e,i,r,n,s){let a=0;return 0===t?e:1==(t/=r)?e+i:(s||(s=.3*r),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)+e)},ElasticEaseOut(t,e,i,r,n,s){let a=0;return 0===t?e:1==(t/=r)?e+i:(s||(s=.3*r),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut(t,e,i,r,n,s){let a=0;return 0===t?e:2==(t/=r/2)?e+i:(s||(s=r*(.3*1.5)),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut:(t,e,i,r)=>(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,i,r,n)=>r-e.Easings.BounceEaseOut(n-t,0,r,n)+i,BounceEaseInOut:(t,i,r,n)=>t<n/2?.5*e.Easings.BounceEaseIn(2*t,0,r,n)+i:.5*e.Easings.BounceEaseOut(2*t-n,0,r,n)+.5*r+i,EaseIn:(t,e,i,r)=>i*(t/=r)*t+e,EaseOut:(t,e,i,r)=>-i*(t/=r)*(t-2)+e,EaseInOut:(t,e,i,r)=>(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,i,r)=>i*(t/=r)*t*t*t*t+e,StrongEaseOut:(t,e,i,r)=>i*((t=t/r-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,i,r)=>(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,i,r)=>i*t/r+e}}));Ie(Je),Je.Easings,Je.Tween;var Qe=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0,e.Konva=Ne.Util._assign(Pe.Konva,{Util:Ne.Util,Transform:Ne.Transform,Node:Ve.Node,Container:He.Container,Stage:We.Stage,stages:We.stages,Layer:ze.Layer,FastLayer:Ke.FastLayer,Group:Xe.Group,DD:Ye.DD,Shape:qe.Shape,shapes:qe.shapes,Animation:$e.Animation,Tween:Je.Tween,Easings:Je.Easings,Context:Ge.Context,Canvas:Oe.Canvas}),e.default=e.Konva}));Ie(Qe),Qe.Konva;var Ze=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;const i=Pe;class r extends qe.Shape{_sceneFunc(t){const e=Pe.Konva.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),r=Pe.Konva.getAngle(i?360-this.angle():this.angle()),n=Math.cos(Math.min(r,Math.PI)),s=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),a=Math.sin(Math.min(r,Math.PI/2)),o=n*(n>0?t:e),h=s*(s>0?t:e),l=a*(a>0?e:t);return{x:o,y:i?-1*l:h,width:1*e-o,height:l-h}}}e.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(r),Le.Factory.addGetterSetter(r,"innerRadius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(r,"outerRadius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(r,"angle",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(r,"clockwise",!1,(0,Re.getBooleanValidator)())}));Ie(Ze),Ze.Arc;var ti=Te((function(t,e){function i(t,e,i,r,n,s,a){const o=Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),l=a*o/(o+h),d=a*h/(o+h);return[i-l*(n-t),r-l*(s-e),i+d*(n-t),r+d*(s-e)]}function r(t,e){const r=t.length,n=[];for(let s=2;s<r-2;s+=2){const r=i(t[s-2],t[s-1],t[s],t[s+1],t[s+2],t[s+3],e);isNaN(r[0])||(n.push(r[0]),n.push(r[1]),n.push(t[s]),n.push(t[s+1]),n.push(r[2]),n.push(r[3]))}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;class n extends qe.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(t){let e,i,r,n=this.points(),s=n.length,a=this.tension(),o=this.closed(),h=this.bezier();if(s){if(t.beginPath(),t.moveTo(n[0],n[1]),0!==a&&s>4){for(e=this.getTensionPoints(),i=e.length,r=o?0:4,o||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<i-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);o||t.quadraticCurveTo(e[i-2],e[i-1],n[s-2],n[s-1])}else if(h)for(r=2;r<s;)t.bezierCurveTo(n[r++],n[r++],n[r++],n[r++],n[r++],n[r++]);else for(r=2;r<s;r+=2)t.lineTo(n[r],n[r+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,n=this.tension(),s=i(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),a=i(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=r(t,n);return[s[2],s[3]].concat(o).concat([a[0],a[1],t[e-2],t[e-1],a[2],a[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points();let e,i,r=t[0],n=t[0],s=t[1],a=t[1];for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],r=Math.min(r,e),n=Math.max(n,e),s=Math.min(s,i),a=Math.max(a,i);return{x:r,y:s,width:n-r,height:a-s}}}e.Line=n,n.prototype.className="Line",n.prototype._attrsAffectingSize=["points","bezier","tension"],(0,Pe._registerNode)(n),Le.Factory.addGetterSetter(n,"closed",!1),Le.Factory.addGetterSetter(n,"bezier",!1),Le.Factory.addGetterSetter(n,"tension",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(n,"points",[],(0,Re.getNumberArrayValidator)())}));Ie(ti),ti.Line;var ei=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];e.getCubicArcLength=(t,r,n)=>{let s,a;const o=n/2;s=0;for(let n=0;n<20;n++)a=o*e.tValues[20][n]+o,s+=e.cValues[20][n]*i(t,r,a);return o*s};function i(t,e,i){const n=r(1,i,t),s=r(1,i,e),a=n*n+s*s;return Math.sqrt(a)}e.getQuadraticArcLength=(t,e,i)=>{void 0===i&&(i=1);const r=t[0]-2*t[1]+t[2],n=e[0]-2*e[1]+e[2],s=2*t[1]-2*t[0],a=2*e[1]-2*e[0],o=4*(r*r+n*n),h=4*(r*s+n*a),l=s*s+a*a;if(0===o)return i*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));const d=h/(2*o),c=i+d,g=l/o-d*d,u=c*c+g>0?Math.sqrt(c*c+g):0,f=d*d+g>0?Math.sqrt(d*d+g):0,F=d+Math.sqrt(d*d+g)!==0?g*Math.log(Math.abs((c+u)/(d+f))):0;return Math.sqrt(o)/2*(c*u-d*f+F)};const r=(t,i,n)=>{const s=n.length-1;let a,o;if(0===s)return 0;if(0===t){o=0;for(let t=0;t<=s;t++)o+=e.binomialCoefficients[s][t]*Math.pow(1-i,s-t)*Math.pow(i,t)*n[t];return o}a=new Array(s);for(let t=0;t<s;t++)a[t]=s*(n[t+1]-n[t]);return r(t-1,i,a)};e.t2length=(t,e,i)=>{let r=1,n=t/e,s=(t-i(n))/e,a=0;for(;r>.001;){const o=i(n+s),h=Math.abs(t-o)/e;if(h<r)r=h,n+=s;else{const a=i(n-s),o=Math.abs(t-a)/e;o<r?(r=o,n-=s):s/=2}if(a++,a>500)break}return n}}));Ie(ei),ei.t2length,ei.getQuadraticArcLength,ei.getCubicArcLength,ei.binomialCoefficients,ei.cValues,ei.tValues;var ii=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;class i extends qe.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute()}))}_readDataAttribute(){this.dataArray=i.parsePathData(this.data()),this.pathLength=i.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let f=0;f<e.length;f++){const F=e[f].command,C=e[f].points;switch(F){case"L":t.lineTo(C[0],C[1]);break;case"M":t.moveTo(C[0],C[1]);break;case"C":t.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5]);break;case"Q":t.quadraticCurveTo(C[0],C[1],C[2],C[3]);break;case"A":var r=C[0],n=C[1],s=C[2],a=C[3],o=C[4],h=C[5],l=C[6],d=C[7],c=s>a?s:a,g=s>a?1:s/a,u=s>a?a/s:1;t.translate(r,n),t.rotate(l),t.scale(g,u),t.arc(0,0,c,o,o+h,1-d),t.scale(1/g,1/u),t.rotate(-l),t.translate(-r,-n);break;case"z":i=!0,t.closePath()}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach((function(e){if("A"===e.command){const r=e.points[4],n=e.points[5],s=e.points[4]+n;let a=Math.PI/180;if(Math.abs(r-s)<a&&(a=Math.abs(r-s)),n<0)for(let n=r-a;n>s;n-=a){const r=i.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);t.push(r.x,r.y)}else for(let n=r+a;n<s;n+=a){const r=i.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);t.push(r.x,r.y)}}else if("C"===e.command)for(let r=0;r<=1;r+=.01){const n=i.getPointOnCubicBezier(r,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(n.x,n.y)}else t=t.concat(e.points)}));let e,r,n=t[0],s=t[0],a=t[1],o=t[1];for(let i=0;i<t.length/2;i++)e=t[2*i],r=t[2*i+1],isNaN(e)||(n=Math.min(n,e),s=Math.max(s,e)),isNaN(r)||(a=Math.min(a,r),o=Math.max(o,r));return{x:n,y:a,width:s-n,height:o-a}}getLength(){return this.pathLength}getPointAtLength(t){return i.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let r,n=0,s=e.length;if(!s)return null;for(;n<s&&t>e[n].pathLength;)t-=e[n].pathLength,++n;if(n===s)return r=e[n-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=e[n].points.slice(0,2),{x:r[0],y:r[1]};const a=e[n],o=a.points;switch(a.command){case"L":return i.getPointOnLine(t,a.start.x,a.start.y,o[0],o[1]);case"C":return i.getPointOnCubicBezier((0,ei.t2length)(t,i.getPathLength(e),(t=>(0,ei.getCubicArcLength)([a.start.x,o[0],o[2],o[4]],[a.start.y,o[1],o[3],o[5]],t))),a.start.x,a.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return i.getPointOnQuadraticBezier((0,ei.t2length)(t,i.getPathLength(e),(t=>(0,ei.getQuadraticArcLength)([a.start.x,o[0],o[2]],[a.start.y,o[1],o[3]],t))),a.start.x,a.start.y,o[0],o[1],o[2],o[3]);case"A":var h=o[0],l=o[1],d=o[2],c=o[3],g=o[4],u=o[5],f=o[6];return g+=u*t/a.pathLength,i.getPointOnEllipticalArc(h,l,d,c,g,f)}return null}static getPointOnLine(t,e,i,r,n,s,a){s=null!=s?s:e,a=null!=a?a:i;const o=this.getLineLength(e,i,r,n);if(o<1e-10)return{x:e,y:i};if(r===e)return{x:s,y:a+(n>i?t:-t)};const h=(n-i)/(r-e),l=Math.sqrt(t*t/(1+h*h))*(r<e?-1:1),d=h*l;if(Math.abs(a-i-h*(s-e))<1e-10)return{x:s+l,y:a+d};const c=((s-e)*(r-e)+(a-i)*(n-i))/(o*o),g=e+c*(r-e),u=i+c*(n-i),f=this.getLineLength(s,a,g,u),F=Math.sqrt(t*t-f*f),C=Math.sqrt(F*F/(1+h*h))*(r<e?-1:1);return{x:g+C,y:u+h*C}}static getPointOnCubicBezier(t,e,i,r,n,s,a,o,h){function l(t){return t*t*t}function d(t){return 3*t*t*(1-t)}function c(t){return 3*t*(1-t)*(1-t)}function g(t){return(1-t)*(1-t)*(1-t)}return{x:o*l(t)+s*d(t)+r*c(t)+e*g(t),y:h*l(t)+a*d(t)+n*c(t)+i*g(t)}}static getPointOnQuadraticBezier(t,e,i,r,n,s,a){function o(t){return t*t}function h(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:s*o(t)+r*h(t)+e*l(t),y:a*o(t)+n*h(t)+i*l(t)}}static getPointOnEllipticalArc(t,e,i,r,n,s){const a=Math.cos(s),o=Math.sin(s),h=i*Math.cos(n),l=r*Math.sin(n);return{x:t+(h*a-l*o),y:e+(h*o+l*a)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<i.length;r++)e=e.replace(new RegExp(i[r],"g"),"|"+i[r]);const n=e.split("|"),s=[],a=[];let o=0,h=0;const l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let d;for(r=1;r<n.length;r++){let t=n[r],e=t.charAt(0);for(t=t.slice(1),a.length=0;d=l.exec(t);)a.push(d[0]);const i=[];for(let t=0,e=a.length;t<e;t++){if("00"===a[t]){i.push(0,0);continue}const e=parseFloat(a[t]);isNaN(e)?i.push(0):i.push(e)}for(;i.length>0&&!isNaN(i[0]);){let t="",r=[];const n=o,a=h;var c,g,u,f,F,C,m,p,A,j;switch(e){case"l":o+=i.shift(),h+=i.shift(),t="L",r.push(o,h);break;case"L":o=i.shift(),h=i.shift(),r.push(o,h);break;case"m":var y=i.shift(),E=i.shift();if(o+=y,h+=E,t="M",s.length>2&&"z"===s[s.length-1].command)for(let t=s.length-2;t>=0;t--)if("M"===s[t].command){o=s[t].points[0]+y,h=s[t].points[1]+E;break}r.push(o,h),e="l";break;case"M":o=i.shift(),h=i.shift(),t="M",r.push(o,h),e="L";break;case"h":o+=i.shift(),t="L",r.push(o,h);break;case"H":o=i.shift(),t="L",r.push(o,h);break;case"v":h+=i.shift(),t="L",r.push(o,h);break;case"V":h=i.shift(),t="L",r.push(o,h);break;case"C":r.push(i.shift(),i.shift(),i.shift(),i.shift()),o=i.shift(),h=i.shift(),r.push(o,h);break;case"c":r.push(o+i.shift(),h+i.shift(),o+i.shift(),h+i.shift()),o+=i.shift(),h+=i.shift(),t="C",r.push(o,h);break;case"S":g=o,u=h,"C"===(c=s[s.length-1]).command&&(g=o+(o-c.points[2]),u=h+(h-c.points[3])),r.push(g,u,i.shift(),i.shift()),o=i.shift(),h=i.shift(),t="C",r.push(o,h);break;case"s":g=o,u=h,"C"===(c=s[s.length-1]).command&&(g=o+(o-c.points[2]),u=h+(h-c.points[3])),r.push(g,u,o+i.shift(),h+i.shift()),o+=i.shift(),h+=i.shift(),t="C",r.push(o,h);break;case"Q":r.push(i.shift(),i.shift()),o=i.shift(),h=i.shift(),r.push(o,h);break;case"q":r.push(o+i.shift(),h+i.shift()),o+=i.shift(),h+=i.shift(),t="Q",r.push(o,h);break;case"T":g=o,u=h,"Q"===(c=s[s.length-1]).command&&(g=o+(o-c.points[0]),u=h+(h-c.points[1])),o=i.shift(),h=i.shift(),t="Q",r.push(g,u,o,h);break;case"t":g=o,u=h,"Q"===(c=s[s.length-1]).command&&(g=o+(o-c.points[0]),u=h+(h-c.points[1])),o+=i.shift(),h+=i.shift(),t="Q",r.push(g,u,o,h);break;case"A":f=i.shift(),F=i.shift(),C=i.shift(),m=i.shift(),p=i.shift(),A=o,j=h,o=i.shift(),h=i.shift(),t="A",r=this.convertEndpointToCenterParameterization(A,j,o,h,m,p,f,F,C);break;case"a":f=i.shift(),F=i.shift(),C=i.shift(),m=i.shift(),p=i.shift(),A=o,j=h,o+=i.shift(),h+=i.shift(),t="A",r=this.convertEndpointToCenterParameterization(A,j,o,h,m,p,f,F,C)}s.push({command:t||e,points:r,start:{x:n,y:a},pathLength:this.calcLength(n,a,t||e,r)})}"z"!==e&&"Z"!==e||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(t,e,r,n){let s,a,o,h;const l=i;switch(r){case"L":return l.getLineLength(t,e,n[0],n[1]);case"C":return(0,ei.getCubicArcLength)([t,n[0],n[2],n[4]],[e,n[1],n[3],n[5]],1);case"Q":return(0,ei.getQuadraticArcLength)([t,n[0],n[2]],[e,n[1],n[3]],1);case"A":s=0;var d=n[4],c=n[5],g=n[4]+c,u=Math.PI/180;if(Math.abs(d-g)<u&&(u=Math.abs(d-g)),a=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],d,0),c<0)for(h=d-u;h>g;h-=u)o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),s+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(h=d+u;h<g;h+=u)o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),s+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],g,0),s+=l.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,e,i,r,n,s,a,o,h){const l=h*(Math.PI/180),d=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-r)/2,c=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-r)/2,g=d*d/(a*a)+c*c/(o*o);g>1&&(a*=Math.sqrt(g),o*=Math.sqrt(g));let u=Math.sqrt((a*a*(o*o)-a*a*(c*c)-o*o*(d*d))/(a*a*(c*c)+o*o*(d*d)));n===s&&(u*=-1),isNaN(u)&&(u=0);const f=u*a*c/o,F=u*-o*d/a,C=(t+i)/2+Math.cos(l)*f-Math.sin(l)*F,m=(e+r)/2+Math.sin(l)*f+Math.cos(l)*F,p=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},A=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(p(t)*p(e))},j=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(A(t,e))},y=j([1,0],[(d-f)/a,(c-F)/o]),E=[(d-f)/a,(c-F)/o],D=[(-1*d-f)/a,(-1*c-F)/o];let x=j(E,D);return A(E,D)<=-1&&(x=Math.PI),A(E,D)>=1&&(x=0),0===s&&x>0&&(x-=2*Math.PI),1===s&&x<0&&(x+=2*Math.PI),[C,m,a,o,y,x,l,s]}}e.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"data")}));Ie(ii),ii.Path;var ri=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;class i extends ti.Line{_sceneFunc(t){super._sceneFunc(t);const e=2*Math.PI,i=this.points();let r=i;const n=0!==this.tension()&&i.length>4;n&&(r=this.getTensionPoints());const s=this.pointerLength(),a=i.length;let o,h;if(n){const t=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],i[a-2],i[a-1]],e=ii.Path.calcLength(r[r.length-4],r[r.length-3],"C",t),n=ii.Path.getPointOnQuadraticBezier(Math.min(1,1-s/e),t[0],t[1],t[2],t[3],t[4],t[5]);o=i[a-2]-n.x,h=i[a-1]-n.y}else o=i[a-2]-i[a-4],h=i[a-1]-i[a-3];const l=(Math.atan2(h,o)+e)%e,d=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[a-2],i[a-1]),t.rotate(l),t.moveTo(0,0),t.lineTo(-s,d/2),t.lineTo(-s,-d/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),n?(o=(r[0]+r[2])/2-i[0],h=(r[1]+r[3])/2-i[1]):(o=i[2]-i[0],h=i[3]-i[1]),t.rotate((Math.atan2(-h,-o)+e)%e),t.moveTo(0,0),t.lineTo(-s,d/2),t.lineTo(-s,-d/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}e.Arrow=i,i.prototype.className="Arrow",(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"pointerLength",10,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"pointerWidth",10,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"pointerAtBeginning",!1),Le.Factory.addGetterSetter(i,"pointerAtEnding",!0)}));Ie(ri),ri.Arrow;var ni=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;class i extends qe.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}e.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"radius",0,(0,Re.getNumberValidator)())}));Ie(ni),ni.Circle;var si=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;class i extends qe.Shape{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}e.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,Pe._registerNode)(i),Le.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),Le.Factory.addGetterSetter(i,"radiusX",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"radiusY",0,(0,Re.getNumberValidator)())}));Ie(si),si.Ellipse;var ai=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;class i extends qe.Shape{constructor(t){super(t),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return!(!t||!e)||super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),r=this.cornerRadius(),n=this.attrs.image;let s;if(n){const t=this.attrs.cropWidth,r=this.attrs.cropHeight;s=t&&r?[n,this.cropX(),this.cropY(),t,r,0,0,e,i]:[n,0,0,e,i]}(this.hasFill()||this.hasStroke()||r)&&(t.beginPath(),r?Ne.Util.drawRoundedRectPath(t,e,i,r):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),n&&(r&&t.clip(),t.drawImage.apply(t,s))}_hitFunc(t){const e=this.width(),i=this.height(),r=this.cornerRadius();t.beginPath(),r?Ne.Util.drawRoundedRectPath(t,e,i,r):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,r=null){const n=Ne.Util.createImageElement();n.onload=function(){const t=new i({image:n});e(t)},n.onerror=r,n.crossOrigin="Anonymous",n.src=t}}e.Image=i,i.prototype.className="Image",(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"cornerRadius",0,(0,Re.getNumberOrArrayOfNumbersValidator)(4)),Le.Factory.addGetterSetter(i,"image"),Le.Factory.addComponentsGetterSetter(i,"crop",["x","y","width","height"]),Le.Factory.addGetterSetter(i,"cropX",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"cropY",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"cropWidth",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"cropHeight",0,(0,Re.getNumberValidator)())}));Ie(ai),ai.Image;var oi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;const i=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],r="up",n="right",s="down",a="left",o=i.length;class h extends Xe.Group{constructor(t){super(t),this.on("add.konva",(function(t){this._addListeners(t.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e,r=this;const n=function(){r._sync()};for(e=0;e<o;e++)t.on(i[e]+"Change.konva",n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t,e,i,o,h,l,d,c=this.getText(),g=this.getTag();if(c&&g){switch(t=c.width(),e=c.height(),i=g.pointerDirection(),o=g.pointerWidth(),d=g.pointerHeight(),h=0,l=0,i){case r:h=t/2,l=-1*d;break;case n:h=t+o,l=e/2;break;case s:h=t/2,l=e+d;break;case a:h=-1*o,l=e/2}g.setAttrs({x:-1*h,y:-1*l,width:t,height:e}),c.setAttrs({x:-1*h,y:-1*l})}}}e.Label=h,h.prototype.className="Label",(0,Pe._registerNode)(h);class l extends qe.Shape{_sceneFunc(t){const e=this.width(),i=this.height(),o=this.pointerDirection(),h=this.pointerWidth(),l=this.pointerHeight(),d=this.cornerRadius();let c=0,g=0,u=0,f=0;"number"==typeof d?c=g=u=f=Math.min(d,e/2,i/2):(c=Math.min(d[0]||0,e/2,i/2),g=Math.min(d[1]||0,e/2,i/2),f=Math.min(d[2]||0,e/2,i/2),u=Math.min(d[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(c,0),o===r&&(t.lineTo((e-h)/2,0),t.lineTo(e/2,-1*l),t.lineTo((e+h)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,3*Math.PI/2,0,!1),o===n&&(t.lineTo(e,(i-l)/2),t.lineTo(e+h,i/2),t.lineTo(e,(i+l)/2)),t.lineTo(e,i-f),t.arc(e-f,i-f,f,0,Math.PI/2,!1),o===s&&(t.lineTo((e+h)/2,i),t.lineTo(e/2,i+l),t.lineTo((e-h)/2,i)),t.lineTo(u,i),t.arc(u,i-u,u,Math.PI/2,Math.PI,!1),o===a&&(t.lineTo(0,(i+l)/2),t.lineTo(-1*h,i/2),t.lineTo(0,(i-l)/2)),t.lineTo(0,c),t.arc(c,c,c,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),o=this.pointerHeight(),h=this.pointerDirection(),l=this.width(),d=this.height();return h===r?(e-=o,d+=o):h===s?d+=o:h===a?(t-=1.5*i,l+=i):h===n&&(l+=1.5*i),{x:t,y:e,width:l,height:d}}}e.Tag=l,l.prototype.className="Tag",(0,Pe._registerNode)(l),Le.Factory.addGetterSetter(l,"pointerDirection","none"),Le.Factory.addGetterSetter(l,"pointerWidth",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(l,"pointerHeight",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(l,"cornerRadius",0,(0,Re.getNumberOrArrayOfNumbersValidator)(4))}));Ie(oi),oi.Tag,oi.Label;var hi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;class i extends qe.Shape{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),r=this.height();t.beginPath(),e?Ne.Util.drawRoundedRectPath(t,i,r,e):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}}e.Rect=i,i.prototype.className="Rect",(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"cornerRadius",0,(0,Re.getNumberOrArrayOfNumbersValidator)(4))}));Ie(hi),hi.Rect;var li=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;class i extends qe.Shape{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let r=0;r<t;r++)i.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].y,r=t[0].x,n=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),n=Math.max(n,t.y)})),{x:e,y:r,width:i-e,height:n-r}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"radius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"sides",0,(0,Re.getNumberValidator)())}));Ie(li),li.RegularPolygon;var di=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;const i=2*Math.PI;class r extends qe.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,i,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),i,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Pe._registerNode)(r),Le.Factory.addGetterSetter(r,"innerRadius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(r,"outerRadius",0,(0,Re.getNumberValidator)())}));Ie(di),di.Ring;var ci=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;class i extends qe.Shape{constructor(t){super(t),this._updated=!0,this.anim=new $e.Animation((()=>{const t=this._updated;return this._updated=!1,t})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),r=4*i,n=this.animations()[e],s=this.frameOffsets(),a=n[r+0],o=n[r+1],h=n[r+2],l=n[r+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,l),t.closePath(),t.fillStrokeShape(this)),d)if(s){const r=s[e],n=2*i;t.drawImage(d,a,o,h,l,r[n+0],r[n+1],h,l)}else t.drawImage(d,a,o,h,l,0,0,h,l)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),r=4*i,n=this.animations()[e],s=this.frameOffsets(),a=n[r+2],o=n[r+3];if(t.beginPath(),s){const r=s[e],n=2*i;t.rect(r[n+0],r[n+1],a,o)}else t.rect(0,0,a,o);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}e.Sprite=i,i.prototype.className="Sprite",(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"animation"),Le.Factory.addGetterSetter(i,"animations"),Le.Factory.addGetterSetter(i,"frameOffsets"),Le.Factory.addGetterSetter(i,"image"),Le.Factory.addGetterSetter(i,"frameIndex",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"frameRate",17,(0,Re.getNumberValidator)()),Le.Factory.backCompat(i,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})}));Ie(ci),ci.Sprite;var gi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;class i extends qe.Shape{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let n=1;n<2*r;n++){const s=n%2==0?i:e,a=s*Math.sin(n*Math.PI/r),o=-1*s*Math.cos(n*Math.PI/r);t.lineTo(a,o)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Pe._registerNode)(i),Le.Factory.addGetterSetter(i,"numPoints",5,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"innerRadius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(i,"outerRadius",0,(0,Re.getNumberValidator)())}));Ie(gi),gi.Star;var ui=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0,e.stringToArray=r;const i=Pe;function r(t){return[...t].reduce(((t,e,i,r)=>(/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?(?:\u200D\p{Emoji_Presentation})+/u.test(e)?t.push(e):/\p{Regional_Indicator}{2}/u.test(e+(r[i+1]||""))?t.push(e+r[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(e)?t[t.length-1]+=e:t.push(e),t)),[])}const n="auto",s="inherit",a="justify",o="left",h="middle",l="normal",d=" ",c="none",g=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],u=g.length;let f;function F(){return f||(f=Ne.Util.createCanvasElement().getContext("2d"),f)}class C extends qe.Shape{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<u;t++)this.on(g[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){const e=this.textArr,i=e.length;if(!this.text())return;let n,l=this.padding(),d=this.fontSize(),c=this.lineHeight()*d,g=this.verticalAlign(),u=this.direction(),f=0,F=this.align(),C=this.getWidth(),m=this.letterSpacing(),p=this.fill(),A=this.textDecoration(),j=-1!==A.indexOf("underline"),y=-1!==A.indexOf("line-through");u=u===s?t.direction:u;let E=c/2,D=h;if(Pe.Konva._fixTextRendering){const t=this.measureSize("M");D="alphabetic",E=(t.fontBoundingBoxAscent-t.fontBoundingBoxDescent)/2+c/2}var x=0,b=0;for("rtl"===u&&t.setAttr("direction",u),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",D),t.setAttr("textAlign",o),g===h?f=(this.getHeight()-i*c-2*l)/2:"bottom"===g&&(f=this.getHeight()-i*c-2*l),t.translate(l,f+l),n=0;n<i;n++){x=0,b=0;var v,_,S,B=e[n],w=B.text,k=B.width,M=B.lastInParagraph;if(t.save(),"right"===F?x+=C-k-2*l:"center"===F&&(x+=(C-k-2*l)/2),j){t.save(),t.beginPath();const e=x,i=E+b+(Pe.Konva._fixTextRendering?Math.round(d/4):Math.round(d/2));t.moveTo(e,i),_=0===(v=w.split(" ").length-1),S=F!==a||M?k:C-2*l,t.lineTo(e+Math.round(S),i),t.lineWidth=d/15;const r=this._getLinearGradient();t.strokeStyle=r||p,t.stroke(),t.restore()}if(y){t.save(),t.beginPath();const e=Pe.Konva._fixTextRendering?-Math.round(d/4):0;t.moveTo(x,E+b+e),_=0===(v=w.split(" ").length-1),S=F===a&&M&&!_?C-2*l:k,t.lineTo(x+Math.round(S),E+b+e),t.lineWidth=d/15;const i=this._getLinearGradient();t.strokeStyle=i||p,t.stroke(),t.restore()}if("rtl"===u||0===m&&F!==a)0!==m&&t.setAttr("letterSpacing",`${m}px`),this._partialTextX=x,this._partialTextY=E+b,this._partialText=w,t.fillStrokeShape(this);else{v=w.split(" ").length-1;const e=r(w);for(let i=0;i<e.length;i++){const r=e[i];" "!==r||M||F!==a||(x+=(C-2*l-k)/v),this._partialTextX=x,this._partialTextY=E+b,this._partialText=r,t.fillStrokeShape(this),x+=this.measureSize(r).width+m}}t.restore(),i>1&&(E+=c)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=Ne.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===n||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===n||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Ne.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,r,n,s,a,o,h,l,d,c;let g,u=F(),f=this.fontSize();u.save(),u.font=this._getContextFont(),g=u.measureText(t),u.restore();const C=f/100;return{actualBoundingBoxAscent:null!==(e=g.actualBoundingBoxAscent)&&void 0!==e?e:71.58203125*C,actualBoundingBoxDescent:null!==(i=g.actualBoundingBoxDescent)&&void 0!==i?i:0,actualBoundingBoxLeft:null!==(r=g.actualBoundingBoxLeft)&&void 0!==r?r:-7.421875*C,actualBoundingBoxRight:null!==(n=g.actualBoundingBoxRight)&&void 0!==n?n:75.732421875*C,alphabeticBaseline:null!==(s=g.alphabeticBaseline)&&void 0!==s?s:0,emHeightAscent:null!==(a=g.emHeightAscent)&&void 0!==a?a:100*C,emHeightDescent:null!==(o=g.emHeightDescent)&&void 0!==o?o:-20*C,fontBoundingBoxAscent:null!==(h=g.fontBoundingBoxAscent)&&void 0!==h?h:91*C,fontBoundingBoxDescent:null!==(l=g.fontBoundingBoxDescent)&&void 0!==l?l:21*C,hangingBaseline:null!==(d=g.hangingBaseline)&&void 0!==d?d:72.80000305175781*C,ideographicBaseline:null!==(c=g.ideographicBaseline)&&void 0!==c?c:-21*C,width:g.width,height:f}}_getContextFont(){return this.fontStyle()+d+this.fontVariant()+d+(this.fontSize()+"px ")+this.fontFamily().split(",").map((t=>{const e=(t=t.trim()).indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t})).join(", ")}_addTextLine(t){this.align()===a&&(t=t.trim());const e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return F().measureText(t).width+(i?e*(i-1):0)}_setTextData(){let t=this.text().split("\n"),e=+this.fontSize(),i=0,r=this.lineHeight()*e,s=this.attrs.width,a=this.attrs.height,o=s!==n&&void 0!==s,h=a!==n&&void 0!==a,l=this.padding(),g=s-2*l,u=a-2*l,f=0,C=this.wrap(),m="char"!==C&&C!==c,p=this.ellipsis();this.textArr=[],F().font=this._getContextFont();const A=p?this._getTextWidth("…"):0;for(let e=0,n=t.length;e<n;++e){let s=t[e],a=this._getTextWidth(s);if(o&&a>g)for(;s.length>0;){let t=0,e=s.length,n="",o=0;for(;t<e;){const i=t+e>>>1,r=s.slice(0,i+1),a=this._getTextWidth(r)+A;a<=g?(t=i+1,n=r,o=a):e=i}if(!n)break;if(m){var j;const e=s[n.length];(j=(e===d||"-"===e)&&o<=g?n.length:Math.max(n.lastIndexOf(d),n.lastIndexOf("-"))+1)>0&&(t=j,n=n.slice(0,t),o=this._getTextWidth(n))}n=n.trimRight(),this._addTextLine(n),i=Math.max(i,o),f+=r;if(this._shouldHandleEllipsis(f)){this._tryToAddEllipsisToLastLine();break}if(s=s.slice(t),s=s.trimLeft(),s.length>0&&(a=this._getTextWidth(s),a<=g)){this._addTextLine(s),f+=r,i=Math.max(i,a);break}}else this._addTextLine(s),f+=r,i=Math.max(i,a),this._shouldHandleEllipsis(f)&&e<n-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),h&&f+r>u)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,r=this.attrs.height,s=r!==n&&void 0!==r,a=r-2*this.padding();return!(this.wrap()!==c)||s&&t+i>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==n&&void 0!==t,i=t-2*this.padding(),r=this.ellipsis(),s=this.textArr[this.textArr.length-1];if(s&&r){if(e){this._getTextWidth(s.text+"…")<i||(s.text=s.text.slice(0,s.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+"…")}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),e=this.hasShadow();return!(!t||!e)||super._useBufferCanvas()}}e.Text=C,C.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},C.prototype._strokeFunc=function(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},C.prototype.className="Text",C.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,i._registerNode)(C),Le.Factory.overWriteSetter(C,"width",(0,Re.getNumberOrAutoValidator)()),Le.Factory.overWriteSetter(C,"height",(0,Re.getNumberOrAutoValidator)()),Le.Factory.addGetterSetter(C,"direction",s),Le.Factory.addGetterSetter(C,"fontFamily","Arial"),Le.Factory.addGetterSetter(C,"fontSize",12,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(C,"fontStyle",l),Le.Factory.addGetterSetter(C,"fontVariant",l),Le.Factory.addGetterSetter(C,"padding",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(C,"align",o),Le.Factory.addGetterSetter(C,"verticalAlign","top"),Le.Factory.addGetterSetter(C,"lineHeight",1,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(C,"wrap","word"),Le.Factory.addGetterSetter(C,"ellipsis",!1,(0,Re.getBooleanValidator)()),Le.Factory.addGetterSetter(C,"letterSpacing",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(C,"text","",(0,Re.getStringValidator)()),Le.Factory.addGetterSetter(C,"textDecoration","")}));Ie(ui),ui.Text,ui.stringToArray;var fi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;const i="normal";function r(t){t.fillText(this.partialText,0,0)}function n(t){t.strokeText(this.partialText,0,0)}class s extends qe.Shape{constructor(t){super(t),this.dummyCanvas=Ne.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute(),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ii.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;return t-1>this.pathLength?null:ii.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=ii.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),r=this.fontSize(),n=this.glyphInfo;"underline"===e&&t.beginPath();for(let i=0;i<n.length;i++){t.save();const s=n[i].p0;t.translate(s.x,s.y),t.rotate(n[i].rotation),this.partialText=n[i].text,t.fillStrokeShape(this),"underline"===e&&(0===i&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=i,t.lineWidth=r/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const r=e[i].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Ne.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return ui.Text.prototype.setText.call(this,t)}_getContextFont(){return ui.Text.prototype._getContextFont.call(this)}_getTextSize(t){const e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();const i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:e}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=e,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),r=this.align(),n=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let a=0;"center"===r&&(a=Math.max(0,this.pathLength/2-s/2)),"right"===r&&(a=Math.max(0,this.pathLength-s));const o=(0,ui.stringToArray)(this.text());let h=a;for(let t=0;t<o.length;t++){const e=this._getPointAtLength(h);if(!e)return;let a=this._getTextSize(o[t]).width+i;if(" "===o[t]&&"justify"===r){const t=this.text().split(" ").length-1;a+=(this.pathLength-s)/t}const l=this._getPointAtLength(h+a);if(!l)return;const d=ii.Path.getLineLength(e.x,e.y,l.x,l.y);let c=0;if(n)try{c=n(o[t-1],o[t])*this.fontSize()}catch(t){c=0}e.x+=c,l.x+=c,this.textWidth+=c;const g=ii.Path.getPointOnLine(c+d/2,e.x,e.y,l.x,l.y),u=Math.atan2(l.y-e.y,l.x-e.x);this.glyphInfo.push({transposeX:g.x,transposeY:g.y,text:o[t],rotation:u,p0:e,p1:l}),h+=a}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));let e,i,r=t[0]||0,n=t[0]||0,s=t[1]||0,a=t[1]||0;for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],r=Math.min(r,e),n=Math.max(n,e),s=Math.min(s,i),a=Math.max(a,i);const o=this.fontSize();return{x:r-o/2,y:s-o/2,width:n-r+o,height:a-s+o}}destroy(){return Ne.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}e.TextPath=s,s.prototype._fillFunc=r,s.prototype._strokeFunc=n,s.prototype._fillFuncHit=r,s.prototype._strokeFuncHit=n,s.prototype.className="TextPath",s.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Pe._registerNode)(s),Le.Factory.addGetterSetter(s,"data"),Le.Factory.addGetterSetter(s,"fontFamily","Arial"),Le.Factory.addGetterSetter(s,"fontSize",12,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(s,"fontStyle",i),Le.Factory.addGetterSetter(s,"align","left"),Le.Factory.addGetterSetter(s,"letterSpacing",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(s,"textBaseline","middle"),Le.Factory.addGetterSetter(s,"fontVariant",i),Le.Factory.addGetterSetter(s,"text",""),Le.Factory.addGetterSetter(s,"textDecoration",null),Le.Factory.addGetterSetter(s,"kerningFunc",null)}));Ie(fi),fi.TextPath;var Fi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;const i=Pe,r="tr-konva",n=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map((t=>t+`.${r}`)).join(" "),s="nodesRect",a=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],o={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},h="ontouchstart"in Pe.Konva._global;const l=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function d(t,e,i){const r=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),n=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:n}}function c(t,e){const i=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return d(t,e,i)}let g=0;class u extends Xe.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(n,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Ne.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return r+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter((t=>!t.isAncestorOf(this)||(Ne.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)));this._nodes=t=e,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((t=>{const e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},i=t._attrsAffectingSize.map((t=>t+"Change."+this._getEventNamespace())).join(" ");t.on(i,e),t.on(a.map((t=>t+`.${this._getEventNamespace()}`)).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)})),this._resetTransformCache();return!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,(i=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(i,!1)})),t.on(`dragmove.${this._getEventNamespace()}`,(i=>{if(!e)return;const r=t.getAbsolutePosition(),n=r.x-e.x,s=r.y-e.y;this.nodes().forEach((e=>{if(e===t)return;if(e.isDragging())return;const r=e.getAbsolutePosition();e.setAbsolutePosition({x:r.x+n,y:r.y+s}),e.startDrag(i)})),e=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((t=>{t.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(s),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(s,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=t.getAbsoluteScale(i),s=t.getAbsolutePosition(i),a=r.x*n.x-t.offsetX()*n.x,o=r.y*n.y-t.offsetY()*n.y,h=(Pe.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return d({x:s.x+a*Math.cos(h)+o*Math.sin(-h),y:s.y+o*Math.cos(h)+a*Math.sin(h),width:r.width*n.x,height:r.height*n.y,rotation:h},-Pe.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map((e=>{const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],n=e.getAbsoluteTransform();r.forEach((function(e){const i=n.point(e);t.push(i)}))}));const e=new Ne.Transform;e.rotate(-Pe.Konva.getAngle(this.rotation()));let i=1/0,r=1/0,n=-1/0,s=-1/0;t.forEach((function(t){const a=e.point(t);void 0===i&&(i=n=a.x,r=s=a.y),i=Math.min(i,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x),s=Math.max(s,a.y)})),e.invert();const a=e.point({x:i,y:r});return{x:a.x,y:a.y,width:n-i,height:s-r,rotation:Pe.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),l.forEach((t=>{this._createAnchor(t)})),this._createAnchor("rotater")}_createAnchor(t){const e=new hi.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:h?10:"auto"}),i=this;e.on("mousedown touchstart",(function(t){i._handleMouseDown(t)})),e.on("dragstart",(t=>{e.stopDrag(),t.cancelBubble=!0})),e.on("dragend",(t=>{t.cancelBubble=!0})),e.on("mouseenter",(()=>{const i=Pe.Konva.getAngle(this.rotation()),r=this.rotateAnchorCursor(),n=function(t,e,i){if("rotater"===t)return i;e+=Ne.Util.degToRad(o[t]||0);const r=(Ne.Util.radToDeg(e)%360+360)%360;return Ne.Util._inRange(r,337.5,360)||Ne.Util._inRange(r,0,22.5)?"ns-resize":Ne.Util._inRange(r,22.5,67.5)?"nesw-resize":Ne.Util._inRange(r,67.5,112.5)?"ew-resize":Ne.Util._inRange(r,112.5,157.5)?"nwse-resize":Ne.Util._inRange(r,157.5,202.5)?"ns-resize":Ne.Util._inRange(r,202.5,247.5)?"nesw-resize":Ne.Util._inRange(r,247.5,292.5)?"ew-resize":Ne.Util._inRange(r,292.5,337.5)?"nwse-resize":(Ne.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}(t,i,r);e.getStage().content&&(e.getStage().content.style.cursor=n),this._cursorChange=!0})),e.on("mouseout",(()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(e)}_createBack(){const t=new qe.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,e){const i=e.getParent(),r=i.padding();t.beginPath(),t.rect(-r,-r,e.width()+2*r,e.height()+2*r),t.moveTo(e.width()/2,-r),i.rotateEnabled()&&i.rotateLineVisible()&&t.lineTo(e.width()/2,-i.rotateAnchorOffset()*Ne.Util._sign(e.height())-r),t.fillStrokeShape(e)},hitFunc:(t,e)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e)}});this.add(t),this._proxyDrag(t),t.on("dragstart",(t=>{t.cancelBubble=!0})),t.on("dragmove",(t=>{t.cancelBubble=!0})),t.on("dragend",(t=>{t.cancelBubble=!0})),this.on("dragmove",(t=>{this.update()}))}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,r=e.height,n=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));this.sin=Math.abs(r/n),this.cos=Math.abs(i/n),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const s=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-s.x,y:a.y-s.y},g++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((e=>{e._fire("transformstart",{evt:t.evt,target:e})}))}_handleMouseMove(t){let e,i,r;const n=this.findOne("."+this._movingAnchorName),s=n.getStage();s.setPointersPositions(t);const a=s.getPointerPosition();let o={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const h=n.getAbsolutePosition();this.anchorDragBoundFunc()&&(o=this.anchorDragBoundFunc()(h,o,t)),n.setAbsolutePosition(o);const l=n.getAbsolutePosition();if(h.x===l.x&&h.y===l.y)return;if("rotater"===this._movingAnchorName){const r=this._getNodeRect();e=n.x()-r.width/2,i=-n.y()+r.height/2;let s=Math.atan2(-i,e)+Math.PI/2;r.height<0&&(s-=Math.PI);const a=Pe.Konva.getAngle(this.rotation())+s,o=Pe.Konva.getAngle(this.rotationSnapTolerance()),h=function(t,e,i){let r=e;for(let n=0;n<t.length;n++){const s=Pe.Konva.getAngle(t[n]),a=Math.abs(s-e)%(2*Math.PI);Math.min(a,2*Math.PI-a)<i&&(r=s)}return r}(this.rotationSnaps(),a,o),l=c(r,h-r.rotation);return void this._fitNodesInto(l,t)}const d=this.shiftBehavior();let g;g="inverted"===d?this.keepRatio()&&!t.shiftKey:"none"===d?this.keepRatio():this.keepRatio()||t.shiftKey;var u=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(g){var f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(f.x-n.x(),2)+Math.pow(f.y-n.y(),2));var F=this.findOne(".top-left").x()>f.x?-1:1,C=this.findOne(".top-left").y()>f.y?-1:1;e=r*this.cos*F,i=r*this.sin*C,this.findOne(".top-left").x(f.x-e),this.findOne(".top-left").y(f.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(n.y());else if("top-right"===this._movingAnchorName){if(g){f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(n.x()-f.x,2)+Math.pow(f.y-n.y(),2));F=this.findOne(".top-right").x()<f.x?-1:1,C=this.findOne(".top-right").y()>f.y?-1:1;e=r*this.cos*F,i=r*this.sin*C,this.findOne(".top-right").x(f.x+e),this.findOne(".top-right").y(f.y-i)}var m=n.position();this.findOne(".top-left").y(m.y),this.findOne(".bottom-right").x(m.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(n.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(n.x());else if("bottom-left"===this._movingAnchorName){if(g){f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(f.x-n.x(),2)+Math.pow(n.y()-f.y,2));F=f.x<n.x()?-1:1,C=n.y()<f.y?-1:1;e=r*this.cos*F,i=r*this.sin*C,n.x(f.x-e),n.y(f.y+i)}m=n.position(),this.findOne(".top-left").x(m.x),this.findOne(".bottom-right").y(m.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(n.y());else if("bottom-right"===this._movingAnchorName){if(g){f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(n.x()-f.x,2)+Math.pow(n.y()-f.y,2));F=this.findOne(".bottom-right").x()<f.x?-1:1,C=this.findOne(".bottom-right").y()<f.y?-1:1;e=r*this.cos*F,i=r*this.sin*C,this.findOne(".bottom-right").x(f.x+e),this.findOne(".bottom-right").y(f.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(u=this.centeredScaling()||t.altKey){const t=this.findOne(".top-left"),e=this.findOne(".bottom-right"),i=t.x(),r=t.y(),n=this.getWidth()-e.x(),s=this.getHeight()-e.y();e.move({x:-i,y:-r}),t.move({x:n,y:s})}const p=this.findOne(".top-left").getAbsolutePosition();e=p.x,i=p.y;const A=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),j=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:A,height:j,rotation:Pe.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();g--,this._fire("transformend",{evt:t,target:i}),null===(e=this.getLayer())||void 0===e||e.batchDraw(),i&&this._nodes.forEach((e=>{var i;e._fire("transformend",{evt:t,target:e}),null===(i=e.getLayer())||void 0===i||i.batchDraw()})),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect();if(Ne.Util._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(Ne.Util._inRange(t.height,2*-this.padding()-1,1))return void this.update();const r=new Ne.Transform;if(r.rotate(Pe.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=r.point({x:2*-this.padding(),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=r.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=r.point({x:0,y:2*-this.padding()});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=r.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(i,t);e?t=e:Ne.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const n=1e7,s=new Ne.Transform;s.translate(i.x,i.y),s.rotate(i.rotation),s.scale(i.width/n,i.height/n);const a=new Ne.Transform,o=t.width/n,h=t.height/n;!1===this.flipEnabled()?(a.translate(t.x,t.y),a.rotate(t.rotation),a.translate(t.width<0?t.width:0,t.height<0?t.height:0),a.scale(Math.abs(o),Math.abs(h))):(a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(o,h));const l=a.multiply(s.invert());this._nodes.forEach((t=>{var e;const i=t.getParent().getAbsoluteTransform(),r=t.getTransform().copy();r.translate(t.offsetX(),t.offsetY());const n=new Ne.Transform;n.multiply(i.copy().invert()).multiply(l).multiply(i).multiply(r);const s=n.decompose();t.setAttrs(s),null===(e=t.getLayer())||void 0===e||e.batchDraw()})),this.rotation(Ne.Util._getRotation(t.rotation)),this._nodes.forEach((t=>{this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t})})),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(Ne.Util._getRotation(e.rotation));const i=e.width,r=e.height,n=this.enabledAnchors(),s=this.resizeEnabled(),a=this.padding(),o=this.anchorSize(),h=this.find("._anchor");h.forEach((t=>{t.setAttrs({width:o,height:o,offsetX:o/2,offsetY:o/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:o/2+a,offsetY:o/2+a,visible:s&&n.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:o/2+a,visible:s&&n.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:o/2-a,offsetY:o/2+a,visible:s&&n.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:o/2+a,visible:s&&n.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:r/2,offsetX:o/2-a,visible:s&&n.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:o/2+a,offsetY:o/2-a,visible:s&&n.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:r,offsetY:o/2-a,visible:s&&n.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:r,offsetX:o/2-a,offsetY:o/2-a,visible:s&&n.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Ne.Util._sign(r)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const l=this.anchorStyleFunc();l&&h.forEach((t=>{l(t)})),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Xe.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Ve.Node.prototype.toObject.call(this)}clone(t){return Ve.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}e.Transformer=u,u.isTransforming=()=>g>0,u.prototype.className="Transformer",(0,i._registerNode)(u),Le.Factory.addGetterSetter(u,"enabledAnchors",l,(function(t){return t instanceof Array||Ne.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===l.indexOf(t)&&Ne.Util.warn("Unknown anchor name: "+t+". Available names are: "+l.join(", "))})),t||[]})),Le.Factory.addGetterSetter(u,"flipEnabled",!0,(0,Re.getBooleanValidator)()),Le.Factory.addGetterSetter(u,"resizeEnabled",!0),Le.Factory.addGetterSetter(u,"anchorSize",10,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"rotateEnabled",!0),Le.Factory.addGetterSetter(u,"rotateLineVisible",!0),Le.Factory.addGetterSetter(u,"rotationSnaps",[]),Le.Factory.addGetterSetter(u,"rotateAnchorOffset",50,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"rotateAnchorCursor","crosshair"),Le.Factory.addGetterSetter(u,"rotationSnapTolerance",5,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"borderEnabled",!0),Le.Factory.addGetterSetter(u,"anchorStroke","rgb(0, 161, 255)"),Le.Factory.addGetterSetter(u,"anchorStrokeWidth",1,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"anchorFill","white"),Le.Factory.addGetterSetter(u,"anchorCornerRadius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"borderStroke","rgb(0, 161, 255)"),Le.Factory.addGetterSetter(u,"borderStrokeWidth",1,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"borderDash"),Le.Factory.addGetterSetter(u,"keepRatio",!0),Le.Factory.addGetterSetter(u,"shiftBehavior","default"),Le.Factory.addGetterSetter(u,"centeredScaling",!1),Le.Factory.addGetterSetter(u,"ignoreStroke",!1),Le.Factory.addGetterSetter(u,"padding",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(u,"node"),Le.Factory.addGetterSetter(u,"nodes"),Le.Factory.addGetterSetter(u,"boundBoxFunc"),Le.Factory.addGetterSetter(u,"anchorDragBoundFunc"),Le.Factory.addGetterSetter(u,"anchorStyleFunc"),Le.Factory.addGetterSetter(u,"shouldOverdrawWholeArea",!1),Le.Factory.addGetterSetter(u,"useSingleNodeRotation",!0),Le.Factory.backCompat(u,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})}));Ie(Fi),Fi.Transformer;var Ci=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;const i=Pe;class r extends qe.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Pe.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(r),Le.Factory.addGetterSetter(r,"radius",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(r,"angle",0,(0,Re.getNumberValidator)()),Le.Factory.addGetterSetter(r,"clockwise",!1),Le.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})}));Ie(Ci),Ci.Wedge;var mi=Te((function(t,e){function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){const e=Math.round(this.blurRadius());e>0&&function(t,e){const s=t.data,a=t.width,o=t.height;let h,l,d,c,g,u,f,F,C,m,p,A,j,y,E,D,x,b,v,_,S,B,w,k,M=e+e+1,I=a-1,T=o-1,P=e+1,N=P*(P+1)/2,R=new i,L=null,G=R,O=null,Y=null,V=r[e],H=n[e];for(d=1;d<M;d++)G=G.next=new i,d===P&&(L=G);for(G.next=R,f=u=0,l=0;l<o;l++){for(D=x=b=v=F=C=m=p=0,A=P*(_=s[u]),j=P*(S=s[u+1]),y=P*(B=s[u+2]),E=P*(w=s[u+3]),F+=N*_,C+=N*S,m+=N*B,p+=N*w,G=R,d=0;d<P;d++)G.r=_,G.g=S,G.b=B,G.a=w,G=G.next;for(d=1;d<P;d++)c=u+((I<d?I:d)<<2),F+=(G.r=_=s[c])*(k=P-d),C+=(G.g=S=s[c+1])*k,m+=(G.b=B=s[c+2])*k,p+=(G.a=w=s[c+3])*k,D+=_,x+=S,b+=B,v+=w,G=G.next;for(O=R,Y=L,h=0;h<a;h++)s[u+3]=w=p*V>>H,0!==w?(w=255/w,s[u]=(F*V>>H)*w,s[u+1]=(C*V>>H)*w,s[u+2]=(m*V>>H)*w):s[u]=s[u+1]=s[u+2]=0,F-=A,C-=j,m-=y,p-=E,A-=O.r,j-=O.g,y-=O.b,E-=O.a,c=f+((c=h+e+1)<I?c:I)<<2,D+=O.r=s[c],x+=O.g=s[c+1],b+=O.b=s[c+2],v+=O.a=s[c+3],F+=D,C+=x,m+=b,p+=v,O=O.next,A+=_=Y.r,j+=S=Y.g,y+=B=Y.b,E+=w=Y.a,D-=_,x-=S,b-=B,v-=w,Y=Y.next,u+=4;f+=a}for(h=0;h<a;h++){for(x=b=v=D=C=m=p=F=0,u=h<<2,A=P*(_=s[u]),j=P*(S=s[u+1]),y=P*(B=s[u+2]),E=P*(w=s[u+3]),F+=N*_,C+=N*S,m+=N*B,p+=N*w,G=R,d=0;d<P;d++)G.r=_,G.g=S,G.b=B,G.a=w,G=G.next;for(g=a,d=1;d<=e;d++)u=g+h<<2,F+=(G.r=_=s[u])*(k=P-d),C+=(G.g=S=s[u+1])*k,m+=(G.b=B=s[u+2])*k,p+=(G.a=w=s[u+3])*k,D+=_,x+=S,b+=B,v+=w,G=G.next,d<T&&(g+=a);for(u=h,O=R,Y=L,l=0;l<o;l++)c=u<<2,s[c+3]=w=p*V>>H,w>0?(w=255/w,s[c]=(F*V>>H)*w,s[c+1]=(C*V>>H)*w,s[c+2]=(m*V>>H)*w):s[c]=s[c+1]=s[c+2]=0,F-=A,C-=j,m-=y,p-=E,A-=O.r,j-=O.g,y-=O.b,E-=O.a,c=h+((c=l+P)<T?c:T)*a<<2,F+=D+=O.r=s[c],C+=x+=O.g=s[c+1],m+=b+=O.b=s[c+2],p+=v+=O.a=s[c+3],O=O.next,A+=_=Y.r,j+=S=Y.g,y+=B=Y.b,E+=w=Y.a,D-=_,x-=S,b-=B,v-=w,Y=Y.next,u+=a}}(t,e)},Le.Factory.addGetterSetter(Ve.Node,"blurRadius",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(mi),mi.Blur;var pi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;e.Brighten=function(t){let e,i=255*this.brightness(),r=t.data,n=r.length;for(e=0;e<n;e+=4)r[e]+=i,r[e+1]+=i,r[e+2]+=i},Le.Factory.addGetterSetter(Ve.Node,"brightness",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(pi),pi.Brighten;var Ai=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;e.Contrast=function(t){const e=Math.pow((this.contrast()+100)/100,2);let i,r=t.data,n=r.length,s=150,a=150,o=150;for(i=0;i<n;i+=4)s=r[i],a=r[i+1],o=r[i+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,o=o<0?0:o>255?255:o,r[i]=s,r[i+1]=a,r[i+2]=o},Le.Factory.addGetterSetter(Ve.Node,"contrast",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(Ai),Ai.Contrast;var ji=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;e.Emboss=function(t){let e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),r=this.embossDirection(),n=this.embossBlend(),s=0,a=0,o=t.data,h=t.width,l=t.height,d=4*h,c=l;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:Ne.Util.error("Unknown emboss direction: "+r)}do{const t=(c-1)*d;let r=s;c+r<1&&(r=0),c+r>l&&(r=0);const g=(c-1+r)*h*4;let u=h;do{const r=t+4*(u-1);let s=a;u+s<1&&(s=0),u+s>h&&(s=0);const l=g+4*(u-1+s),d=o[r]-o[l],c=o[r+1]-o[l+1],f=o[r+2]-o[l+2];let F=d;const C=F>0?F:-F;if((c>0?c:-c)>C&&(F=c),(f>0?f:-f)>C&&(F=f),F*=e,n){const t=o[r]+F,e=o[r+1]+F,i=o[r+2]+F;o[r]=t>255?255:t<0?0:t,o[r+1]=e>255?255:e<0?0:e,o[r+2]=i>255?255:i<0?0:i}else{let t=i-F;t<0?t=0:t>255&&(t=255),o[r]=o[r+1]=o[r+2]=t}}while(--u)}while(--c)},Le.Factory.addGetterSetter(Ve.Node,"embossStrength",.5,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"embossWhiteLevel",.5,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"embossDirection","top-left",null,Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"embossBlend",!1,null,Le.Factory.afterSetFilter)}));Ie(ji),ji.Emboss;var yi=Te((function(t,e){function i(t,e,i,r,n){let s,a=i-e,o=n-r;return 0===a?r+o/2:0===o?r:(s=(t-e)/a,s=o*s+r,s)}Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;e.Enhance=function(t){let e,r,n,s,a=t.data,o=a.length,h=a[0],l=h,d=a[1],c=d,g=a[2],u=g;const f=this.enhance();if(0===f)return;for(s=0;s<o;s+=4)e=a[s+0],e<h?h=e:e>l&&(l=e),r=a[s+1],r<d?d=r:r>c&&(c=r),n=a[s+2],n<g?g=n:n>u&&(u=n);let F,C,m,p,A,j,y,E,D;for(l===h&&(l=255,h=0),c===d&&(c=255,d=0),u===g&&(u=255,g=0),f>0?(C=l+f*(255-l),m=h-f*(h-0),A=c+f*(255-c),j=d-f*(d-0),E=u+f*(255-u),D=g-f*(g-0)):(F=.5*(l+h),C=l+f*(l-F),m=h+f*(h-F),p=.5*(c+d),A=c+f*(c-p),j=d+f*(d-p),y=.5*(u+g),E=u+f*(u-y),D=g+f*(g-y)),s=0;s<o;s+=4)a[s+0]=i(a[s+0],h,l,m,C),a[s+1]=i(a[s+1],d,c,j,A),a[s+2]=i(a[s+2],g,u,D,E)},Le.Factory.addGetterSetter(Ve.Node,"enhance",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(yi),yi.Enhance;var Ei=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0;e.Grayscale=function(t){let e,i,r=t.data,n=r.length;for(e=0;e<n;e+=4)i=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=i,r[e+1]=i,r[e+2]=i}}));Ie(Ei),Ei.Grayscale;var Di=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0,Le.Factory.addGetterSetter(Ve.Node,"hue",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"saturation",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"luminance",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter);e.HSL=function(t){let e,i=t.data,r=i.length,n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=127*this.luminance();const o=1*n*Math.cos(s*Math.PI/180),h=1*n*Math.sin(s*Math.PI/180),l=.299+.701*o+.167*h,d=.587-.587*o+.33*h,c=.114-.114*o-.497*h,g=.299-.299*o-.328*h,u=.587+.413*o+.035*h,f=.114-.114*o+.293*h,F=.299-.3*o+1.25*h,C=.587-.586*o-1.05*h,m=.114+.886*o-.2*h;let p,A,j,y;for(e=0;e<r;e+=4)p=i[e+0],A=i[e+1],j=i[e+2],y=i[e+3],i[e+0]=l*p+d*A+c*j+a,i[e+1]=g*p+u*A+f*j+a,i[e+2]=F*p+C*A+m*j+a,i[e+3]=y}}));Ie(Di),Di.HSL;var xi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;e.HSV=function(t){const e=t.data,i=e.length,r=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=r*n*Math.cos(s*Math.PI/180),o=r*n*Math.sin(s*Math.PI/180),h=.299*r+.701*a+.167*o,l=.587*r-.587*a+.33*o,d=.114*r-.114*a-.497*o,c=.299*r-.299*a-.328*o,g=.587*r+.413*a+.035*o,u=.114*r-.114*a+.293*o,f=.299*r-.3*a+1.25*o,F=.587*r-.586*a-1.05*o,C=.114*r+.886*a-.2*o;let m,p,A,j;for(let t=0;t<i;t+=4)m=e[t+0],p=e[t+1],A=e[t+2],j=e[t+3],e[t+0]=h*m+l*p+d*A,e[t+1]=c*m+g*p+u*A,e[t+2]=f*m+F*p+C*A,e[t+3]=j},Le.Factory.addGetterSetter(Ve.Node,"hue",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"saturation",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"value",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(xi),xi.HSV;var bi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0;e.Invert=function(t){let e,i=t.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]}}));Ie(bi),bi.Invert;var vi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;e.Kaleidoscope=function(t){const e=t.width,i=t.height;let r,n,s,a,o,h,l,d,c,g,u=Math.round(this.kaleidoscopePower());const f=Math.round(this.kaleidoscopeAngle()),F=Math.floor(e*(f%360)/360);if(u<1)return;const C=Ne.Util.createCanvasElement();C.width=e,C.height=i;const m=C.getContext("2d").getImageData(0,0,e,i);Ne.Util.releaseCanvas(C),function(t,e,i){let r,n,s,a,o=t.data,h=e.data,l=t.width,d=t.height,c=i.polarCenterX||l/2,g=i.polarCenterY||d/2,u=0,f=0,F=0,C=0,m=Math.sqrt(c*c+g*g);n=l-c,s=d-g,a=Math.sqrt(n*n+s*s),m=a>m?a:m;let p,A,j,y,E=d,D=l,x=360/D*Math.PI/180;for(A=0;A<D;A+=1)for(j=Math.sin(A*x),y=Math.cos(A*x),p=0;p<E;p+=1)n=Math.floor(c+m*p/E*y),s=Math.floor(g+m*p/E*j),r=4*(s*l+n),u=o[r+0],f=o[r+1],F=o[r+2],C=o[r+3],r=4*(A+p*l),h[r+0]=u,h[r+1]=f,h[r+2]=F,h[r+3]=C}(t,m,{polarCenterX:e/2,polarCenterY:i/2});let p=e/Math.pow(2,u);for(;p<=8;)p*=2,u-=1;p=Math.ceil(p);let A=p,j=0,y=A,E=1;for(F+p>e&&(j=A,y=0,E=-1),n=0;n<i;n+=1)for(r=j;r!==y;r+=E)s=Math.round(r+F)%e,c=4*(e*n+s),o=m.data[c+0],h=m.data[c+1],l=m.data[c+2],d=m.data[c+3],g=4*(e*n+r),m.data[g+0]=o,m.data[g+1]=h,m.data[g+2]=l,m.data[g+3]=d;for(n=0;n<i;n+=1)for(A=Math.floor(p),a=0;a<u;a+=1){for(r=0;r<A+1;r+=1)c=4*(e*n+r),o=m.data[c+0],h=m.data[c+1],l=m.data[c+2],d=m.data[c+3],g=4*(e*n+2*A-r-1),m.data[g+0]=o,m.data[g+1]=h,m.data[g+2]=l,m.data[g+3]=d;A*=2}!function(t,e,i){let r,n,s,a,o,h,l=t.data,d=e.data,c=t.width,g=t.height,u=i.polarCenterX||c/2,f=i.polarCenterY||g/2,F=0,C=0,m=0,p=0,A=Math.sqrt(u*u+f*f);n=c-u,s=g-f,h=Math.sqrt(n*n+s*s),A=h>A?h:A;let j,y,E,D,x=g,b=c;for(n=0;n<c;n+=1)for(s=0;s<g;s+=1)a=n-u,o=s-f,j=Math.sqrt(a*a+o*o)*x/A,y=(180*Math.atan2(o,a)/Math.PI+360+0)%360,y=y*b/360,E=Math.floor(y),D=Math.floor(j),r=4*(D*c+E),F=l[r+0],C=l[r+1],m=l[r+2],p=l[r+3],r=4*(s*c+n),d[r+0]=F,d[r+1]=C,d[r+2]=m,d[r+3]=p}(m,t,{polarRotation:0})},Le.Factory.addGetterSetter(Ve.Node,"kaleidoscopePower",2,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"kaleidoscopeAngle",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(vi),vi.Kaleidoscope;var _i=Te((function(t,e){function i(t,e,i){let r=4*(i*t.width+e);const n=[];return n.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),n}function r(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;e.Mask=function(t){let e=function(t,e){const n=i(t,0,0),s=i(t,t.width-1,0),a=i(t,0,t.height-1),o=i(t,t.width-1,t.height-1),h=e||10;if(r(n,s)<h&&r(s,o)<h&&r(o,a)<h&&r(a,n)<h){const e=function(t){const e=[0,0,0];for(let i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([s,n,o,a]),i=[];for(let n=0;n<t.width*t.height;n++){const s=r(e,[t.data[4*n],t.data[4*n+1],t.data[4*n+2]]);i[n]=s<h?0:255}return i}}(t,this.threshold());return e&&(e=function(t,e,i){const r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[];for(let o=0;o<i;o++)for(let h=0;h<e;h++){const l=o*e+h;let d=0;for(let a=0;a<n;a++)for(let l=0;l<n;l++){const c=o+a-s,g=h+l-s;if(c>=0&&c<i&&g>=0&&g<e){const i=r[a*n+l];d+=t[c*e+g]*i}}a[l]=2040===d?255:0}return a}(e,t.width,t.height),e=function(t,e,i){const r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[];for(let o=0;o<i;o++)for(let h=0;h<e;h++){const l=o*e+h;let d=0;for(let a=0;a<n;a++)for(let l=0;l<n;l++){const c=o+a-s,g=h+l-s;if(c>=0&&c<i&&g>=0&&g<e){const i=r[a*n+l];d+=t[c*e+g]*i}}a[l]=d>=1020?255:0}return a}(e,t.width,t.height),e=function(t,e,i){const r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[];for(let o=0;o<i;o++)for(let h=0;h<e;h++){const l=o*e+h;let d=0;for(let a=0;a<n;a++)for(let l=0;l<n;l++){const c=o+a-s,g=h+l-s;if(c>=0&&c<i&&g>=0&&g<e){const i=r[a*n+l];d+=t[c*e+g]*i}}a[l]=d}return a}(e,t.width,t.height),function(t,e){for(let i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,e)),t},Le.Factory.addGetterSetter(Ve.Node,"threshold",0,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(_i),_i.Mask;var Si=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;e.Noise=function(t){const e=255*this.noise(),i=t.data,r=i.length,n=e/2;for(let t=0;t<r;t+=4)i[t+0]+=n-2*n*Math.random(),i[t+1]+=n-2*n*Math.random(),i[t+2]+=n-2*n*Math.random()},Le.Factory.addGetterSetter(Ve.Node,"noise",.2,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(Si),Si.Noise;var Bi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;e.Pixelate=function(t){let e,i,r,n,s,a,o,h,l,d,c,g,u,f,F=Math.ceil(this.pixelSize()),C=t.width,m=t.height,p=Math.ceil(C/F),A=Math.ceil(m/F),j=t.data;if(F<=0)Ne.Util.error("pixelSize value can not be <= 0");else for(g=0;g<p;g+=1)for(u=0;u<A;u+=1){for(n=0,s=0,a=0,o=0,h=g*F,l=h+F,d=u*F,c=d+F,f=0,e=h;e<l;e+=1)if(!(e>=C))for(i=d;i<c;i+=1)i>=m||(r=4*(C*i+e),n+=j[r+0],s+=j[r+1],a+=j[r+2],o+=j[r+3],f+=1);for(n/=f,s/=f,a/=f,o/=f,e=h;e<l;e+=1)if(!(e>=C))for(i=d;i<c;i+=1)i>=m||(r=4*(C*i+e),j[r+0]=n,j[r+1]=s,j[r+2]=a,j[r+3]=o)}},Le.Factory.addGetterSetter(Ve.Node,"pixelSize",8,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(Bi),Bi.Pixelate;var wi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;e.Posterize=function(t){let e,i=Math.round(254*this.levels())+1,r=t.data,n=r.length,s=255/i;for(e=0;e<n;e+=1)r[e]=Math.floor(r[e]/s)*s},Le.Factory.addGetterSetter(Ve.Node,"levels",.5,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(wi),wi.Posterize;var ki=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;e.RGB=function(t){let e,i,r=t.data,n=r.length,s=this.red(),a=this.green(),o=this.blue();for(e=0;e<n;e+=4)i=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=i*s,r[e+1]=i*a,r[e+2]=i*o,r[e+3]=r[e+3]},Le.Factory.addGetterSetter(Ve.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),Le.Factory.addGetterSetter(Ve.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),Le.Factory.addGetterSetter(Ve.Node,"blue",0,Re.RGBComponent,Le.Factory.afterSetFilter)}));Ie(ki),ki.RGB;var Mi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;e.RGBA=function(t){const e=t.data,i=e.length,r=this.red(),n=this.green(),s=this.blue(),a=this.alpha();for(let t=0;t<i;t+=4){const i=1-a;e[t]=r*a+e[t]*i,e[t+1]=n*a+e[t+1]*i,e[t+2]=s*a+e[t+2]*i}},Le.Factory.addGetterSetter(Ve.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),Le.Factory.addGetterSetter(Ve.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),Le.Factory.addGetterSetter(Ve.Node,"blue",0,Re.RGBComponent,Le.Factory.afterSetFilter),Le.Factory.addGetterSetter(Ve.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))}));Ie(Mi),Mi.RGBA;var Ii=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0;e.Sepia=function(t){let e,i,r,n,s=t.data,a=s.length;for(e=0;e<a;e+=4)i=s[e+0],r=s[e+1],n=s[e+2],s[e+0]=Math.min(255,.393*i+.769*r+.189*n),s[e+1]=Math.min(255,.349*i+.686*r+.168*n),s[e+2]=Math.min(255,.272*i+.534*r+.131*n)}}));Ie(Ii),Ii.Sepia;var Ti=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0;e.Solarize=function(t){const e=t.data,i=t.width,r=4*i;let n=t.height;do{const t=(n-1)*r;let s=i;do{const i=t+4*(s-1);let r=e[i],n=e[i+1],a=e[i+2];r>127&&(r=255-r),n>127&&(n=255-n),a>127&&(a=255-a),e[i]=r,e[i+1]=n,e[i+2]=a}while(--s)}while(--n)}}));Ie(Ti),Ti.Solarize;var Pi=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;e.Threshold=function(t){const e=255*this.threshold(),i=t.data,r=i.length;for(let t=0;t<r;t+=1)i[t]=i[t]<e?0:255},Le.Factory.addGetterSetter(Ve.Node,"threshold",.5,(0,Re.getNumberValidator)(),Le.Factory.afterSetFilter)}));Ie(Pi),Pi.Threshold;var Ni=Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0,e.Konva=Qe.Konva.Util._assign(Qe.Konva,{Arc:Ze.Arc,Arrow:ri.Arrow,Circle:ni.Circle,Ellipse:si.Ellipse,Image:ai.Image,Label:oi.Label,Tag:oi.Tag,Line:ti.Line,Path:ii.Path,Rect:hi.Rect,RegularPolygon:li.RegularPolygon,Ring:di.Ring,Sprite:ci.Sprite,Star:gi.Star,Text:ui.Text,TextPath:fi.TextPath,Transformer:Fi.Transformer,Wedge:Ci.Wedge,Filters:{Blur:mi.Blur,Brighten:pi.Brighten,Contrast:Ai.Contrast,Emboss:ji.Emboss,Enhance:yi.Enhance,Grayscale:Ei.Grayscale,HSL:Di.HSL,HSV:xi.HSV,Invert:bi.Invert,Kaleidoscope:vi.Kaleidoscope,Mask:_i.Mask,Noise:Si.Noise,Pixelate:Bi.Pixelate,Posterize:wi.Posterize,RGB:ki.RGB,RGBA:Mi.RGBA,Sepia:Ii.Sepia,Solarize:Ti.Solarize,Threshold:Pi.Threshold}})}));Ie(Ni),Ni.Konva;var Ri=Ie(Te((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t.exports=Ni.Konva})));class Li{constructor(t){this.config=t,this.startX=20,this.emitter=new ke,this.hoverRect={x:0,y:0,id:""},this.taskRanges=[],this.date=new Date,this.recordsDragGroupRect={differenceX:0,differenceY:0,sourceX:0,sourceY:0,targetGroup:null,startX:0,startY:0},this.dragGroup=null,this.clickCurrentInfo={x:0,y:0,id:""},this.globalMouseUpHandler=null,console.log("没素质123456",Ri.DD),this.setContainer(t.container),this.stage=new Ri.Stage({width:Math.max(t.width||0,780),height:Math.max(t.height||0,730),x:0,y:0,container:t.container}),this.layer=new Ri.Layer({name:"static-layer"}),this.featureLayer=new Ri.Layer({name:"dynamic-layer"}),this.stage.add(this.layer),this.stage.add(this.featureLayer),this.stage.container().children[0].style.background="#FFF";const{width:e,height:i}=this.stageRect;this.stageHeight=i,this.cellWidth=(e-40)/7,this.cellHeight=(i-60-30)/5,this.initDate(),this.registerEvents(),this.drawHoverGroup(),this.drawCalendar(this.month,this.year)}initDate(t){this.date=new Date(t||this.config.initDate||new Date),this.stringDate=Li.formatDate(this.date),this.month=this.date.getMonth()+1,this.year=this.date.getFullYear(),this.month>12&&(this.month=1,this.year=this.year+1)}get box(){return this.element.getBoundingClientRect()}setContainer(t){if("."===t.charAt(0)){const e=t.slice(1);this.element=document.getElementsByClassName(e)[0]}else{let e;e="#"!==t.charAt(0)?t:t.slice(1),this.element=document.getElementById(e)}}get container(){return this.stage.container()}downImage(t){this.stage.toImage(Object.assign({pixelRatio:2,callback:t=>{const e=document.createElement("a");e.href=t.src,e.download="image.png",e.click()}},t))}registerEvents(){this.stage.on("click",(t=>{2!==t.evt.button&&this.clickCurrentInfo.id&&(this.emitter.emit("CLICKRANGE",this.clickCurrentInfo),this.clickCurrentInfo={x:0,y:0,id:""})})),this.stage.on("mousedown touchstart",(t=>this.mousedown(t.evt))),this.stage.on("mousemove touchmove",(()=>this.mousemoveHoveHighlight())),this.stage.on("mousemove touchmove",(()=>this.dragMousemove())),this.stage.on("mouseup touchend",(()=>this.mouseup())),this.stage.on("mouseleave touchcancel",(()=>{var t,e;null===(e=null===(t=this.hoverGroup)||void 0===t?void 0:t.setAttr)||void 0===e||e.call(t,"visible",!1)})),this.stage.on("contextmenu",(t=>this.contextMenu(t)))}contextMenu(t){t.cancelBubble=!0,t.evt.preventDefault();const e=this.findGroup(this.featureLayer,".task-progress-group");e&&this.emitter.emit("CONTEXTMENU",{x:e.pointer.x,y:e.pointer.y,id:e.group.attrs.parentId})}get stageRect(){return{width:this.stage.width(),height:this.stage.height()}}mousedown(t){const i=this.findGroup(this.featureLayer,".task-progress-group");if(!i)return;if(0!==t.button)return;if("read"===this.config.mode)return;this.clickCurrentInfo={x:i.pointer.x,y:i.pointer.y,id:i.group.attrs.parentId};const{group:r,pointer:n,rect:s}=i;this.recordsDragGroupRect=new e({differenceX:n.x-s.x,differenceY:n.y-s.y,sourceX:s.x,sourceY:s.y,targetGroup:r,startX:n.x,startY:n.y})}mousemoveHoveHighlight(){const t=this.findGroup(this.layer,".dateCell");if(!t)return;const{group:e}=t,i=e.attrs.x,r=e.attrs.y;i!==this.hoverRect.x||r!==this.hoverRect.y?(this.hoverRect={x:i,y:r,id:e.attrs.id},this.hoverGroup.setAttrs({x:i,y:r,visible:!0})):this.hoverGroup.isVisible()||(this.hoverGroup.moveToBottom(),this.hoverGroup.setAttr("visible",!0))}dragMousemove(){if("read"===this.config.mode)return;if(0===this.recordsDragGroupRect.differenceX&&0===this.recordsDragGroupRect.differenceY)return;this.dragGroup||(this.dragGroup=this.recordsDragGroupRect.targetGroup.clone(),this.recordsDragGroupRect.targetGroup.opacity(.33),this.hoverGroup.children[0].setAttr("fill","rgba(237,244,255,0.8)"),this.hoverGroup.moveToBottom(),this.featureLayer.add(this.dragGroup),this.globalMouseUpHandler=this.globalMouseup.bind(this),window.addEventListener("mouseup",this.globalMouseUpHandler));const t=this.stage.getPointerPosition();this.dragGroup.setAttrs({x:t.x-this.recordsDragGroupRect.differenceX,y:t.y-this.recordsDragGroupRect.differenceY})}globalMouseup(t){var e,i,r;this.stage.setPointersPositions(t);const n=this.findGroup(this.layer,".dateCell"),s=this.findGroup(this.layer,".dateCell",{x:this.recordsDragGroupRect.startX,y:this.recordsDragGroupRect.startY});if(!n||!s)return null===(e=this.recordsDragGroupRect.targetGroup)||void 0===e||e.opacity(1),void this.clearDragDepend();const a=s.group.attrs.id,o=n.group.attrs.id,{day:h=0,parentId:l}=null===(i=this.recordsDragGroupRect.targetGroup)||void 0===i?void 0:i.attrs,d=this.taskRanges.findIndex((t=>t.id===l));if(d<0)return void this.clearDragDepend();if(a===o||this.taskRanges[d].startTime===o)return null===(r=this.recordsDragGroupRect.targetGroup)||void 0===r||r.opacity(1),void this.clearDragDepend();const c=this.addDays(o,h);this.taskRanges[d].startTime=o,this.taskRanges[d].endTime=c,this.emitter.emit("UPDATETASK",{id:l,startTime:o,endTime:c}),this.clearDragDepend(),this.drawTaskProgress()}clearDragDepend(){var t,i;this.hoverGroup.children[0].setAttr("fill","rgba(0, 0, 0, 0.053)"),null===(i=null===(t=this.dragGroup)||void 0===t?void 0:t.remove)||void 0===i||i.call(t),this.dragGroup=null,this.clickCurrentInfo={x:0,y:0,id:""},this.recordsDragGroupRect=new e,window.removeEventListener("mouseup",this.globalMouseUpHandler)}mouseup(){this.dragGroup||(this.recordsDragGroupRect={differenceX:0,differenceY:0,sourceX:0,sourceY:0,startX:0,startY:0,targetGroup:null},this.dragGroup=null)}setData(t){return this.taskRanges=t instanceof Array?t:[...this.taskRanges,t],this.drawTaskProgress(),this}on(t,e){return this.emitter.on(t,e),this}destory(){}addDays(t,e){const i=new Date(t);return new Date(i.getTime()+864e5*e).toISOString().split("T")[0]}addMonth(t,e,i){let r=e+i,n=t;for(;r>12;)n++,r-=12;for(;r<1;)n--,r+=12;const s=r<10?`0${r}`:`${r}`;return{stringDate:`${n}-${s}`,nonePadMonth:r,month:s}}draw(){return this.drawCalendar(this.month,this.year),this.drawHoverGroup(),this.drawTaskProgress(),this}nextMonth(){this.month++,this.month>12&&(this.month=1,this.year++),this.featureLayer.removeChildren(),this.draw()}today(){this.initDate(new Date),this.draw()}prevMonth(){this.month--,this.month<1&&(this.month=12,this.year--),this.featureLayer.removeChildren(),this.draw()}findGroup(e,i,r){const n=r||this.stage.getPointerPosition(),s=e.find(i);if(s.length)for(let e=0;e<s.length;e++){const i=s[e],r=i.getClientRect();if(t(r,n))return{group:i,rect:r,pointer:n}}}getDaysInMonth(t,e){const i=new Date(e,t-1,1),r=new Date(e,t,0);return{firstDay:i,lastDay:r,daysInMonth:r.getDate()}}drawCalendar(t,e){this.layer.removeChildren();const{firstDay:i,daysInMonth:r}=this.getDaysInMonth(t,e),n=new Ri.Group({name:"header"}),s=new Ri.Rect({x:0,y:0,width:this.stage.width(),height:40,fill:"white",strokeWidth:1}),a=new Ri.Text({x:0,y:10,text:`${e}年${t}月`,fontSize:18,fontStyle:"bold",width:120,align:"center"});n.add(s,a),this.layer.add(n),Li.daysOfWeek.forEach(((t,e)=>{const i=new Ri.Rect({x:e*this.cellWidth+this.startX,y:40,width:this.cellWidth,height:30,fill:"white",strokeWidth:1}),r=new Ri.Text({x:e*this.cellWidth+this.startX,y:50,text:t,fontSize:12,fill:"rgba(0,0,0,0.9)",width:this.cellWidth,align:"center"});this.layer.add(i,r)}));const o=(i.getDay()+6)%7,h=0===t?11:t-1,l=0===t?e-1:e,{daysInMonth:d}=this.getDaysInMonth(h,l);for(let t=0;t<o;t++){const e=d-o+1+t,i=t*this.cellWidth+this.startX,{stringDate:r}=this.addMonth(l,h,0),n=r+`-${e<10?"0"+e:e}`,{dayInChinese:s,monthInChinese:a}=Li.getChineseCalendar(new Date(n)),c=new Ri.Group({name:"dateCell",id:n,x:i,y:70}),g=new Ri.Rect({x:0,y:0,width:this.cellWidth,height:this.cellHeight,fill:"#fff",stroke:"#E1E2E3",strokeWidth:1}),u=new Ri.Text({x:10,y:10,text:e.toString(),fontSize:16,fill:"gray"}),f=new Ri.Text({x:this.cellWidth-40,y:13,text:"初一"===s?`${a}`:s,fontSize:12,fill:"rgba(0,0,0,0.4)"});c.add(g,u,f),this.layer.add(c)}for(let t=0;t<r;t++){const e=(t+o)%7*this.cellWidth+this.startX,i=Math.floor((t+o)/7)*this.cellHeight+40+30,r=t+1<10?"0"+(t+1):t+1,{stringDate:n,nonePadMonth:s}=this.addMonth(l,h,1),a=n+`-${r}`,d=new Ri.Group({name:"dateCell",id:a,x:e,y:i}),{dayInChinese:c,monthInChinese:g}=Li.getChineseCalendar(new Date(a)),u=this.stringDate===a,f=new Ri.Rect({x:0,y:0,width:this.cellWidth,height:this.cellHeight,fill:"#fff",stroke:"#EEE",strokeWidth:1});let F=16,C=(t+1).toString();"1"===C&&(C=s.toString()+"月",F=13);const m=new Ri.Text({x:15,y:10,text:C,fontSize:F,fill:u?"#FFF":"black",fontStyle:"bold"}),p=m.width(),A=m.height(),j=14,y=m.x()+p/2,E=m.y()+A/2,D=new Ri.Circle({x:y,y:E,radius:j,fill:u?"#1f6df6":"#FFF",stroke:u?"#1f6df6":"#FFF",strokeWidth:1}),x=new Ri.Text({x:this.cellWidth-40,y:13,text:"初一"===c?`${g}`:c,fontSize:12,fill:"rgba(0,0,0,0.4)"});d.add(f,D,m,x);const{y:b,height:v}=d.getClientRect();b+v<this.stageHeight&&(this.layer.add(d),d.moveToTop())}const c=(r+o)%7;for(let t=0;t<(7-c)%7;t++){const e=t+1,i=(r+o+t)%7*this.cellWidth+this.startX,n=Math.floor((r+o)/7)*this.cellHeight+40+30,{stringDate:s}=this.addMonth(l,h,2),a=s+`-${t+1<10?"0"+(t+1):t+1}`,d=new Ri.Group({name:"dateCell",id:a,x:i,y:n}),{dayInChinese:c,monthInChinese:g}=Li.getChineseCalendar(new Date(a)),u=new Ri.Rect({x:0,y:0,width:this.cellWidth,height:this.cellHeight,fill:"#fff",stroke:"#E1E2E3",strokeWidth:1}),f=new Ri.Text({x:10,y:10,text:e.toString(),fontSize:16,fill:"gray",align:"center"}),F=new Ri.Text({x:this.cellWidth-40,y:13,text:"初一"===c?`${g}`:c,fontSize:12,fill:"rgba(0,0,0,0.4)"});d.add(u,f,F);const{y:C,height:m}=d.getClientRect();C+m<this.stageHeight&&this.layer.add(d)}}drawTaskProgress(){if(this.removeTasks(),!this.taskRanges.length)return;const t=this.splitRanges(this.taskRanges);t.sort(((t,e)=>{const i=new Date(t.startTime).getTime(),r=new Date(e.startTime).getTime(),n=new Date(t.endTime).getTime()-i,s=new Date(e.endTime).getTime()-r;return i!==r?i-r:n-s}));const e=new Map([[35,[]],[60,[]],[85,[]]]),i=new Map;t.forEach((t=>{const r=t.startTime,n=t.endTime,s=(Math.abs(this.calculateDaysDifference(t.endTime,t.startTime))+1)*this.cellWidth,a=this.layer.find(`#${t.startTime}`)[0];if(!a)return;const o=a.getClientRect();let h=0;for(let[t,i]of e){let e=!1;for(let t of i)if(r>=t[0]&&r<=t[1]||n>=t[0]&&n<=t[1]||r<=t[0]&&n>=t[1]){e=!0;break}if(!e){h=t,i.push([r,n]);break}}if(h>=110||h<=0)return i.has(t.startTime)?void i.get(t.startTime).push(t):void i.set(t.startTime,[t]);let l=o.x,d=s;t.startSign&&(l+=10,d-=10),t.endSign&&(d-=10);const c=new Ri.Rect({y:0,x:0,width:d,height:20,fill:t.fill||"#f3d4d4",opacity:1,cornerRadius:[3,3,3,3]}),g=new Ri.Text({x:t.startSign?15:5,y:5,text:t.description||"未命名记录",fontSize:12,fill:"rgba(0,0,0,0.8)"}),u=new Ri.Group({name:`task-progress-group ${t.parentId}`,id:t.id,parentId:t.parentId,day:t.day,startSign:t.startSign,endSign:t.endSign,y:o.y+h,x:l});u.add(c,g),this.featureLayer.add(u),u.moveToTop()})),this.drawSurpassTips(i)}drawSurpassTips(t){const e=t.values();for(;;){const{value:t,done:i}=e.next();if(i)break;const r=this.layer.find(`#${t[0].startTime}`);if(r.length){const e=r[0].getClientRect(),i=new Ri.Text({x:0,y:5,text:`还有${t.length}项`,fontSize:12,fill:"rgba(0,0,0,0.4)"}),n=new Ri.Rect({x:-5,y:0,height:18,width:i.getWidth()+10,opacity:1,cornerRadius:[3,3,3,3]}),s=new Ri.Group({name:"surpass-group",id:t[0].startTime,x:e.x+10,y:e.y+e.height-22});s.add(n,i),this.featureLayer.add(s),s.on("click tap",(()=>{this.emitter.emit("CLICKSURPASSTIP",this.findTasksContainingDate(t[0].startTime))})),s.on("mouseover",(()=>{this.container.style.cursor="pointer",n.fill("rgba(0,0,0,0.1)")})),s.on("mouseout",(()=>{this.container.style.cursor="default",n.fill("transparent")}))}}}findTasksContainingDate(t){const e=new Date(t);return this.taskRanges.filter((t=>{const i=new Date(t.startTime),r=new Date(t.endTime);return e>=i&&e<=r}))}removeTasks(){const t=this.featureLayer.find(".task-progress-group,.surpass-group");t.length&&t.forEach((t=>{t.remove()}))}calculateDaysDifference(t,e){const i=new Date(t);return(new Date(e)-i)/864e5}splitRanges(t){const e=(t,e,r,n,s)=>{const a=[];let o=new Date(t);const h=Math.abs(this.calculateDaysDifference(e,t));for(;o<=e;){const l=o.getDay();let d;0===l?d=new Date(o):(d=new Date(o),d.setDate(o.getDate()+(7-l)),d>e&&(d=e));const c=o.toISOString().split("T")[0],g=d.toISOString().split("T")[0];a.push({startTime:c,endTime:g,fill:r,description:n,parentId:s,id:i(),day:h,startSign:t.getTime()===o.getTime(),endSign:d.getTime()===e.getTime()}),o=new Date(d),o.setDate(o.getDate()+1)}return a};return t.flatMap((t=>{const i=new Date(t.startTime),r=new Date(t.endTime);return e(i,r,t.fill,t.description,t.id)}))}drawHoverGroup(){const t=new Ri.Group({visible:!1,width:this.cellWidth,height:this.cellHeight,x:0,y:0,id:"hoverGroup",opacity:.6}),e=new Ri.Rect({x:0,y:0,width:this.cellWidth,height:this.cellHeight,fill:"rgba(0, 0, 0, 0.053)",strokeWidth:1,cornerRadius:[2,2,2,2]});if(this.hoverGroup=t,"read"===this.config.mode||!this.config.isAddTaskBtn)return t.add(e),void this.featureLayer.add(t);const{plusSignGroup:i,plusSignRect:r}=this.drawPlusSign();t.add(i,e),this.featureLayer.add(t);const n=new Ri.Label({x:0,y:0,visible:!1});r.on("click tap",(t=>{t.cancelBubble=!0,this.emitter.emit("ADDTASKRANGE",this.hoverRect.id)})),r.on("mouseover",(()=>{r.setAttr("fill","rgba(0, 0, 0, 0.1)"),this.stage.container().style.cursor="pointer";const t=this.hoverGroup.getClientRect();n.setAttrs({visible:!0,x:t.x+t.width-10,y:t.y,opacity:.75}),n.moveToTop(),n.to({opacity:1})})),r.on("mouseout",(()=>{r.setAttr("fill","rgba(0, 0, 0, 0)"),this.stage.container().style.cursor="default",n.setAttr("visible",!1)})),i.moveToTop(),n.add(new Ri.Tag({fill:"black",pointerDirection:"down",pointerWidth:5,pointerHeight:5,lineJoin:"round",x:5,y:5,cornerRadius:[2,2,2,2]})),n.add(new Ri.Text({text:"添加记录",fill:"white",fontSize:12,verticalAlign:"middle",padding:10,align:"center"})),this.featureLayer.add(n)}drawPlusSign(){const t=new Ri.Group({id:"plusSignGroup",x:this.hoverGroup.x()+this.cellWidth-30,y:this.hoverGroup.y()+5}),e=new Ri.Rect({x:10,y:-5,width:20,height:20,fill:"rgba(0, 0, 0, 0)"}),i=new Ri.Line({points:[20,0,20,10],stroke:"rgba(0, 0, 255, 0.3)",strokeWidth:2}),r=new Ri.Line({points:[15,5,25,5],stroke:"rgba(0, 0, 255, 0.3)",strokeWidth:2});return t.add(i,r,e),{plusSignGroup:t,plusSignRect:e}}static formatDate(t){return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}static getChineseCalendar(t){const e=pe.fromYmd(t.getFullYear(),t.getMonth()+1,t.getDate()).getLunarDay().toString().match(/^(\S+年)(\S+月)(\S+)$/).slice(1);return{dayInChinese:e[2],monthInChinese:e[1]}}}Li.daysOfWeek=["周一","周二","周三","周四","周五","周六","周天"];export{Li as CanvasKonvaCalendar,Li as default};
